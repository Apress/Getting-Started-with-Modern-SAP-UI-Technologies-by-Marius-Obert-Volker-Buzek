// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/AppRuntimeContext","sap/ui/thirdparty/jquery"],function(e,s,i,a,r,t,l,c){"use strict";var n=a({serviceRegistry:e,serviceFactory:s,service:i});var u,p=false,v;var o=n.extend("sap.ushell.appRuntime.services.ShellUIService",{setTitle:function(e){u=e;return t.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{sTitle:e})},getTitle:function(){return u},setHierarchy:function(e){return t.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{aHierarchyLevels:e})},setRelatedApps:function(e){return t.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{aRelatedApps:e})},setBackNavigation:function(e){if(!p){p=true;r.registerCommHandlers({"sap.ushell.appRuntime":{oServiceCalls:{handleBackNavigation:{executeServiceCallFn:function(e){if(v){v()}else if(l.checkDataLossAndContinue()){window.history.back()}return(new c.Deferred).resolve().promise()}}}}})}v=e;t.sendMessageToOuterShell("sap.ushell.ui5service.ShellUIService.setBackNavigation",{callbackMessage:{service:"sap.ushell.appRuntime.handleBackNavigation"}})},_getBackNavigationCallback:function(){return v},_resetBackNavigationCallback:function(){this.setBackNavigation()}});return o});