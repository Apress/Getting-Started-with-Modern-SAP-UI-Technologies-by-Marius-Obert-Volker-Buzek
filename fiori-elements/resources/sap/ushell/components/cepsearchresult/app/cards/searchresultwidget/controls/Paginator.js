/*!
 * Copyright (c) 2009-2023 SAP SE, All Rights Reserved
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ToggleButton","sap/ui/core/delegate/ItemNavigation","../../../util/appendStyleVars","sap/ui/dom/includeStylesheet"],function(t,e,i,n,a){"use strict";n(["sapUiBaseText","sapUiButtonBackground","sapUiLinkActiveColor"]);a(sap.ui.require.toUrl("sap/ushell/components/cepsearchresult/app/cards/searchresultwidget/controls/Paginator.css"));var s=t.extend("sap.ushell.components.cepsearchresult.app.cards.searchresultwidget.controls.Paginator",{metadata:{properties:{pageSize:{type:"int",defaultValue:5},count:{type:"int",defaultValue:0},currentPage:{type:"int",defaultValue:1},segmentSize:{type:"int",defaultValue:7}},aggregations:{_buttons:{type:"sap.m.Button",multiple:true,hidden:true}},events:{selectPage:{}}},renderer:function(t,e){t.openStart("div",e);t.class("sapUiCEPCatPag");t.openEnd();var i=e.getAggregation("_buttons")||[];for(var n=0;n<i.length;n++){t.renderControl(i[n])}t.close("div")}});s.prototype._setCurrentPageWithEvent=function(t){this.setCurrentPage(t);var e=t-1;var i=this.getPageSize();this.fireSelectPage({page:t,startIndex:e*i,endIndex:(e+1)*i-1})};s.prototype._addButtons=function(){this.destroyAggregation("_buttons");var t=this.getPageSize();var i=Math.ceil(this.getCount()/t);var n=Math.min(this.getCurrentPage(),i);var a=this.getSegmentSize();var s=Math.max(n-Math.floor(a/2),1);var o=Math.min(s+a-1,i);if(o===i){s=Math.max(i-a+1,1)}var r=new e({icon:"sap-icon://navigation-left-arrow",enabled:n>1,visible:i>1,press:function(){this._setCurrentPageWithEvent(n-1)}.bind(this)});this.addAggregation("_buttons",r);if(s>1){var g=new e({text:"1",enabled:n>1,visible:n>1,press:function(){this._setCurrentPageWithEvent(1)}.bind(this)});this.addAggregation("_buttons",g);var u=new e({text:s===3?2:"...",enabled:n>=s,visible:i>a&&s>2,press:function(){this._setCurrentPageWithEvent(s-1)}.bind(this)});this.addAggregation("_buttons",u)}for(var d=s;d<=o;d++){var h=new e({text:""+d,pressed:d===n,enabled:d!==n,visible:true,press:function(t,e){return function(){t._setCurrentPageWithEvent(e)}}(this,d)});h.addStyleClass("sapUiCEPCatPagNumber");this.addAggregation("_buttons",h)}if(o<i){var l=new e({text:o===i-2?i-1:"...",enabled:true,visible:i>1&&n<=i-a/2,press:function(){this._setCurrentPageWithEvent(o+1)}.bind(this)});this.addAggregation("_buttons",l);var p=new e({text:""+i,enabled:n!==i,visible:i>1,press:function(){this._setCurrentPageWithEvent(i)}.bind(this)});this.addAggregation("_buttons",p)}var v=new e({icon:"sap-icon://navigation-right-arrow",enabled:n<i,visible:i>1,press:function(){this._setCurrentPageWithEvent(n+1)}.bind(this)});this.addAggregation("_buttons",v)};s.prototype._removeKeyboardNavigation=function(){if(this._oItemNavigation){this.removeDelegate(this._oItemNavigation);this._oItemNavigation.destroy();this._oItemNavigation=null}};s.prototype._initNavigation=function(){this._removeKeyboardNavigation();this._oItemNavigation=new i;this._oItemNavigation.setCycling(false).setTableMode(true,true).setColumns(this.getAggregation("_buttons").length).setRootDomRef(this.getDomRef()).setPageSize(this.getPageSize());var t=Array.from(this.getDomRef().querySelectorAll(".sapMBtn"));this._oItemNavigation.setItemDomRefs(t);if(this._oItemNavigation.getFocusedIndex()==-1){this._oItemNavigation.setFocusedIndex(this.getCurrentPage()-1+1)}this.addDelegate(this._oItemNavigation)};s.prototype.onBeforeRendering=function(){this._addButtons()};s.prototype.onAfterRendering=function(){this._initNavigation()};s.prototype.destroy=function(){this._removeKeyboardNavigation();this.destroyAggregation("_buttons")};return s});