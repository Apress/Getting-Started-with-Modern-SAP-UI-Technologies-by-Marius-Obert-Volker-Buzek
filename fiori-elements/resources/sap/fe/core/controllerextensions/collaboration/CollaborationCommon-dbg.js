/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/BindingToolkit","sap/fe/macros/CommonHelper","sap/ui/core/Component","sap/ui/core/Core","../../formatters/CollaborationFormatter"],function(e,t,n,o,r){"use strict";var i={};var a=e.getExpressionFromAnnotation;var s=e.formatResult;var l=e.constant;var c=e.compileExpression;let u;(function(e){e[e["NotYetInvited"]=0]="NotYetInvited";e[e["NoChangesMade"]=1]="NoChangesMade";e[e["ChangesMade"]=2]="ChangesMade";e[e["CurrentlyEditing"]=3]="CurrentlyEditing"})(u||(u={}));i.UserStatus=u;let g;(function(e){e["NoChanges"]="N";e["InProgress"]="P"})(g||(g={}));i.UserEditingState=g;let d;(function(e){e["Join"]="JOIN";e["JoinEcho"]="JOINECHO";e["Leave"]="LEAVE";e["Change"]="CHANGE";e["Create"]="CREATE";e["Delete"]="DELETE";e["Action"]="ACTION";e["LiveChange"]="LIVECHANGE";e["Activate"]="ACTIVATE";e["Discard"]="DISCARD";e["Undo"]="UNDO"})(d||(d={}));i.Activity=d;const f="Users";const p="UserID";function C(e){const t=["Dr.","Prof.","Prof. Dr.","B.A.","MBA","Ph.D."];t.forEach(function(t){e=e.replace(t,"")});let n;const o=e.trimStart().split(" ");if(o.length>1){var r,i;n=((o===null||o===void 0?void 0:(r=o.shift())===null||r===void 0?void 0:r.charAt(0))||"")+((i=o.pop())===null||i===void 0?void 0:i.charAt(0))}else{n=e.substring(0,2)}return n.toUpperCase()}function m(e,t,n){const o=t.find(t=>t.id===e);if(o){return o.color}else{for(let e=1;e<=10;e++){if(t.findIndex(t=>t.color===e)===-1&&n.findIndex(t=>t.color===e)===-1){return e}}return 10}}function A(e){const n=e.targetEntitySet.annotations.Common.DraftRoot.ShareAction.toString();const o=e.targetEntityType.resolvePath(n);const r=o.parameters.find(e=>e.name===f);const i={name:t.addSingleQuotes("sap/fe/macros/valuehelp/ValueHelpDelegate"),payload:{propertyPath:t.addSingleQuotes(`/${r.type}/${p}`),qualifiers:{},valueHelpQualifier:t.addSingleQuotes(""),isActionParameterDialog:true}};return t.objectToString(i)}i.getValueHelpDelegate=A;function h(e){if(e.isA("sap.fe.core.AppComponent")){return e}const t=n.getOwnerComponentFor(e);if(!t){return e}else{return h(t)}}function v(e){const t=h(e).getShellServices();if(!t||!t.hasUShell()){throw"No Shell... No User"}return{initials:t.getUser().getInitials(),id:t.getUser().getId(),name:`${t.getUser().getFullName()} (${E("C_COLLABORATIONDRAFT_YOU")})`,initialName:t.getUser().getFullName(),color:6,me:true,status:u.CurrentlyEditing}}function E(e){const t=o.getLibraryResourceBundle("sap.fe.core");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++){r[i-1]=arguments[i]}return t.getText(e,r)}i.getText=E;function I(e){var t;const n=e.targetObject;const o=a((t=n.Title)===null||t===void 0?void 0:t.Value,[],"");const i=["C_COLLABORATIONDRAFT_INVITATION_DIALOG",l(n.TypeName),o];const u=s(i,r.getFormattedText);return c(u)}i.getInvitationDialogTitleExpBinding=I;const N={formatInitials:C,getUserColor:m,getMe:v,getAppComponent:h,getText:E,getInvitationDialogTitleExpBinding:I};i.CollaborationUtils=N;function T(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];const n=e.getModel();const o=n.getMetaModel();const r=o.getMetaPath(e);const i=o.getObject(`${r}@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction`);const a=n.bindContext(`${i}(...)`,e);a.setParameter("Users",t);a.setParameter("ShareAll",true);return a.execute()}i.shareObject=T;return i},false);