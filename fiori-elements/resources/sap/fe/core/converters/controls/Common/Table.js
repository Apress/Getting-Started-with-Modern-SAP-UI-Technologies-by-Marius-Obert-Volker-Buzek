/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/IssueManager","sap/fe/core/converters/helpers/Key","sap/fe/core/formatters/TableFormatter","sap/fe/core/formatters/TableFormatterTypes","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/DisplayModeFormatter","sap/fe/core/templating/EntitySetHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/internal/helpers/ActionHelper","sap/ui/core/Core","../../helpers/Aggregation","../../helpers/DataFieldHelper","../../helpers/ID","../../ManifestSettings","./Criticality","./table/StandardActions"],function(e,t,n,o,i,a,l,r,s,d,u,c,v,f,p,g,m,y,b,h,T,I,P,A,D){"use strict";var F={};var C=D.isInDisplayMode;var S=D.isDraftOrStickySupported;var E=D.getStandardActionPaste;var O=D.getStandardActionMassEdit;var x=D.getStandardActionDelete;var M=D.getStandardActionCreate;var U=D.getRestrictions;var $=D.getMassEditVisibility;var N=D.getInsertUpdateActionsTemplating;var w=D.getDeleteVisibility;var V=D.getCreationRow;var k=D.generateStandardActionsContext;var L=A.getMessageTypeFromCriticalityType;var R=P.VisualizationType;var j=P.VariantManagementType;var H=P.TemplateType;var B=P.SelectionMode;var z=P.Importance;var G=P.HorizontalAlign;var K=P.CreationMode;var W=P.ActionType;var q=I.getTableID;var Q=T.isReferencePropertyStaticallyHidden;var _=h.AggregationHelper;var Y=m.isMultiValueField;var J=g.getAssociatedUnitProperty;var X=g.getAssociatedTimezoneProperty;var Z=g.getAssociatedCurrencyProperty;var ee=p.getNonSortablePropertiesRestrictions;var te=f.getDisplayMode;var ne=v.isPathUpdatable;var oe=v.isPathSearchable;var ie=v.isPathDeletable;var ae=v.getTargetObjectPath;var le=v.enhanceDataModelPath;var re=c.isTypeDefinition;var se=c.isProperty;var de=c.isPathAnnotationExpression;var ue=c.isNavigationProperty;var ce=c.isAnnotationOfType;var ve=u.replaceSpecialChars;var fe=u.generate;var pe=s.resolveBindingString;var ge=s.pathInModel;var me=s.or;var ye=s.not;var be=s.isConstant;var he=s.ifElse;var Te=s.getExpressionFromAnnotation;var Ie=s.formatResult;var Pe=s.equal;var Ae=s.EDM_TYPE_MAPPING;var De=s.constant;var Fe=s.compileExpression;var Ce=s.and;var Se=r.MessageType;var Ee=a.KeyHelper;var Oe=i.IssueType;var xe=i.IssueSeverity;var Me=i.IssueCategoryType;var Ue=i.IssueCategory;var $e=o.Placement;var Ne=o.OverrideType;var we=o.insertCustomElements;var Ve=n.UI;var ke=n.Entity;var Le=t.getEnabledForAnnotationAction;var Re=t.removeDuplicateActions;var je=t.isActionNavigable;var He=t.getCopyAction;var Be=t.getActionsFromManifest;var ze=t.dataFieldIsCopyAction;var Ge=e.isDataPointFromDataFieldDefault;var Ke=e.isDataFieldTypes;var We=e.isDataFieldForActionAbstract;var qe=e.getTargetValueOnDataPoint;var Qe=e.getSemanticObjectPath;var _e=e.getDataFieldDataType;var Ye=e.collectRelatedPropertiesRecursively;var Je=e.collectRelatedProperties;var Xe;(function(e){e["Default"]="Default";e["Annotation"]="Annotation";e["Slot"]="Slot"})(Xe||(Xe={}));function Ze(e,t,n,o){const i=ht(e,t,n);const a=i.tableActions;const l=i.hiddenTableActions;const r=Be(n.getManifestControlConfiguration(t).actions,n,a,o,true,l);const s={isNavigable:Ne.overwrite,enableOnSelect:Ne.overwrite,enableAutoScroll:Ne.overwrite,enabled:Ne.overwrite,visible:Ne.overwrite,defaultValuesExtensionFunction:Ne.overwrite,command:Ne.overwrite};const d=we(a,r.actions,s);return{actions:d,commandActions:r.commandActions}}F.getTableActions=Ze;function et(e,t,n,o){const i=Jt(e,t,n);const a=en(n.getManifestControlConfiguration(t).columns,i,n,n.getAnnotationEntityType(e),o);return we(i,a,{width:Ne.overwrite,importance:Ne.overwrite,horizontalAlign:Ne.overwrite,availability:Ne.overwrite,isNavigable:Ne.overwrite,settings:Ne.overwrite,formatOptions:Ne.overwrite})}F.getTableColumns=et;const tt=function(e,t,n){const o=new _(e,n);function i(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}if(!o.isAnalyticsSupported()){return undefined}const a=new Set;t.forEach(e=>{const t=e;if(t.unit){a.add(t.unit)}});const l=o.getCustomAggregateDefinitions();const r={};l.forEach(e=>{const t=o._entityType.entityProperties.find(t=>t.name===e.qualifier);if(t){var n,i;const o=(n=e.annotations)===null||n===void 0?void 0:(i=n.Aggregation)===null||i===void 0?void 0:i.ContextDefiningProperties;r[t.name]=o?o.map(e=>e.value):[]}});const s={};t.forEach(e=>{const t=e;if(t.propertyInfos===undefined&&t.relativePath){const e=r[t.relativePath];if(e&&!a.has(t.name)){s[t.name]={defaultAggregate:{},relativePath:t.relativePath};const n=[];e.forEach(e=>{const t=i(e);if(t){n.push(t.name)}});if(n.length){s[t.name].defaultAggregate.contextDefiningProperties=n}}}});return s};F.getAggregateDefinitionsFromEntityType=tt;function nt(e,t,n,o){if(e.control.type==="AnalyticalTable"){const i=tt(t,e.columns,n),a=new _(t,n);if(i){e.enableAnalytics=true;e.enable$select=false;e.enable$$getKeepAliveContext=false;e.aggregates=i;sn(e);const t=a.getAllowedTransformations();e.enableBasicSearch=t?t.indexOf("search")>=0:true;e.annotation.groupConditions=rn(o,e.columns,e.control.type);e.annotation.aggregateConditions=dn(o,e.columns)}e.control.type="GridTable"}else if(e.control.type==="ResponsiveTable"){e.annotation.groupConditions=rn(o,e.columns,e.control.type)}else if(e.control.type==="TreeTable"){const o=new _(t,n);const i=o.getAllowedTransformations();e.enableBasicSearch=i?i.includes("search"):true;e.enable$$getKeepAliveContext=false}}F.updateTableVisualizationForType=nt;function ot(e,t){const n=e.getManifestWrapper();if(t&&n.getNavigationConfiguration(t)){const e=n.getNavigationConfiguration(t);if(Object.keys(e).length>0){return t}}const o=e.getDataModelObjectPath();const i=e.getContextPath();const a=n.getNavigationConfiguration(i);if(a&&Object.keys(a).length>0){return i}return o.targetEntitySet?o.targetEntitySet.name:o.startingEntitySet.name}function it(e,t){function n(e){return t.find(t=>{const n=t;return n.propertyInfos===undefined&&n.relativePath===e})}t.forEach(t=>{const o=t;if(o.propertyInfos===undefined&&o.relativePath){const t=e.entityProperties.find(e=>e.name===o.relativePath);if(t){var i,a,l;const e=Z(t)||J(t);const c=X(t);const v=t===null||t===void 0?void 0:(i=t.annotations)===null||i===void 0?void 0:(a=i.Common)===null||a===void 0?void 0:a.Timezone;if(e){const t=n(e.name);o.unit=t===null||t===void 0?void 0:t.name}else{var r,s,d,u;const e=(t===null||t===void 0?void 0:(r=t.annotations)===null||r===void 0?void 0:(s=r.Measures)===null||s===void 0?void 0:s.ISOCurrency)||(t===null||t===void 0?void 0:(d=t.annotations)===null||d===void 0?void 0:(u=d.Measures)===null||u===void 0?void 0:u.Unit);if(e){o.unitText=`${e}`}}if(c){const e=n(c.name);o.timezone=e===null||e===void 0?void 0:e.name}else if(v){o.timezoneText=v.toString()}const f=te(t),p=(l=t.annotations.Common)===null||l===void 0?void 0:l.Text;if(de(p)&&f!=="Value"){const e=n(p.path);if(e&&e.name!==o.name){o.textArrangement={textProperty:e.name,mode:f}}}}}})}F.updateLinkedProperties=it;function at(e){var t,n,o,i,a,l,r,s,d,u,c,v,f;const p=(t=e.getAnnotationEntityType())===null||t===void 0?void 0:(n=t.annotations)===null||n===void 0?void 0:(o=n.UI)===null||o===void 0?void 0:(i=o.HeaderInfo)===null||i===void 0?void 0:(a=i.Title)===null||a===void 0?void 0:(l=a.Value)===null||l===void 0?void 0:l.path;const g=(r=e.getAnnotationEntityType())===null||r===void 0?void 0:(s=r.annotations)===null||s===void 0?void 0:(d=s.Common)===null||d===void 0?void 0:d.SemanticKey;const m=e===null||e===void 0?void 0:(u=e.getAnnotationEntityType())===null||u===void 0?void 0:(c=u.annotations)===null||c===void 0?void 0:(v=c.UI)===null||v===void 0?void 0:(f=v.HeaderInfo)===null||f===void 0?void 0:f.TypeName;const y=[];if(g){g.forEach(function(e){y.push(e.value)})}return{headerInfoTitlePath:p,semanticKeyColumns:y,headerInfoTypeName:m}}function lt(e,t,n,o,i,a){const l=Fn(e,t,n,i);const{navigationPropertyPath:r}=vn(t);const s=ot(n,r);const d=n.getManifestWrapper().getNavigationConfiguration(s);const u=et(e,t,n,d);const c=st(e,n);const v=at(n);const f=Ze(e,t,n,d);const p={type:R.Table,annotation:un(e,t,n,l,u,o,a),control:l,actions:Re(f.actions),commandActions:f.commandActions,columns:u,operationAvailableMap:JSON.stringify(c),operationAvailableProperties:ut(c,n),headerInfoTitle:v.headerInfoTitlePath,semanticKeys:v.semanticKeyColumns,headerInfoTypeName:v.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};it(n.getAnnotationEntityType(e),u);nt(p,n.getAnnotationEntityType(e),n,o);return p}F.createTableVisualization=lt;function rt(e,t){const n=Fn(undefined,"",e,false);const o=At({},e.getEntityType(),[],[],e,n.type,[]);const i=st(undefined,e);const a=at(e);const l={type:R.Table,annotation:un(undefined,"",e,n,t?[]:o),control:n,actions:[],columns:o,operationAvailableMap:JSON.stringify(i),operationAvailableProperties:ut(i,e),headerInfoTitle:a.headerInfoTitlePath,semanticKeys:a.semanticKeyColumns,headerInfoTypeName:a.headerInfoTypeName,enable$select:true,enable$$getKeepAliveContext:true};it(e.getEntityType(),o);nt(l,e.getEntityType(),e);return l}F.createDefaultTableVisualization=rt;function st(e,t){return y.getOperationAvailableMap(e,"table",t)}function dt(e){var t,n;const o=U(e);const i=e.getEntitySet();const a=o.isUpdatable;const l=!be(a.expression)&&a.navigationExpression._type==="Unresolvable";const r=i===null||i===void 0?void 0:(t=i.annotations.Capabilities)===null||t===void 0?void 0:(n=t.UpdateRestrictions)===null||n===void 0?void 0:n.Updatable;const s=de(r)&&r.path;return l?s:""}function ut(e,t){const n=new Set;for(const t in e){const o=e[t];if(o===null){n.add(t)}else if(typeof o==="string"){n.add(o)}}if(n.size){var o,i,a,l,r;const e=t.getEntityType();const s=(o=e.annotations)===null||o===void 0?void 0:(i=o.UI)===null||i===void 0?void 0:(a=i.HeaderInfo)===null||a===void 0?void 0:(l=a.Title)===null||l===void 0?void 0:(r=l.Value)===null||r===void 0?void 0:r.path;if(s){n.add(s)}}return Array.from(n).join(",")}function ct(e,t,n,o){const i=[];e.forEach(e=>{var a,l;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"&&e!==null&&e!==void 0&&(a=e.ActionTarget)!==null&&a!==void 0&&a.isBound&&t===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&e.RequiresContext&&(e===null||e===void 0?void 0:(l=e.Inline)===null||l===void 0?void 0:l.valueOf())!==true){var r,s,d;if(typeof((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())==="object"){i.push(Pe(vt(e,n,o),false))}}});return i}function vt(e,t,n){let o;if((e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForAction"||(e===null||e===void 0?void 0:e.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var i,a;o=e===null||e===void 0?void 0:(i=e.annotations)===null||i===void 0?void 0:(a=i.UI)===null||a===void 0?void 0:a.Hidden}else{o=e===null||e===void 0?void 0:e.visible}let l;if(de(o)){l=o.path}else{l=o}if(l){if(e!==null&&e!==void 0&&e.visible){l=l.substring(1,l.length-1)}if(l.indexOf("/")>0){const e=l.split("/");const n=e[0];if(ue(t===null||t===void 0?void 0:t.targetObject)&&t.targetObject.partner===n){return ge(e.slice(1).join("/"))}else{return De(true)}}else if(n){return ge(l)}else{return De(true)}}return De(true)}function ft(e,t,n){return Object.keys(n).some(o=>{if(o===e){var i;if(t!==null&&t!==void 0&&(i=t.ActionTarget)!==null&&i!==void 0&&i.isBound||t!==null&&t!==void 0&&t.RequiresContext){n[e].requiresSelection=true}return true}return false})}function pt(e,t,n){return e.some(e=>{var o,i,a,l,r,s,d;if((e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation")&&(e===null||e===void 0?void 0:(o=e.Inline)===null||o===void 0?void 0:o.valueOf())!==true&&(((i=e.annotations)===null||i===void 0?void 0:(a=i.UI)===null||a===void 0?void 0:(l=a.Hidden)===null||l===void 0?void 0:l.valueOf())===false||((r=e.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.Hidden)===null||d===void 0?void 0:d.valueOf())===undefined)){if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"){var u;const o=fe(["DataFieldForAction",e.Action]);if(ft(o,e,t)){return false}return(e===null||e===void 0?void 0:(u=e.ActionTarget)===null||u===void 0?void 0:u.isBound)&&n===(e===null||e===void 0?void 0:e.ActionTarget.sourceEntityType)}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(ft(`DataFieldForIntentBasedNavigation::${e.SemanticObject}::${e.Action}`,e,t)){return false}return e.RequiresContext}}return false})}function gt(e){return Object.keys(e).some(t=>{var n;const o=e[t];if(o.requiresSelection&&((n=o.visible)===null||n===void 0?void 0:n.toString())==="true"){return true}return false})}function mt(e){const t=[];if(e){Object.keys(e).forEach(n=>{const o=e[n];if(o.requiresSelection===true&&o.visible!==undefined){if(typeof o.visible==="string"){var i;t.push(pe(o===null||o===void 0?void 0:(i=o.visible)===null||i===void 0?void 0:i.valueOf()))}}})}return t}function yt(e){const t=ie(e.getDataModelObjectPath());const n=ne(e.getDataModelObjectPath());return{isDeletable:!(be(t)&&t.value===false),isUpdatable:!(be(n)&&n.value===false)}}F.getCapabilityRestriction=yt;function bt(e,t,n,o,i,a){var l;let r=arguments.length>6&&arguments[6]!==undefined?arguments[6]:De(false);if(!e){return B.None}const s=n.getManifestControlConfiguration(t);let d=(l=s.tableSettings)===null||l===void 0?void 0:l.selectionMode;let u=[],c=[];const v=Be(n.getManifestControlConfiguration(t).actions,n,[],undefined,false);let f,p;if(n.getTemplateType()===H.ObjectPage){f=ie(n.getDataModelObjectPath());p=f?Fe(f,true):f}const g=!be(r)||r.value!==false;if(d&&d===B.None&&a){if(n.getTemplateType()===H.ObjectPage&&g){return Fe(he(Ce(Ve.IsEditable,r),De("Multi"),he(a,De("Multi"),De("None"))))}else if(g){return B.Multi}return Fe(he(a,De("Multi"),De("None")))}if(!d||d===B.Auto){d=B.Multi}if(g){d=d===B.Single?B.Single:B.Multi}if(pt(e,v.actions,n.getEntityType())||gt(v.actions)){return d}u=ct(e,n.getEntityType(),n.getDataModelObjectPath(),o);c=mt(v.actions);if(u.length===0&&c.length===0&&(a||g)){if(!o){if(i.isDeletable||p!=="false"||g){const e=me(a||true,r);return Fe(he(Ce(Ve.IsEditable,e),De(d),De(B.None)))}else{return B.None}}else if(g){return d}else if(i.isDeletable&&a){return Fe(he(a,De(d),De("None")))}else{return B.None}}else if(!o){if(i.isDeletable||p!=="false"||g){const e=he(g&&!i.isDeletable,r,De(true));return Fe(he(Ce(Ve.IsEditable,e),De(d),he(me(...u.concat(c)),De(d),De(B.None))))}else{return Fe(he(me(...u.concat(c)),De(d),De(B.None)))}}else if(i.isDeletable||g){return d}else{return Fe(he(me(...u.concat(c),r),De(d),De(B.None)))}}F.getSelectionMode=bt;function ht(e,t,n){const o=[];const i=[];const a=He(e.filter(e=>ze(e)));const l=n.getEntityType().fullyQualifiedName;if(a){var r,s,d;o.push({type:W.Copy,annotationPath:n.getEntitySetBasedAnnotationPath(a.fullyQualifiedName),key:Ee.generateKeyFromDataField(a),enabled:Fe(Pe(ge("numberOfSelectedContexts","internal"),1)),visible:Fe(ye(Pe(Te((r=a.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:s.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),text:((d=a.Label)===null||d===void 0?void 0:d.toString())??b.getLibraryResourceBundle("sap.fe.core").getText("C_COMMON_COPY"),isNavigable:true})}e.filter(e=>!ze(e)).forEach(e=>{var t,a,r,s,d,u,c,v,f,p,g,m;if(((t=e.annotations)===null||t===void 0?void 0:(a=t.UI)===null||a===void 0?void 0:(r=a.Hidden)===null||r===void 0?void 0:r.valueOf())===true){i.push({type:W.Default,key:Ee.generateKeyFromDataField(e)})}else if(We(e)&&((s=e.Inline)===null||s===void 0?void 0:s.valueOf())!==true&&((d=e.Determining)===null||d===void 0?void 0:d.valueOf())!==true){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":let t=false;if(((u=e.ActionTarget)===null||u===void 0?void 0:(c=u.annotations)===null||c===void 0?void 0:(v=c.Core)===null||v===void 0?void 0:v.OperationAvailable)!==undefined){var y,b,h,T;if(!((y=e.ActionTarget)!==null&&y!==void 0&&y.isBound)){t=true}else if((b=e.ActionTarget)!==null&&b!==void 0&&b.isBound&&((h=e.ActionTarget)===null||h===void 0?void 0:h.sourceType)!==l){t=true}else if((T=e.ActionTarget)!==null&&T!==void 0&&T.parameters[0].isCollection){t=true}}const i={type:W.DataFieldForAction,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Ee.generateKeyFromDataField(e),visible:Fe(ye(Pe(Te((f=e.annotations)===null||f===void 0?void 0:(p=f.UI)===null||p===void 0?void 0:p.Hidden,[],undefined,n.getRelativeModelPathFunction()),true))),isNavigable:true};if(t){i.enabled=Le(n,e.ActionTarget)}o.push(i);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":o.push({type:W.DataFieldForIntentBasedNavigation,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),key:Ee.generateKeyFromDataField(e),visible:Fe(ye(Pe(Te((g=e.annotations)===null||g===void 0?void 0:(m=g.UI)===null||m===void 0?void 0:m.Hidden,[],undefined,n.getRelativeModelPathFunction()),true)))});break;default:break}}});return{tableActions:o,hiddenTableActions:i}}function Tt(e,t,n){let o=Se.None;if(e){if(typeof e==="object"){o=Te(e)}else{o=L(e)}}const i=[];n===null||n===void 0?void 0:n.keys.forEach(e=>{if(e.name!=="IsActiveEntity"){i.push(ge(e.name,undefined))}});return Ie([o,ge(`filteredMessages`,"internal"),t&&ke.HasActive,t&&ke.IsActive,`${t}`,...i],l.rowHighlighting,n)}function It(e,t,n,o,i){var a;const l=(o===null||o===void 0?void 0:o.create)||(o===null||o===void 0?void 0:o.detail);const r=n.getManifestControlConfiguration(i);const s=r&&r.tableSettings||{};if(l!==null&&l!==void 0&&l.outbound&&l.outboundDetail&&o!==null&&o!==void 0&&o.create){return{mode:"External",outbound:l.outbound,outboundDetail:l.outboundDetail,navigationSettings:o}}let d;if(e){var u,c,v;const e=(u=n.getEntitySet())===null||u===void 0?void 0:u.annotations;const o=e===null||e===void 0?void 0:e.Common,i=e===null||e===void 0?void 0:e.Session;d=(o===null||o===void 0?void 0:(c=o.DraftRoot)===null||c===void 0?void 0:c.NewAction)||(i===null||i===void 0?void 0:(v=i.StickySessionSupported)===null||v===void 0?void 0:v.NewAction);if(t.creationMode===K.CreationRow&&d){throw Error(`Creation mode '${K.CreationRow}' can not be used with a custom 'new' action (${d})`)}if(l!==null&&l!==void 0&&l.route){var f;return{mode:t.creationMode,append:t.createAtEnd,newAction:(f=d)===null||f===void 0?void 0:f.toString(),navigateToTarget:t.creationMode===K.NewPage?l.route:undefined}}}if(t.creationMode===K.NewPage){var p;t.creationMode=K.Inline;if(((p=s.creationMode)===null||p===void 0?void 0:p.createAtEnd)===undefined){t.createAtEnd=false}}return{mode:t.creationMode,append:t.createAtEnd,newAction:(a=d)===null||a===void 0?void 0:a.toString()}}const Pt=function(e,t,n,o,i){let a,r;let s=De(Se.None);const u=t.getEntityType();if(n&&e){var v,f;r=((v=n.display)===null||v===void 0?void 0:v.target)||((f=n.detail)===null||f===void 0?void 0:f.outbound);if(r){a=".handlers.onChevronPressNavigateOutBound( $controller ,'"+r+"', ${$parameters>bindingContext})"}else if(u){var p,g,m;const l=t.getEntitySet();r=(p=n.detail)===null||p===void 0?void 0:p.route;s=Tt((g=e.annotations)===null||g===void 0?void 0:(m=g.UI)===null||m===void 0?void 0:m.Criticality,!!d.getDraftRoot(l)||!!d.getDraftNode(l),u);if(r&&c.isEntitySet(l)){a="API.onTableRowPress($event, $controller, ${$parameters>bindingContext}, { callExtension: true, targetPath: '"+o+"', editable : "+(d.getDraftRoot(l)||d.getDraftNode(l)?"!${$parameters>bindingContext}.getProperty('IsActiveEntity')":"undefined")+(i==="AnalyticalTable"||i==="TreeTable"?", bRecreateContext: true":"")+"})"}}}const y=Ie([ge("/deepestPath","internal")],l.navigatedRow,u);return{press:a,action:a?"Navigation":undefined,rowHighlighting:Fe(s),rowNavigated:Fe(y),visible:Fe(ye(Ve.IsInactive))}};const At=function(e,t){let n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];let o=arguments.length>3?arguments[3]:undefined;let i=arguments.length>4?arguments[4]:undefined;let a=arguments.length>5?arguments[5]:undefined;let l=arguments.length>6?arguments[6]:undefined;const r=n;const s=new _(t,i);t.entityProperties.forEach(t=>{const d=n.some(e=>e.name===t.name);if(!t.targetType&&!d){const n=Je(t.name,t,i,true,a);const d=Object.keys(n.properties);const u=Object.keys(n.additionalProperties);if(n.textOnlyPropertiesFromTextAnnotation.length>0){l.push(...n.textOnlyPropertiesFromTextAnnotation)}const c=Dt(t,i.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,true,true,o,s,i,l);const v=i.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[i.getEntityType()])[0];const f=Wt(c.name,v,false,null);if(Object.keys(f).length>0){c.formatOptions={...f}}if(d.length>0){c.propertyInfos=d;c.exportSettings={...c.exportSettings,template:n.exportSettingsTemplate,wrap:n.exportSettingsWrapping};c.exportSettings.type=cn(t.type,d.length>1);if(n.exportUnitName){c.exportSettings.unitProperty=n.exportUnitName;c.exportSettings.type="Currency"}else if(n.exportUnitString){c.exportSettings.unit=n.exportUnitString}if(n.exportTimezoneName){c.exportSettings.timezoneProperty=n.exportTimezoneName;c.exportSettings.utc=false}else if(n.exportTimezoneString){c.exportSettings.timezone=n.exportTimezoneString}if(n.exportDataPointTargetValue){c.exportDataPointTargetValue=n.exportDataPointTargetValue;c.exportSettings.type="String"}d.forEach(t=>{e[t]=n.properties[t]})}if(u.length>0){c.additionalPropertyInfos=u;u.forEach(t=>{e[t]=n.additionalProperties[t]})}r.push(c)}if(te(t)==="Description"){o=o.concat(t.name);r.push(Dt(t,i.getEntitySetBasedAnnotationPath(t.fullyQualifiedName),t.name,false,false,o,s,i,[]))}});const d=Ut(e,r,o,i,t,l);return r.concat(d)};F.getColumnsFromEntityType=At;const Dt=function(e,t,n,o,i,a,l,r,s){var d,u,c,v,f;const p=o?n:`Property::${n}`;const g=(o?"DataField::":"Property::")+ve(n);const m=Qe(r,e);const y=((d=e.annotations)===null||d===void 0?void 0:(u=d.UI)===null||u===void 0?void 0:(c=u.Hidden)===null||c===void 0?void 0:c.valueOf())===true;const b=e.name?kt(e.name,true,false):undefined;const h=b!=e.name;const T=cn(e.type);const I=e.type==="Edm.Date"?"YYYY-MM-DD":undefined;const P=_e(e);const A=Cn(e,P);const D=r.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[r.getEntityType()])[0];const F=s&&s.indexOf(n)>=0;const C=(!y||F)&&a.indexOf(n)===-1;const S={className:e.type||P,formatOptions:A.formatOptions,constraints:A.constraints};let E=null;if(Ft(e)){var O,x,M,U,$,N;const t=Z(e)||J(e);const n=X(e);const o=((O=e.annotations)===null||O===void 0?void 0:(x=O.Measures)===null||x===void 0?void 0:x.ISOCurrency)||((M=e.annotations)===null||M===void 0?void 0:(U=M.Measures)===null||U===void 0?void 0:U.Unit);const i=($=e.annotations)===null||$===void 0?void 0:(N=$.Common)===null||N===void 0?void 0:N.Timezone;E={type:T,inputFormat:I,scale:e.scale,delimiter:e.type==="Edm.Int64"};if(t){E.unitProperty=t.name;E.type="Currency"}else if(o){E.unit=`${o}`}if(n){E.timezoneProperty=n.name;E.utc=false}else if(i){E.timezone=i.toString()}}const w=Dn(n,r);const V={key:g,type:Xe.Annotation,label:Ot(e,h),groupLabel:h?Ot(e):undefined,group:h?b:undefined,annotationPath:t,semanticObjectPath:m,availability:!i||y?"Hidden":"Adaptation",name:p,relativePath:n,sortable:C,isGroupable:l.isAnalyticsSupported()?!!l.isPropertyGroupable(e):C,isKey:e.isKey,exportSettings:E,caseSensitive:jt(r),typeConfig:S,importance:Yt((v=e.annotations)===null||v===void 0?void 0:(f=v.UI)===null||f===void 0?void 0:f.DataFieldDefault,D),additionalLabels:w};const k=xt(e);if(k){V.tooltip=k}const L=qe(e);if(Ge(e)&&typeof L==="string"&&V.exportSettings){V.exportDataPointTargetValue=L;V.exportSettings.template="{0}/"+L}return V};function Ft(e){var t;let n,o;const i=(t=e.annotations.UI)===null||t===void 0?void 0:t.DataFieldDefault;if(se(e)&&i!==null&&i!==void 0&&i.$Type){if(Q(i)===true){return false}n=i===null||i===void 0?void 0:i.$Type}else if(Q(e)===true){return false}else{var a,l,r,s,d,u,c,v,f,p,g;o=e;n=o.$Type;if(n==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(a=o.Target)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&l.$Type){var m,y;n=(m=o.Target)===null||m===void 0?void 0:(y=m.$target)===null||y===void 0?void 0:y.$Type;return"com.sap.vocabularies.UI.v1.ChartDefinitionType".indexOf(n)===-1}else if(((r=o.Value)===null||r===void 0?void 0:(s=r.$target)===null||s===void 0?void 0:(d=s.annotations)===null||d===void 0?void 0:(u=d.Core)===null||u===void 0?void 0:(c=u.MediaType)===null||c===void 0?void 0:c.term)==="Org.OData.Core.V1.MediaType"&&((v=o.Value)===null||v===void 0?void 0:(f=v.$target)===null||f===void 0?void 0:(p=f.annotations)===null||p===void 0?void 0:(g=p.Core)===null||g===void 0?void 0:g.isURL)!==true){return false}}return n?["com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldForActionGroup"].indexOf(n)===-1:true}const Ct=function(e){switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":return!!e.Inline;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":return true;default:}};const St=function(e){var t,n,o,i,a,l;const r=e.targetObject;let s;if(r){switch(r.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":case"com.sap.vocabularies.UI.v1.DataPointType":s=r.Value.$target;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if((r===null||r===void 0?void 0:(t=r.Target)===null||t===void 0?void 0:(n=t.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var d;s=(d=r.Target.$target)===null||d===void 0?void 0:d.Value.$target}break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForAction":default:s=undefined}}const u=De(false);const c=De(false);return Ce(...[ye(Pe(Te(r===null||r===void 0?void 0:(o=r.annotations)===null||o===void 0?void 0:(i=o.UI)===null||i===void 0?void 0:i.Hidden),true)),he(!!s,s&&ye(Pe(Te((a=s.annotations)===null||a===void 0?void 0:(l=a.UI)===null||l===void 0?void 0:l.Hidden),true)),true),me(ye(u),c)])};F._getVisibleExpression=St;const Et=function(e){var t,n;const o=[];if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((t=e.Target)===null||t===void 0?void 0:(n=t.$target)===null||n===void 0?void 0:n.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var i,a;if(e!==null&&e!==void 0&&(i=e.annotations)!==null&&i!==void 0&&(a=i.UI)!==null&&a!==void 0&&a.Hidden){return Fe(ye(Pe(Te(e.annotations.UI.Hidden),true)))}else{var l;(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{o.push(St({targetObject:e}))});return Fe(he(me(...o),De(true),De(false)))}}else{return undefined}};const Ot=function(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!e){return undefined}if(se(e)||ue(e)){var n,o,i,a,l;const t=(n=e.annotations)===null||n===void 0?void 0:(o=n.UI)===null||o===void 0?void 0:o.DataFieldDefault;if(t&&!t.qualifier&&(i=t.Label)!==null&&i!==void 0&&i.valueOf()){var r;return Fe(Te((r=t.Label)===null||r===void 0?void 0:r.valueOf()))}return Fe(Te(((a=e.annotations.Common)===null||a===void 0?void 0:(l=a.Label)===null||l===void 0?void 0:l.valueOf())||e.name))}else if(Ke(e)){var s,d,u,c,v,f,p,g;if(!!t&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"){var m;return Fe(Te((m=e.Label)===null||m===void 0?void 0:m.valueOf()))}return Fe(Te(((s=e.Label)===null||s===void 0?void 0:s.valueOf())||((d=e.Value)===null||d===void 0?void 0:(u=d.$target)===null||u===void 0?void 0:(c=u.annotations)===null||c===void 0?void 0:(v=c.Common)===null||v===void 0?void 0:(f=v.Label)===null||f===void 0?void 0:f.valueOf())||((p=e.Value)===null||p===void 0?void 0:(g=p.$target)===null||g===void 0?void 0:g.name)))}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var y,b,h,T,I,P,A,D;return Fe(Te(((y=e.Label)===null||y===void 0?void 0:y.valueOf())||((b=e.Target)===null||b===void 0?void 0:(h=b.$target)===null||h===void 0?void 0:(T=h.Value)===null||T===void 0?void 0:(I=T.$target)===null||I===void 0?void 0:(P=I.annotations)===null||P===void 0?void 0:(A=P.Common)===null||A===void 0?void 0:(D=A.Label)===null||D===void 0?void 0:D.valueOf())))}else{var F;return Fe(Te((F=e.Label)===null||F===void 0?void 0:F.valueOf()))}};const xt=function(e){var t,n;if(!e){return undefined}if(se(e)||(t=e.annotations)!==null&&t!==void 0&&(n=t.Common)!==null&&n!==void 0&&n.QuickInfo){var o,i;return(o=e.annotations)!==null&&o!==void 0&&(i=o.Common)!==null&&i!==void 0&&i.QuickInfo?Fe(Te(e.annotations.Common.QuickInfo.valueOf())):undefined}else if(Ke(e)){var a,l,r,s;return(a=e.Value)!==null&&a!==void 0&&(l=a.$target)!==null&&l!==void 0&&(r=l.annotations)!==null&&r!==void 0&&(s=r.Common)!==null&&s!==void 0&&s.QuickInfo?Fe(Te(e.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var d,u,c,v,f;const t=(d=e.Target)===null||d===void 0?void 0:d.$target;return t!==null&&t!==void 0&&(u=t.Value)!==null&&u!==void 0&&(c=u.$target)!==null&&c!==void 0&&(v=c.annotations)!==null&&v!==void 0&&(f=v.Common)!==null&&f!==void 0&&f.QuickInfo?Fe(Te(t.Value.$target.annotations.Common.QuickInfo.valueOf())):undefined}else{return undefined}};function Mt(e,t){return Ie([ge(`semanticKeyHasDraftIndicator`,"internal"),ge(`filteredMessages`,"internal"),e,t],l.getErrorStatusTextVisibilityFormatter)}F.getRowStatusVisibility=Mt;const Ut=function(e,t,n,o,i,a){const l=[];const r={};const s=new _(i,o);Object.keys(e).forEach(i=>{const d=e[i],u=o.getAbsoluteAnnotationPath(i),c=t.find(e=>e.name===i);if(c===undefined){const e=Dt(d,u,i,true,false,n,s,o,a);e.isPartOfLineItem=t.some(e=>{var t;return((t=e.propertyInfos)===null||t===void 0?void 0:t.includes(i))&&e.isPartOfLineItem});l.push(e)}else if(c.annotationPath!==u||c.propertyInfos){const e=`Property::${i}`;if(!t.some(t=>t.name===e)){const t=Dt(d,u,i,false,false,n,s,o,a);t.isPartOfLineItem=c.isPartOfLineItem;l.push(t);r[i]=e}else if(t.some(t=>t.name===e)&&t.some(e=>{var t;return(t=e.propertyInfos)===null||t===void 0?void 0:t.includes(i)})){r[i]=e}}});t.forEach(e=>{var t,n;e.propertyInfos=(t=e.propertyInfos)===null||t===void 0?void 0:t.map(e=>r[e]??e);e.additionalPropertyInfos=(n=e.additionalPropertyInfos)===null||n===void 0?void 0:n.map(e=>r[e]??e)});return l};const $t=function(e){var t,n,o;if(Ke(e)){var i;return(i=e.Value)===null||i===void 0?void 0:i.path}else if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&(t=e.Target)!==null&&t!==void 0&&(n=t.$target)!==null&&n!==void 0&&(o=n.Value)!==null&&o!==void 0&&o.path){var a,l;return(a=e.Target)===null||a===void 0?void 0:(l=a.$target)===null||l===void 0?void 0:l.Value.path}else{return Ee.generateKeyFromDataField(e)}};const Nt=function(e,t,n){const o=`Property_Technical::${e}`;const i=t.find(e=>e.key===o);const a=!i&&t.find(t=>t.name===e&&!t.propertyInfos);if(a){const i={key:o,type:Xe.Annotation,label:a.label,annotationPath:a.annotationPath,availability:"Hidden",name:o,relativePath:a.relativePath,sortable:false,isGroupable:false,isKey:false,exportSettings:null,caseSensitive:false,aggregatable:false,extension:{technicallyGroupable:true,technicallyAggregatable:true}};t.push(i);n[e]=i.name}};const wt=function(e,t,n){var o;const i=(o=n.getManifestControlConfiguration(t))===null||o===void 0?void 0:o.columns;const a=i&&Object.keys(i);return a&&!!a.find(function(t){return t===e&&i[t].showDataFieldsLabel})};const Vt=function(e){var t,n;let o="";switch(e.$Type){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":o=e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":o=e===null||e===void 0?void 0:(n=e.Target)===null||n===void 0?void 0:n.value;break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldForActionGroup":case"com.sap.vocabularies.UI.v1.DataFieldWithActionGroup":o=Ee.generateKeyFromDataField(e);break}return o};const kt=function(e,t,n){const o=t?e.lastIndexOf("/"):e.indexOf("/");if(o===-1){return e}return n?e.substring(o+1,e.length):e.substring(0,o)};const Lt=function(e,t){if(Ke(e)&&de(e.Value)){const n=le(t.getDataModelObjectPath(),e.Value.path);return Y(n)}else{return false}};const Rt=function(e,t,n){return n.indexOf(t)===-1&&(e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithAction")};const jt=function(e){const t=Ht(e);return Array.isArray(t)?t.indexOf("tolower")===-1:true};F.isFilteringCaseSensitive=jt;function Ht(e){const t=e.getEntitySet();if(c.isEntitySet(t)){var n,o;return((n=t.annotations.Capabilities)===null||n===void 0?void 0:n.FilterFunctions)??((o=e.getEntityContainer().annotations.Capabilities)===null||o===void 0?void 0:o.FilterFunctions)}return undefined}function Bt(e){return e===undefined?undefined:{textLinesEdit:4,...e}}function zt(e,t){const n=[];let o=false;for(let i=0;i<e.length;i++){n.push(e[i].value);if(e[i].value===t){o=true}}return{values:n,semanticKeyFound:o}}function Gt(e,t){let n=false;let o;if(e&&e.length>=1&&t&&t.length>=1){for(let i=0;i<e.length;i++){if([e[i]].some(e=>t.indexOf(e)>=0)){n=true;o=e[i];break}}}return{semanticKeyHasPropertyInFieldGroup:n,fieldGroupPropertyPath:o}}function Kt(e,t){var n,o;const i=[];let a={semanticKeyHasPropertyInFieldGroup:false,fieldGroupPropertyPath:undefined};if(e&&e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((n=e.Target)===null||n===void 0?void 0:(o=n.$target)===null||o===void 0?void 0:o.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){var l;(l=e.Target.$target.Data)===null||l===void 0?void 0:l.forEach(e=>{if((e.$Type==="com.sap.vocabularies.UI.v1.DataField"||e.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")&&e.Value){i.push(e.Value.path)}a=Gt(t,i)})}return{semanticKeyHasPropertyInFieldGroup:a.semanticKeyHasPropertyInFieldGroup,propertyPath:a.fieldGroupPropertyPath}}function Wt(e,t,n,o){if(!t){return{}}const i=zt(t,e);const a=Kt(o,i.values);if(i.semanticKeyFound){const t={hasDraftIndicator:true,semantickeys:i.values,showErrorObjectStatus:Fe(Mt(e,false))};if(n&&a.semanticKeyHasPropertyInFieldGroup){t.showErrorObjectStatus=Fe(Mt(e,true));t.fieldGroupDraftIndicatorPropertyPath=a.propertyPath}return t}else if(!a.semanticKeyHasPropertyInFieldGroup){return{}}else{return{fieldGroupDraftIndicatorPropertyPath:a.propertyPath,fieldGroupName:e,showErrorObjectStatus:Fe(Mt(e,true))}}}function qt(e){var t,n;const o=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;if(o&&o.includes("UI.ImportanceType/High")){return 3}if(o&&o.includes("UI.ImportanceType/Medium")){return 2}if(o&&o.includes("UI.ImportanceType/Low")){return 1}return 0}function Qt(e){var t,n;const o=e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance;return o?o.split("/")[1]:z.None}function _t(e){if(e&&e.length>0){let t=-1;let n=-1;let o;for(const i of e){n=qt(i);if(n>t){t=n;o=i}}return Qt(o)}return z.None}function Yt(e,t){var n;let o,i=[];if(t&&t.length>0){i=t.map(function(e){return e.value})}if(!e){return undefined}if(ce(e,"com.sap.vocabularies.UI.v1.DataFieldForAnnotation")){const t=e.Target.$target;if(ce(t,"com.sap.vocabularies.UI.v1.FieldGroupType")){const n=t.Data;const r=n&&n.some(function(e){var t,n;return(e===null||e===void 0?void 0:(t=e.Value)===null||t===void 0?void 0:t.path)&&e.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.includes(e===null||e===void 0?void 0:(n=e.Value)===null||n===void 0?void 0:n.path)});if(r){return z.High}else{var a,l;if(e!==null&&e!==void 0&&(a=e.annotations)!==null&&a!==void 0&&(l=a.UI)!==null&&l!==void 0&&l.Importance){return Qt(e)}o=n&&n.filter(function(e){var t,n;return e===null||e===void 0?void 0:(t=e.annotations)===null||t===void 0?void 0:(n=t.UI)===null||n===void 0?void 0:n.Importance});return _t(o)}}}return e.Value&&e!==null&&e!==void 0&&(n=e.Value)!==null&&n!==void 0&&n.path&&i.includes(e.Value.path)?z.High:Qt(e)}F.getImportance=Yt;const Jt=function(e,t,n){var o;const i=n.getAnnotationEntityType(e),a=[],l={},r=ee(n.getEntitySet()),s=n.getManifestControlConfiguration(t),d=(s===null||s===void 0?void 0:(o=s.tableSettings)===null||o===void 0?void 0:o.type)||"ResponsiveTable";const u=[];const c=n.getAnnotationsByTerm("Common","com.sap.vocabularies.Common.v1.SemanticKey",[n.getEntityType()])[0];if(e){const o=n.getConverterContextFor(ae(n.getDataModelObjectPath()));e.forEach(e=>{var i,s,v,f,p,g,m,y,b,h,T;if(!Ct(e)){return}let I=null;const P=Ke(e)&&(i=e.Value)!==null&&i!==void 0&&(s=i.$target)!==null&&s!==void 0&&s.fullyQualifiedName?Qe(n,e):undefined;const A=Vt(e);const D=Ye(e,n,d);const F=Object.keys(D.properties);const C=Object.keys(D.additionalProperties);const S=kt(A,true,false);const E=S!=A;const O=Ot(e,E);const x=$t(e);const M=S.indexOf(`@${"com.sap.vocabularies.UI.v1.FieldGroup"}`)>-1;const U=M?wt(x,t,n):false;const $=_e(e);const N=$==="Edm.Date"?"YYYY-MM-DD":undefined;const w=Bt(Wt(x,c,M,e));let V;if(e.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&((v=e.Target)===null||v===void 0?void 0:(f=v.$target)===null||f===void 0?void 0:f.$Type)==="com.sap.vocabularies.UI.v1.FieldGroupType"){V=Et(e)}if(Ft(e)){I={template:D.exportSettingsTemplate,wrap:D.exportSettingsWrapping,type:$?cn($,F.length>1):undefined,inputFormat:N,delimiter:$==="Edm.Int64"};if(D.exportUnitName){I.unitProperty=D.exportUnitName;I.type="Currency"}else if(D.exportUnitString){I.unit=D.exportUnitString}if(D.exportTimezoneName){I.timezoneProperty=D.exportTimezoneName}else if(D.exportTimezoneString){I.timezone=D.exportTimezoneString}}let k;if($){k=Cn(e,$)}const L={className:$,formatOptions:{...w,...(p=k)===null||p===void 0?void 0:p.formatOptions},constraints:{...(g=k)===null||g===void 0?void 0:g.constraints}};const R={};if(!$||!L){R.widthCalculation=null}const j=Lt(e,o);const H=!j&&Rt(e,A,r);const B={key:Ee.generateKeyFromDataField(e),type:Xe.Annotation,label:O,groupLabel:E?Ot(e):undefined,group:E?S:undefined,FieldGroupHiddenExpressions:V,annotationPath:n.getEntitySetBasedAnnotationPath(e.fullyQualifiedName),semanticObjectPath:P,availability:Q(e)?"Hidden":"Default",name:x,showDataFieldsLabel:U,relativePath:A,sortable:H,propertyInfos:F.length?F:undefined,additionalPropertyInfos:C.length>0?C:undefined,exportSettings:I,width:((m=e.annotations)===null||m===void 0?void 0:(y=m.HTML5)===null||y===void 0?void 0:(b=y.CssDefaults)===null||b===void 0?void 0:(h=b.width)===null||h===void 0?void 0:h.valueOf())||undefined,importance:Yt(e,c),isNavigable:true,formatOptions:w,caseSensitive:jt(n),typeConfig:L,visualSettings:R,timezoneText:(T=I)===null||T===void 0?void 0:T.timezone,isPartOfLineItem:true};const z=xt(e);if(z){B.tooltip=z}if(D.textOnlyPropertiesFromTextAnnotation.length>0){u.push(...D.textOnlyPropertiesFromTextAnnotation)}if(D.exportDataPointTargetValue&&B.exportSettings){B.exportDataPointTargetValue=D.exportDataPointTargetValue;B.exportSettings.type="String"}a.push(B);F.forEach(e=>{l[e]=D.properties[e];if(j){r.push(e)}});C.forEach(e=>{l[e]=D.additionalProperties[e]})})}return At(l,i,a,r,n,d,u)};const Xt=function(e,t,n,o){let i;if(e){i=e.map(function(e){const i=t.find(function(t){return t.relativePath===e&&t.propertyInfos===undefined});if(i){return i.name}else{const i=Ut({[e]:o.resolvePath(e)},t,[],n,o,[]);t.push(i[0]);return i[0].name}})}return i};const Zt=function(e){return e.map(t=>`{${e.indexOf(t)}}`).join(`${"\n"}`)};const en=function(e,t,n,o,i){const a={};function l(e,n){return t.some(e=>e.key===n)}function r(e){return e.type===Xe.Slot}function s(e){return e.type===undefined&&!!e.template}function d(e,t){const o=ee(n.getEntitySet());e.forEach(e=>{t.forEach(t=>{if(t.name===e){t.sortable=o.indexOf(e.replace("Property::",""))===-1;t.isGroupable=t.sortable}})})}for(const v in e){var u;const f=e[v];Ee.validateKey(v);const p={key:v,width:f.width||undefined,position:{anchor:(u=f.position)===null||u===void 0?void 0:u.anchor,placement:f.position===undefined?$e.After:f.position.placement},caseSensitive:jt(n)};if(l(f,v)){const e={...p,importance:f===null||f===void 0?void 0:f.importance,horizontalAlign:f===null||f===void 0?void 0:f.horizontalAlign,availability:f===null||f===void 0?void 0:f.availability,type:Xe.Annotation,isNavigable:l(f,v)?undefined:je(f,i,true),settings:f.settings,formatOptions:Bt(f.formatOptions)};a[v]=e}else{const e=Xt(f.properties,t,n,o);const i={...p,header:f.header,importance:(f===null||f===void 0?void 0:f.importance)||z.None,horizontalAlign:(f===null||f===void 0?void 0:f.horizontalAlign)||G.Begin,availability:(f===null||f===void 0?void 0:f.availability)||"Default",template:f.template,propertyInfos:e,exportSettings:e?{template:Zt(e),wrap:!!(e.length>1)}:null,id:`CustomColumn::${v}`,name:`CustomColumn::${v}`,formatOptions:{textLinesEdit:4},isGroupable:false,isNavigable:false,sortable:false,visualSettings:{widthCalculation:null},properties:f.properties};if(e){d(e,t)}if(r(f)){const e={...i,type:Xe.Slot};a[v]=e}else if(s(f)){const e={...i,type:Xe.Default};a[v]=e}else{var c;const e=`The annotation column '${v}' referenced in the manifest is not found`;n.getDiagnostics().addIssue(Ue.Manifest,xe.Low,e,Me,Me===null||Me===void 0?void 0:(c=Me.AnnotationColumns)===null||c===void 0?void 0:c.InvalidKey)}}}return a};function tn(e,t,n){var o;const i=t.getManifestWrapper();const a=t.getManifestControlConfiguration(e);const l=i.getVariantManagement();const r=[];const s=n.type==="AnalyticalTable";const d=n.type==="ResponsiveTable";if((a===null||a===void 0?void 0:(o=a.tableSettings)===null||o===void 0?void 0:o.personalization)!==undefined){const e=a.tableSettings.personalization;if(e===true){switch(n.type){case"AnalyticalTable":return"Sort,Column,Filter,Group,Aggregate";case"ResponsiveTable":return"Sort,Column,Filter,Group";default:return"Sort,Column,Filter"}}else if(typeof e==="object"){if(e.sort){r.push("Sort")}if(e.column){r.push("Column")}if(e.filter){r.push("Filter")}if(e.group&&(s||d)){r.push("Group")}if(e.aggregate&&s){r.push("Aggregate")}return r.length>0?r.join(","):undefined}}else{r.push("Sort");r.push("Column");if(t.getTemplateType()===H.ListReport){if(l===j.Control||nn(i,t)){r.push("Filter")}}else{r.push("Filter")}if(s){r.push("Group");r.push("Aggregate")}if(d){r.push("Group")}return r.join(",")}return undefined}F.getP13nMode=tn;function nn(e,t){return e.isFilterBarHidden()&&!t.getManifestWrapper().hasMultipleVisualizations()&&t.getTemplateType()!==H.AnalyticalListPage}function on(e,t,n){const o=ee(e.getEntitySet());let i;if(t!==null&&t!==void 0&&t.SortOrder){const e=[];const a={sorters:e};t.SortOrder.forEach(e=>{var t;const i=e.Property;if(i&&o.indexOf((t=i.$target)===null||t===void 0?void 0:t.name)===-1){const t=ln([i],n)[0];if(t){a.sorters.push({name:t,descending:!!e.Descending})}}});i=a.sorters.length?JSON.stringify(a):undefined}return i}function an(e){var t;if(!e){return undefined}const n=(t=e.InitialExpansionLevel)===null||t===void 0?void 0:t.valueOf();return typeof n==="number"?n:undefined}function ln(e,t){const n=[];let o,i;e.forEach(e=>{if(e!==null&&e!==void 0&&e.value){o=t.find(t=>{i=t;return!i.propertyInfos&&i.relativePath===(e===null||e===void 0?void 0:e.value)});if(o){n.push(o.name)}}});return n}function rn(e,t,n){let o;if(e!==null&&e!==void 0&&e.GroupBy){let i=e.GroupBy;if(n==="ResponsiveTable"){i=i.slice(0,1)}const a=ln(i,t).map(e=>({name:e}));o=a.length?JSON.stringify({groupLevels:a}):undefined}return o}function sn(e){const t={};e.columns.forEach(n=>{var o;n=n;const i=Object.keys(e.aggregates).find(e=>e===n.name);if(i){const t=e.aggregates[i];n.aggregatable=true;n.extension={customAggregate:t.defaultAggregate??{}}}if((o=n.additionalPropertyInfos)!==null&&o!==void 0&&o.length){n.additionalPropertyInfos.forEach(n=>{Nt(n,e.columns,t)})}});e.columns.forEach(e=>{e=e;if(e.additionalPropertyInfos){var n;e.additionalPropertyInfos=e.additionalPropertyInfos.map(e=>t[e]??e);e.propertyInfos=(n=e.propertyInfos)===null||n===void 0?void 0:n.concat(e.additionalPropertyInfos)}})}function dn(e,t){let n;if(e!==null&&e!==void 0&&e.Total){const o=e.Total;const i={};ln(o,t).forEach(e=>{i[e]={}});n=JSON.stringify(i)}return n}function un(e,t,n,o,i,a,l){var r,s,d;const{navigationPropertyPath:u}=vn(t);const c=(r=n.getDataModelObjectPath().targetEntityType.annotations)===null||r===void 0?void 0:(s=r.UI)===null||s===void 0?void 0:(d=s.HeaderInfo)===null||d===void 0?void 0:d.TypeNamePlural;const v=c&&Fe(Te(c));const f=n.getDataModelObjectPath().targetEntitySet;const p=n.getManifestWrapper();const g=u.length===0,m=tn(t,n,o),y=u?q(t):q(n.getContextPath(),"LineItem");const b=yt(n);const h=ot(n,u);const T=p.getNavigationConfiguration(h);const I=It(e,o,n,T,t);const P=k(n,I.mode,o,l);const A=w(n,P);const D=$(n,P);const F=N(P,S(n));const U=bt(e,t,n,g,b,A,D);let L=u?10:30;if(a!==null&&a!==void 0&&a.MaxItems){L=a.MaxItems.valueOf()}const R=p.getVariantManagement();const B=oe(n.getDataModelObjectPath());const z={create:M(n,P),delete:x(n,P),paste:E(n,P,F),massEdit:O(n,P),creationRow:V(n,P)};return{id:y,entityName:f?f.name:"",collection:ae(n.getDataModelObjectPath()),navigationPath:u,row:Pt(e,n,T,h,o.type),p13nMode:m,standardActions:{actions:z,isInsertUpdateTemplated:F,updatablePropertyPath:dt(n)},displayMode:C(n,l),create:I,selectionMode:U,autoBindOnInit:nn(p,n)||n.getTemplateType()!==H.ListReport&&n.getTemplateType()!==H.AnalyticalListPage&&!(l&&p.hasMultipleVisualizations(l)),variantManagement:R==="Control"&&!m?j.None:R,threshold:L,sortConditions:on(n,a,i),title:v,searchable:o.type!=="AnalyticalTable"&&!(be(B)&&B.value===false),initialExpansionLevel:an(a)}}F.getTableAnnotationConfiguration=un;function cn(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;let n="String";if(t){if(e==="Edm.DateTimeOffset"){n="DateTime"}return n}else{switch(e){case"Edm.Decimal":case"Edm.Int32":case"Edm.Int64":case"Edm.Double":case"Edm.Byte":n="Number";break;case"Edm.DateOfTime":case"Edm.Date":n="Date";break;case"Edm.DateTimeOffset":n="DateTime";break;case"Edm.TimeOfDay":n="Time";break;case"Edm.Boolean":n="Boolean";break;default:n="String"}}return n}function vn(e){const[t,n]=e.split("@");let o=t;if(o.lastIndexOf("/")===o.length-1){o=o.substr(0,o.length-1)}return{navigationPropertyPath:o,annotationPath:n}}F.splitPath=vn;function fn(e,t){const n=t.getEntityTypeAnnotation(e);const o=n.annotation;if(o){var i,a;const e=[];(i=o.SelectOptions)===null||i===void 0?void 0:i.forEach(t=>{const n=t.PropertyName;const o=(n===null||n===void 0?void 0:n.value)??"";if(e.indexOf(o)===-1){e.push(o)}});return{text:o===null||o===void 0?void 0:(a=o.Text)===null||a===void 0?void 0:a.toString(),propertyNames:e}}return undefined}F.getSelectionVariantConfiguration=fn;function pn(e,t,n){let o=e.enableFullScreen??n;if(!n&&o&&t.getTemplateType()===H.ListReport){o=false;t.getDiagnostics().addIssue(Ue.Manifest,xe.Low,Oe.FULLSCREENMODE_NOT_ON_LISTREPORT)}return o}function gn(e,t,n){let o;if(t!=="ResponsiveTable"){return undefined}switch(n.getTemplateType()){case H.ListReport:case H.AnalyticalListPage:o=!e.selectAll?"ClearAll":"Default";break;case H.ObjectPage:o=e.selectAll===false?"ClearAll":"Default";if(n.getManifestWrapper().useIconTabBar()){o=!e.selectAll?"ClearAll":"Default"}break;default:}return o}function mn(e,t,n){let o=(e===null||e===void 0?void 0:e.type)||"ResponsiveTable";if((o==="AnalyticalTable"||o==="TreeTable")&&!n.getManifestWrapper().isDesktop()){o="ResponsiveTable"}return o}function yn(e,t,n){if(e==="GridTable"){if(n){return{rowCountMode:"Auto",rowCount:3}}else{return{rowCountMode:t.rowCountMode??"Fixed",rowCount:t.rowCount?t.rowCount:5}}}else{return{}}}function bn(e,t){return t.condensedTableLayout!==undefined&&e!=="ResponsiveTable"?t.condensedTableLayout:false}function hn(e){return e.selectAll===true||e.selectionLimit===0?0:e.selectionLimit||200}function Tn(e){var t,n;return(t=e.creationMode)!==null&&t!==void 0&&t.inlineCreationRowCount?(n=e.creationMode)===null||n===void 0?void 0:n.inlineCreationRowCount:2}function In(e,t,n,o,i){var a;if(n){t.push({annotationPath:o.annotationPath})}return{quickFilters:{enabled:i.getTemplateType()!==H.ListReport,showCounts:e===null||e===void 0?void 0:(a=e.quickVariantSelection)===null||a===void 0?void 0:a.showCounts,paths:t}}}function Pn(e,t,n){return e.enableExport!==undefined?e.enableExport:t.getTemplateType()!=="ObjectPage"||n}function An(e,t,n){var o,i,a;if(!t){return{}}const l=[];const r=n.getAnnotationEntityType(t);let s;let d;e===null||e===void 0?void 0:(o=e.quickVariantSelection)===null||o===void 0?void 0:(i=o.paths)===null||i===void 0?void 0:i.forEach(t=>{s=r.resolvePath(t.annotationPath);d=In(e,l,s,t,n)});let u=false;u=!!((a=e.quickVariantSelection)!==null&&a!==void 0&&a.hideTableTitle);return{filters:d,headerVisible:!(s&&u)}}function Dn(e,t){const n=le(t.getDataModelObjectPath(),e).navigationProperties;if((n===null||n===void 0?void 0:n.length)>0){const e=[];n.forEach(t=>{e.push(Ot(t)||t.name)});return e}}function Fn(e,t,n){var o,i,a,l,r,s,d,u;let c=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;const v=n.getManifestWrapper();const f=n.getManifestControlConfiguration(t);const p=f&&f.tableSettings||{};const g=((o=p.creationMode)===null||o===void 0?void 0:o.name)||K.NewPage;const m=!v.isPhone();const y=p.enablePaste!==undefined?p.enablePaste:n.getTemplateType()==="ObjectPage";const b=n.getTemplateType();const h=b===H.ListReport?"API.dataStateIndicatorFilter":undefined;const T=c&&v.isCondensedLayoutCompliant();const I=An(p,e,n);const P=(i=p.creationMode)===null||i===void 0?void 0:i.customValidationFunction;const A=n.getEntityType();const D=new _(A,n);const F=mn(p,D,n);const C=yn(F,p,b===H.ListReport);const S=bn(F,p);const E={createAtEnd:((a=p.creationMode)===null||a===void 0?void 0:a.createAtEnd)!==undefined?(l=p.creationMode)===null||l===void 0?void 0:l.createAtEnd:g!==K.Inline,creationMode:g,customValidationFunction:P,dataStateIndicatorFilter:h,disableAddRowButtonForEmptyData:!P?!!((r=p.creationMode)!==null&&r!==void 0&&r.disableAddRowButtonForEmptyData):false,enableAutoColumnWidth:m,enableExport:Pn(p,n,y),enableFullScreen:pn(p,n,v.isPhone()),enableMassEdit:p===null||p===void 0?void 0:p.enableMassEdit,enablePaste:y,headerVisible:true,multiSelectMode:gn(p,F,n),selectionLimit:hn(p),inlineCreationRowCount:Tn(p),inlineCreationRowsHiddenInEditMode:(p===null||p===void 0?void 0:(s=p.creationMode)===null||s===void 0?void 0:s.inlineCreationRowsHiddenInEditMode)??false,showRowCount:!(p!==null&&p!==void 0&&(d=p.quickVariantSelection)!==null&&d!==void 0&&d.showCounts)&&!((u=v.getViewConfiguration())!==null&&u!==void 0&&u.showCounts),type:F,useCondensedTableLayout:S&&T,isCompactType:v.isCompactType()};const O={...E,...C,...I};if(F==="TreeTable"){O.hierarchyQualifier=p.hierarchyQualifier}return O}F.getTableManifestConfiguration=Fn;function Cn(e,t){var n,o,i,a,l;let r;if(se(e)){r=re(e.targetType)?Ae[e.targetType.underlyingType]:Ae[e.type]}if(r===undefined&&t!==undefined){r=Ae[t]}const s={type:(n=r)===null||n===void 0?void 0:n.type,constraints:{},formatOptions:{}};if(se(e)&&r!==undefined){var d,u,c,v,f,p,g,m,y,b,h,T,I,P,A,D,F;s.constraints={scale:(d=r.constraints)!==null&&d!==void 0&&d.$Scale?e.scale:undefined,precision:(u=r.constraints)!==null&&u!==void 0&&u.$Precision?e.precision:undefined,maxLength:(c=r.constraints)!==null&&c!==void 0&&c.$MaxLength?e.maxLength:undefined,nullable:(v=r.constraints)!==null&&v!==void 0&&v.$Nullable?e.nullable:undefined,minimum:(f=r.constraints)!==null&&f!==void 0&&f["@Org.OData.Validation.V1.Minimum/$Decimal"]&&!isNaN((p=e.annotations)===null||p===void 0?void 0:(g=p.Validation)===null||g===void 0?void 0:g.Minimum)?`${(m=e.annotations)===null||m===void 0?void 0:(y=m.Validation)===null||y===void 0?void 0:y.Minimum}`:undefined,maximum:(b=r.constraints)!==null&&b!==void 0&&b["@Org.OData.Validation.V1.Maximum/$Decimal"]&&!isNaN((h=e.annotations)===null||h===void 0?void 0:(T=h.Validation)===null||T===void 0?void 0:T.Maximum)?`${(I=e.annotations)===null||I===void 0?void 0:(P=I.Validation)===null||P===void 0?void 0:P.Maximum}`:undefined,isDigitSequence:s.type==="sap.ui.model.odata.type.String"&&(A=r.constraints)!==null&&A!==void 0&&A[`@${"com.sap.vocabularies.Common.v1.IsDigitSequence"}`]&&(D=e.annotations)!==null&&D!==void 0&&(F=D.Common)!==null&&F!==void 0&&F.IsDigitSequence?true:undefined}}s.formatOptions={parseAsString:(s===null||s===void 0?void 0:(o=s.type)===null||o===void 0?void 0:o.indexOf("sap.ui.model.odata.type.Int"))===0||(s===null||s===void 0?void 0:(i=s.type)===null||i===void 0?void 0:i.indexOf("sap.ui.model.odata.type.Double"))===0?false:undefined,emptyString:(s===null||s===void 0?void 0:(a=s.type)===null||a===void 0?void 0:a.indexOf("sap.ui.model.odata.type.Int"))===0||(s===null||s===void 0?void 0:(l=s.type)===null||l===void 0?void 0:l.indexOf("sap.ui.model.odata.type.Double"))===0?"":undefined,parseKeepsEmptyString:s.type==="sap.ui.model.odata.type.String"?true:undefined};return s}F.getTypeConfig=Cn;return{getTableActions:Ze,getTableColumns:et,getColumnsFromEntityType:At,updateLinkedProperties:it,createTableVisualization:lt,createDefaultTableVisualization:rt,getCapabilityRestriction:yt,getSelectionMode:bt,getRowStatusVisibility:Mt,getImportance:Yt,getP13nMode:tn,getTableAnnotationConfiguration:un,isFilteringCaseSensitive:jt,splitPath:vn,getSelectionVariantConfiguration:fn,getTableManifestConfiguration:Fn,getTypeConfig:Cn,updateTableVisualizationForType:nt}},false);