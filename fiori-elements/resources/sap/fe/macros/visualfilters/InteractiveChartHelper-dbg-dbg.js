/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/util/JSTokenizer", "sap/fe/core/CommonUtils", "sap/fe/core/controls/filterbar/utils/VisualFilterUtils", "sap/fe/core/converters/MetaModelConverter", "sap/fe/core/helpers/StableIdHelper", "sap/fe/core/helpers/TypeGuards", "sap/fe/core/templating/CriticalityFormatters", "sap/fe/core/templating/FilterHelper", "sap/fe/core/type/TypeUtil", "sap/fe/macros/CommonHelper", "sap/fe/macros/filter/FilterFieldHelper", "sap/m/library", "sap/ui/core/Core", "sap/ui/core/format/NumberFormat", "sap/ui/mdc/condition/ConditionConverter", "sap/ui/model/odata/v4/ODataUtils", "../field/FieldTemplating"], function (JSTokenizer, CommonUtils, VisualFilterUtils, MetaModelConverter, StableIdHelper, TypeGuards, CriticalityFormatters, FilterHelper, TypeUtil, CommonHelper, FilterFieldHelper, mLibrary, Core, NumberFormat, ConditionConverter, ODataUtils, FieldTemplating) {
  "use strict";

  var getTextBinding = FieldTemplating.getTextBinding;
  var formatOptions = FilterFieldHelper.formatOptions;
  var constraints = FilterFieldHelper.constraints;
  var getFiltersConditionsFromSelectionVariant = FilterHelper.getFiltersConditionsFromSelectionVariant;
  var buildExpressionForCriticalityColorMicroChart = CriticalityFormatters.buildExpressionForCriticalityColorMicroChart;
  var isNavigationProperty = TypeGuards.isNavigationProperty;
  var isEntitySet = TypeGuards.isEntitySet;
  var generate = StableIdHelper.generate;
  var getInvolvedDataModelObjects = MetaModelConverter.getInvolvedDataModelObjects;
  const InteractiveChartHelper = {
    getChartDisplayedValue: function (value, valueFormat, metaPath) {
      const infoPath = generate([metaPath]);
      return "{parts:[{path:'" + value + "',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}" + (valueFormat && valueFormat.ScaleFactor ? ",{value:'" + valueFormat.ScaleFactor.valueOf() + "'}" : ",{path:'internal>scalefactorNumber/" + infoPath + "'}") + (valueFormat && valueFormat.NumberOfFractionalDigits ? ",{value:'" + valueFormat.NumberOfFractionalDigits + "'}" : ",{value:'0'}") + ",{path:'internal>currency/" + infoPath + "'}" + ",{path:'" + value + "',type:'sap.ui.model.odata.type.String', constraints:{'nullable':false}}" + "], formatter:'VisualFilterRuntime.scaleVisualFilterValue'}"; //+ sType.split('#').length ? sType.split('#')[1] : 'Decimal' + "}";
    },

    getChartValue: function (value) {
      return "{path:'" + value + "',type:'sap.ui.model.odata.type.Decimal', constraints:{'nullable':false}}";
    },
    _getCollectionName: function (collection, contextPath, parameters) {
      const collectionObject = collection.targetObject;
      if (isNavigationProperty(collectionObject)) {
        return parameters ? contextPath.getPath() : collectionObject.name;
      } else if (isEntitySet(collectionObject)) {
        return "/" + collectionObject.name;
      } else {
        return collectionObject.name;
      }
    },
    _getBindingPathForParameters: function (filterConditions, metaModel, collectionName, parameters, entitySetPath) {
      const params = [];
      const convertedFilterConditions = VisualFilterUtils.convertFilterCondions(filterConditions);
      const parameterProperties = CommonUtils.getParameterInfo(metaModel, collectionName).parameterProperties;
      if (parameterProperties) {
        for (const i in parameters) {
          const parameter = parameters[i];
          const property = parameterProperties[parameter];
          const entityPath = entitySetPath.split("/")[1];
          const propertyContext = metaModel.createBindingContext(`/${entityPath}/${parameter}`);
          const typeConfig = TypeUtil.getTypeConfig(property.$Type, JSTokenizer.parseJS(formatOptions(property, {
            context: propertyContext
          }) || "{}"), JSTokenizer.parseJS(constraints(property, {
            context: propertyContext
          }) || "{}"));
          const condition = convertedFilterConditions[parameter];
          const conditionInternal = condition ? condition[0] : undefined;
          if (conditionInternal) {
            const internalParameterCondition = ConditionConverter.toType(conditionInternal, typeConfig, TypeUtil);
            const edmType = property.$Type;
            let value = encodeURIComponent(ODataUtils.formatLiteral(internalParameterCondition.values[0], edmType));
            value = value.replaceAll("'", "\\'");
            params.push(`${parameter}=${value}`);
          }
        }
      }
      const parameterEntitySet = collectionName.slice(0, collectionName.lastIndexOf("/"));
      const targetNavigation = collectionName.substring(collectionName.lastIndexOf("/") + 1);
      // create parameter context
      return `${parameterEntitySet}(${params.toString()})/${targetNavigation}`;
    },
    _getUOMAggregationExpression: function (customAggregate, UoMHasCustomAggregate, UOM, aggregation) {
      let aggregationExpression, UOMExpression;
      const path = UOM && typeof UOM != "string" && UOM.path;
      if (customAggregate) {
        //custom aggregate for a currency or unit of measure corresponding to this aggregatable property
        if (UoMHasCustomAggregate) {
          aggregationExpression = path ? `{ 'unit' : '${path}' }` : "{}";
          UOMExpression = "";
        } else {
          aggregationExpression = "{}";
          UOMExpression = path ? `, '${path}' : {}` : "";
        }
      } else if (aggregation && aggregation.AggregatableProperty && aggregation.AggregatableProperty.value && aggregation.AggregationMethod) {
        aggregationExpression = "{ 'name' : '" + aggregation.AggregatableProperty.value + "', 'with' : '" + aggregation.AggregationMethod + "'}";
        UOMExpression = path ? ", '" + path + "' : {}" : "";
      }
      return {
        aggregationExpression: aggregationExpression,
        UOMExpression: UOMExpression
      };
    },
    getAggregationBinding: function (chartAnnotations, collection, contextPath, textAssociation, dimensionType, sortOrder, selectionVariant, customAggregate, aggregation, UoMHasCustomAggregate, parameters, filterBarContext, draftSupported, chartMeasure) {
      const selectionVariantAnnotation = selectionVariant === null || selectionVariant === void 0 ? void 0 : selectionVariant.targetObject;
      const entityType = filterBarContext ? filterBarContext.getPath() : "";
      const entitySetPath = contextPath.getPath();
      const dimension = chartAnnotations.Dimensions[0].value;
      const filters = [];
      let filterConditions;
      let collectionName = this._getCollectionName(collection, contextPath, parameters);
      const UOM = InteractiveChartHelper.getUoM(chartAnnotations, collection, undefined, customAggregate, aggregation);
      const metaModel = contextPath.getModel();
      if (draftSupported) {
        filters.push({
          operator: "EQ",
          value1: "true",
          value2: null,
          path: "IsActiveEntity",
          isParameter: true
        });
      }
      if (selectionVariantAnnotation) {
        filterConditions = getFiltersConditionsFromSelectionVariant(entitySetPath, metaModel, selectionVariantAnnotation, VisualFilterUtils.getCustomConditions.bind(VisualFilterUtils));
        for (const path in filterConditions) {
          const conditions = filterConditions[path];
          conditions.forEach(function (condition) {
            if (!condition.isParameter) {
              filters.push(condition);
            }
          });
        }
      }
      if (entityType !== `${collectionName}/` && parameters && parameters.length && filterConditions) {
        const bindingPath = this._getBindingPathForParameters(filterConditions, metaModel, collectionName, parameters, entitySetPath);
        collectionName = bindingPath;
      }
      const UOMAggregationExpression = this._getUOMAggregationExpression(customAggregate, UoMHasCustomAggregate, UOM, aggregation);
      const aggregationExpression = UOMAggregationExpression.aggregationExpression;
      const UOMExpression = UOMAggregationExpression.UOMExpression;
      const textAssociationExpression = textAssociation ? "' : { 'additionally' : ['" + textAssociation.path + "'] }" : "' : { }";
      const filterExpression = JSON.stringify(filters);
      return "{path: '" + collectionName + "', templateShareable: true, suspended : true, 'filters' : " + filterExpression + ",'parameters' : {" + InteractiveChartHelper.getSortOrder(chartAnnotations, dimensionType, sortOrder, chartMeasure) + ", '$$aggregation' : {'aggregate' : {'" + chartMeasure + "' : " + aggregationExpression + "},'group' : {'" + dimension + textAssociationExpression + UOMExpression + "} } }" + InteractiveChartHelper.getMaxItems(chartAnnotations) + "}";
    },
    _getOrderExpressionFromMeasure: function (sortOrder, chartMeasure) {
      let sortPropertyName;
      if (sortOrder && sortOrder.length) {
        if (sortOrder[0].DynamicProperty) {
          var _sortOrder$0$DynamicP;
          sortPropertyName = (_sortOrder$0$DynamicP = sortOrder[0].DynamicProperty.$target) === null || _sortOrder$0$DynamicP === void 0 ? void 0 : _sortOrder$0$DynamicP.Name;
        } else {
          var _sortOrder$0$Property;
          sortPropertyName = (_sortOrder$0$Property = sortOrder[0].Property) === null || _sortOrder$0$Property === void 0 ? void 0 : _sortOrder$0$Property.value;
        }
        if (sortPropertyName === chartMeasure) {
          return "'$orderby' : '" + chartMeasure + (sortOrder[0].Descending ? " desc'" : "'");
        }
        return "'$orderby' : '" + chartMeasure + " desc'";
      }
      return "'$orderby' : '" + chartMeasure + " desc'";
    },
    getSortOrder: function (chartAnnotations, dimensionType, sortOrder, chartMeasure) {
      var _sortOrder$0$Property2, _sortOrder$0$Property3;
      if (chartAnnotations.ChartType === "UI.ChartType/Donut" || chartAnnotations.ChartType === "UI.ChartType/Bar") {
        return this._getOrderExpressionFromMeasure(sortOrder, chartMeasure);
      } else if (dimensionType === "Edm.Date" || dimensionType === "Edm.Time" || dimensionType === "Edm.DateTimeOffset") {
        return "'$orderby' : '" + chartAnnotations.Dimensions[0].value + "'";
      } else if (sortOrder && sortOrder.length && ((_sortOrder$0$Property2 = sortOrder[0].Property) === null || _sortOrder$0$Property2 === void 0 ? void 0 : (_sortOrder$0$Property3 = _sortOrder$0$Property2.$target) === null || _sortOrder$0$Property3 === void 0 ? void 0 : _sortOrder$0$Property3.path) === chartAnnotations.Dimensions[0].value) {
        var _sortOrder$0$Property4, _sortOrder$0$Property5;
        return "'$orderby' : '" + ((_sortOrder$0$Property4 = sortOrder[0].Property) === null || _sortOrder$0$Property4 === void 0 ? void 0 : (_sortOrder$0$Property5 = _sortOrder$0$Property4.$target) === null || _sortOrder$0$Property5 === void 0 ? void 0 : _sortOrder$0$Property5.name) + (sortOrder[0].Descending ? " desc'" : "'");
      } else {
        var _chartAnnotations$Dim;
        return "'$orderby' : '" + ((_chartAnnotations$Dim = chartAnnotations.Dimensions[0].$target) === null || _chartAnnotations$Dim === void 0 ? void 0 : _chartAnnotations$Dim.name) + "'";
      }
    },
    getMaxItems: function (chartAnnotations) {
      if (chartAnnotations.ChartType === "UI.ChartType/Bar") {
        return ",'startIndex' : 0,'length' : 3";
      } else if (chartAnnotations.ChartType === "UI.ChartType/Line") {
        return ",'startIndex' : 0,'length' : 6";
      } else {
        return "";
      }
    },
    getColorBinding: function (dataPoint, dimension) {
      var _dimension$$target, _dimension$$target$an, _dimension$$target$an2;
      const valueCriticality = dimension === null || dimension === void 0 ? void 0 : (_dimension$$target = dimension.$target) === null || _dimension$$target === void 0 ? void 0 : (_dimension$$target$an = _dimension$$target.annotations) === null || _dimension$$target$an === void 0 ? void 0 : (_dimension$$target$an2 = _dimension$$target$an.UI) === null || _dimension$$target$an2 === void 0 ? void 0 : _dimension$$target$an2.ValueCriticality;
      if (dataPoint !== null && dataPoint !== void 0 && dataPoint.Criticality) {
        return buildExpressionForCriticalityColorMicroChart(dataPoint);
      } else if (dataPoint !== null && dataPoint !== void 0 && dataPoint.CriticalityCalculation) {
        const oDirection = dataPoint.CriticalityCalculation.ImprovementDirection;
        const oDataPointValue = dataPoint.Value;
        const oDeviationRangeLowValue = dataPoint.CriticalityCalculation.DeviationRangeLowValue.valueOf();
        const oToleranceRangeLowValue = dataPoint.CriticalityCalculation.ToleranceRangeLowValue.valueOf();
        const oAcceptanceRangeLowValue = dataPoint.CriticalityCalculation.AcceptanceRangeLowValue.valueOf();
        const oAcceptanceRangeHighValue = dataPoint.CriticalityCalculation.AcceptanceRangeHighValue.valueOf();
        const oToleranceRangeHighValue = dataPoint.CriticalityCalculation.ToleranceRangeHighValue.valueOf();
        const oDeviationRangeHighValue = dataPoint.CriticalityCalculation.DeviationRangeHighValue.valueOf();
        return CommonHelper.getCriticalityCalculationBinding(oDirection, oDataPointValue, oDeviationRangeLowValue, oToleranceRangeLowValue, oAcceptanceRangeLowValue, oAcceptanceRangeHighValue, oToleranceRangeHighValue, oDeviationRangeHighValue);
      } else if (valueCriticality && valueCriticality.length) {
        return InteractiveChartHelper.getValueCriticality(dimension.value, valueCriticality);
      } else {
        return undefined;
      }
    },
    getValueCriticality: function (dimension, valueCriticality) {
      let result;
      const values = [];
      if (valueCriticality && valueCriticality.length > 0) {
        valueCriticality.forEach(function (valueCriticalityType) {
          if (valueCriticalityType.Value && valueCriticalityType.Criticality) {
            const value = "${" + dimension + "} === '" + valueCriticalityType.Value + "' ? '" + InteractiveChartHelper._getCriticalityFromEnum(valueCriticalityType.Criticality) + "'";
            values.push(value);
          }
        });
        result = values.length > 0 && values.join(" : ") + " : undefined";
      }
      return result ? "{= " + result + " }" : undefined;
    },
    /**
     * This function returns the criticality indicator from annotations if criticality is EnumMember.
     *
     * @param criticality Criticality provided in the annotations
     * @returns Return the indicator for criticality
     * @private
     */
    _getCriticalityFromEnum: function (criticality) {
      const valueColor = mLibrary.ValueColor;
      let indicator;
      if (criticality === "UI.CriticalityType/Negative") {
        indicator = valueColor.Error;
      } else if (criticality === "UI.CriticalityType/Positive") {
        indicator = valueColor.Good;
      } else if (criticality === "UI.CriticalityType/Critical") {
        indicator = valueColor.Critical;
      } else {
        indicator = valueColor.Neutral;
      }
      return indicator;
    },
    getScaleUoMTitle: function (chartAnnotation, collection, metaPath, customAggregate, aggregation, seperator, toolTip) {
      var _chartAnnotation$Meas, _chartAnnotation$Meas2, _chartAnnotation$Meas3, _chartAnnotation$Meas4, _chartAnnotation$Meas5;
      const scaleFactor = chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.MeasureAttributes ? (_chartAnnotation$Meas = chartAnnotation.MeasureAttributes[0]) === null || _chartAnnotation$Meas === void 0 ? void 0 : (_chartAnnotation$Meas2 = _chartAnnotation$Meas.DataPoint) === null || _chartAnnotation$Meas2 === void 0 ? void 0 : (_chartAnnotation$Meas3 = _chartAnnotation$Meas2.$target) === null || _chartAnnotation$Meas3 === void 0 ? void 0 : (_chartAnnotation$Meas4 = _chartAnnotation$Meas3.ValueFormat) === null || _chartAnnotation$Meas4 === void 0 ? void 0 : (_chartAnnotation$Meas5 = _chartAnnotation$Meas4.ScaleFactor) === null || _chartAnnotation$Meas5 === void 0 ? void 0 : _chartAnnotation$Meas5.valueOf() : undefined;
      const infoPath = generate([metaPath]);
      const fixedInteger = NumberFormat.getIntegerInstance({
        style: "short",
        showScale: false,
        shortRefNumber: scaleFactor
      });
      let scale = fixedInteger.getScale();
      let UOM = InteractiveChartHelper.getUoM(chartAnnotation, collection, undefined, customAggregate, aggregation);
      UOM = UOM && (UOM.path ? "${internal>uom/" + infoPath + "}" : "'" + UOM + "'");
      scale = scale ? "'" + scale + "'" : "${internal>scalefactor/" + infoPath + "}";
      if (!seperator) {
        seperator = "|";
      }
      seperator = "' " + seperator + " ' + ";
      const expression = scale && UOM ? seperator + scale + " + ' ' + " + UOM : seperator + (scale || UOM);
      return toolTip ? expression : "{= " + expression + "}";
    },
    getMeasureDimensionTitle: function (chartAnnotation, customAggregate, aggregation) {
      var _chartAnnotation$Dime, _chartAnnotation$Dime2, _chartAnnotation$Dime3, _chartAnnotation$Dime4, _chartAnnotation$Dime5;
      let measureLabel;
      let measurePath;
      if (customAggregate) {
        var _chartAnnotation$Meas6, _chartAnnotation$Meas7;
        measurePath = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Meas6 = chartAnnotation.Measures[0]) === null || _chartAnnotation$Meas6 === void 0 ? void 0 : (_chartAnnotation$Meas7 = _chartAnnotation$Meas6.$target) === null || _chartAnnotation$Meas7 === void 0 ? void 0 : _chartAnnotation$Meas7.name;
      }
      if (chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {
        var _chartAnnotation$Dyna, _chartAnnotation$Dyna2, _chartAnnotation$Dyna3;
        measurePath = (_chartAnnotation$Dyna = chartAnnotation.DynamicMeasures[0]) === null || _chartAnnotation$Dyna === void 0 ? void 0 : (_chartAnnotation$Dyna2 = _chartAnnotation$Dyna.$target) === null || _chartAnnotation$Dyna2 === void 0 ? void 0 : (_chartAnnotation$Dyna3 = _chartAnnotation$Dyna2.AggregatableProperty) === null || _chartAnnotation$Dyna3 === void 0 ? void 0 : _chartAnnotation$Dyna3.value;
      } else if (!customAggregate && chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.Measures && (chartAnnotation === null || chartAnnotation === void 0 ? void 0 : chartAnnotation.Measures.length) > 0) {
        var _chartAnnotation$Meas8, _chartAnnotation$Meas9;
        measurePath = (_chartAnnotation$Meas8 = chartAnnotation.Measures[0]) === null || _chartAnnotation$Meas8 === void 0 ? void 0 : (_chartAnnotation$Meas9 = _chartAnnotation$Meas8.$target) === null || _chartAnnotation$Meas9 === void 0 ? void 0 : _chartAnnotation$Meas9.name;
      }
      const dimensionPath = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Dime = chartAnnotation.Dimensions[0]) === null || _chartAnnotation$Dime === void 0 ? void 0 : _chartAnnotation$Dime.value;
      let dimensionLabel = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Dime2 = chartAnnotation.Dimensions[0]) === null || _chartAnnotation$Dime2 === void 0 ? void 0 : (_chartAnnotation$Dime3 = _chartAnnotation$Dime2.$target) === null || _chartAnnotation$Dime3 === void 0 ? void 0 : (_chartAnnotation$Dime4 = _chartAnnotation$Dime3.annotations) === null || _chartAnnotation$Dime4 === void 0 ? void 0 : (_chartAnnotation$Dime5 = _chartAnnotation$Dime4.Common) === null || _chartAnnotation$Dime5 === void 0 ? void 0 : _chartAnnotation$Dime5.Label;
      if (!customAggregate && aggregation) {
        // check if the label is part of aggregated properties (Transformation aggregates)
        measureLabel = aggregation.annotations && aggregation.annotations.Common && aggregation.annotations.Common.Label;
        if (measureLabel === undefined) {
          var _chartAnnotation$Meas10, _chartAnnotation$Meas11, _chartAnnotation$Meas12, _chartAnnotation$Meas13;
          measureLabel = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Meas10 = chartAnnotation.Measures[0]) === null || _chartAnnotation$Meas10 === void 0 ? void 0 : (_chartAnnotation$Meas11 = _chartAnnotation$Meas10.$target) === null || _chartAnnotation$Meas11 === void 0 ? void 0 : (_chartAnnotation$Meas12 = _chartAnnotation$Meas11.annotations) === null || _chartAnnotation$Meas12 === void 0 ? void 0 : (_chartAnnotation$Meas13 = _chartAnnotation$Meas12.Common) === null || _chartAnnotation$Meas13 === void 0 ? void 0 : _chartAnnotation$Meas13.Label;
        }
      } else {
        var _chartAnnotation$Meas14, _chartAnnotation$Meas15, _chartAnnotation$Meas16, _chartAnnotation$Meas17;
        measureLabel = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Meas14 = chartAnnotation.Measures[0]) === null || _chartAnnotation$Meas14 === void 0 ? void 0 : (_chartAnnotation$Meas15 = _chartAnnotation$Meas14.$target) === null || _chartAnnotation$Meas15 === void 0 ? void 0 : (_chartAnnotation$Meas16 = _chartAnnotation$Meas15.annotations) === null || _chartAnnotation$Meas16 === void 0 ? void 0 : (_chartAnnotation$Meas17 = _chartAnnotation$Meas16.Common) === null || _chartAnnotation$Meas17 === void 0 ? void 0 : _chartAnnotation$Meas17.Label;
      }
      if (measureLabel === undefined) {
        measureLabel = measurePath;
      }
      if (dimensionLabel === undefined) {
        dimensionLabel = dimensionPath;
      }
      return Core.getLibraryResourceBundle("sap.fe.macros").getText("M_INTERACTIVE_CHART_HELPER_VISUALFILTER_MEASURE_DIMENSION_TITLE", [measureLabel, dimensionLabel]);
    },
    getToolTip: function (chartAnnotation, collection, metaPath, customAggregate, aggregation, renderLineChart) {
      const chartType = chartAnnotation && chartAnnotation["ChartType"];
      let measureDimensionToolTip = InteractiveChartHelper.getMeasureDimensionTitle(chartAnnotation, customAggregate, aggregation);
      measureDimensionToolTip = CommonHelper.escapeSingleQuotes(measureDimensionToolTip);
      if (renderLineChart === "false" && chartType === "UI.ChartType/Line") {
        return `{= '${measureDimensionToolTip}'}`;
      }
      const seperator = Core.getLibraryResourceBundle("sap.fe.macros").getText("M_INTERACTIVE_CHART_HELPER_VISUALFILTER_TOOLTIP_SEPERATOR");
      const infoPath = generate([metaPath]);
      const scaleUOMTooltip = InteractiveChartHelper.getScaleUoMTitle(chartAnnotation, collection, infoPath, customAggregate, aggregation, seperator, true);
      return "{= '" + measureDimensionToolTip + (scaleUOMTooltip ? "' + " + scaleUOMTooltip : "'") + "}";
    },
    _getUOM: function (UOMObjectPath, UOM, collection, customData, aggregatablePropertyPath) {
      const UOMObject = {};
      const collectionObject = collection === null || collection === void 0 ? void 0 : collection.targetObject;
      if (UOMObjectPath && UOM) {
        // check if the UOM is part of Measure annotations(Custom aggregates)
        UOMObject[UOM] = {
          $Path: UOMObjectPath.path
        };
        return customData && UOMObjectPath.path ? JSON.stringify(UOMObject) : UOMObjectPath;
      } else if (aggregatablePropertyPath) {
        var _collectionObject$tar, _propertyAnnotations$;
        // check if the UOM is part of base property annotations(Transformation aggregates)
        const entityProperties = collectionObject.entityType ? collectionObject.entityType.entityProperties : (_collectionObject$tar = collectionObject.targetType) === null || _collectionObject$tar === void 0 ? void 0 : _collectionObject$tar.entityProperties;
        const propertyAnnotations = entityProperties === null || entityProperties === void 0 ? void 0 : entityProperties.find(property => property.name == aggregatablePropertyPath);
        if (propertyAnnotations !== null && propertyAnnotations !== void 0 && (_propertyAnnotations$ = propertyAnnotations.annotations) !== null && _propertyAnnotations$ !== void 0 && _propertyAnnotations$.Measures && UOM) {
          var _propertyAnnotations$2, _UOMObjectPath;
          UOMObjectPath = propertyAnnotations === null || propertyAnnotations === void 0 ? void 0 : (_propertyAnnotations$2 = propertyAnnotations.annotations) === null || _propertyAnnotations$2 === void 0 ? void 0 : _propertyAnnotations$2.Measures[UOM];
          UOMObject[UOM] = {
            $Path: (_UOMObjectPath = UOMObjectPath) === null || _UOMObjectPath === void 0 ? void 0 : _UOMObjectPath.path
          };
        }
        return UOMObjectPath && customData && UOMObjectPath.path ? JSON.stringify(UOMObject) : UOMObjectPath;
      }
    },
    getUoM: function (chartAnnotation, collection, customData, customAggregate, aggregation) {
      var _measure, _measure2;
      let measure = {};
      if (customAggregate) {
        measure = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : chartAnnotation.Measures[0];
      }
      if (chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.DynamicMeasures && chartAnnotation.DynamicMeasures.length > 0) {
        var _chartAnnotation$Dyna4, _chartAnnotation$Dyna5, _chartAnnotation$Dyna6, _chartAnnotation$Dyna7, _chartAnnotation$Dyna8;
        measure = (_chartAnnotation$Dyna4 = chartAnnotation.DynamicMeasures[0]) === null || _chartAnnotation$Dyna4 === void 0 ? void 0 : (_chartAnnotation$Dyna5 = _chartAnnotation$Dyna4.$target) === null || _chartAnnotation$Dyna5 === void 0 ? void 0 : (_chartAnnotation$Dyna6 = _chartAnnotation$Dyna5.AggregatableProperty) === null || _chartAnnotation$Dyna6 === void 0 ? void 0 : (_chartAnnotation$Dyna7 = _chartAnnotation$Dyna6.$target) === null || _chartAnnotation$Dyna7 === void 0 ? void 0 : (_chartAnnotation$Dyna8 = _chartAnnotation$Dyna7.annotations) === null || _chartAnnotation$Dyna8 === void 0 ? void 0 : _chartAnnotation$Dyna8.Measures;
      } else if (!customAggregate && chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.Measures && chartAnnotation.Measures.length > 0) {
        measure = chartAnnotation.Measures[0];
      }
      const ISOCurrency = (_measure = measure) === null || _measure === void 0 ? void 0 : _measure.ISOCurrency;
      const unit = (_measure2 = measure) === null || _measure2 === void 0 ? void 0 : _measure2.Unit;
      let aggregatablePropertyPath;
      if (!customAggregate && aggregation) {
        aggregatablePropertyPath = aggregation.AggregatableProperty && aggregation.AggregatableProperty.value;
      } else {
        var _measure3;
        aggregatablePropertyPath = (_measure3 = measure) === null || _measure3 === void 0 ? void 0 : _measure3.value;
      }
      return this._getUOM(ISOCurrency, "ISOCurrency", collection, customData, aggregatablePropertyPath) || this._getUOM(unit, "Unit", collection, customData, aggregatablePropertyPath);
    },
    getScaleFactor: function (valueFormat) {
      if (valueFormat && valueFormat.ScaleFactor) {
        return valueFormat.ScaleFactor.valueOf();
      }
      return undefined;
    },
    getUoMVisiblity: function (chartAnnotation, showError) {
      const chartType = chartAnnotation && chartAnnotation["ChartType"];
      if (showError) {
        return false;
      } else if (!(chartType === "UI.ChartType/Bar" || chartType === "UI.ChartType/Line")) {
        return false;
      } else {
        return true;
      }
    },
    getInParameterFiltersBinding: function (inParameters) {
      if (inParameters.length > 0) {
        const parts = [];
        let paths = "";
        inParameters.forEach(function (inParameter) {
          if (inParameter.localDataProperty) {
            parts.push(`{path:'$filters>/conditions/${inParameter.localDataProperty}'}`);
          }
        });
        if (parts.length > 0) {
          paths = parts.join();
          return `{parts:[${paths}], formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFiltersFromConditions'}`;
        } else {
          return undefined;
        }
      } else {
        return undefined;
      }
    },
    getfilterCountBinding: function (chartAnnotation) {
      var _chartAnnotation$Dime6, _chartAnnotation$Dime7;
      const dimension = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : (_chartAnnotation$Dime6 = chartAnnotation.Dimensions[0]) === null || _chartAnnotation$Dime6 === void 0 ? void 0 : (_chartAnnotation$Dime7 = _chartAnnotation$Dime6.$target) === null || _chartAnnotation$Dime7 === void 0 ? void 0 : _chartAnnotation$Dime7.name;
      return "{path:'$filters>/conditions/" + dimension + "', formatter:'sap.fe.macros.visualfilters.VisualFilterRuntime.getFilterCounts'}";
    },
    getInteractiveChartProperties: function (visualFilter) {
      const chartAnnotation = visualFilter.chartAnnotation;
      const interactiveChartProperties = {};
      if (visualFilter.chartMeasure && chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.Dimensions && chartAnnotation.Dimensions[0]) {
        var _visualFilter$metaPat, _dimension$$target2, _dimension$$target2$a, _dimension$$target2$a2, _dataPointAnnotation, _visualFilter$metaPat2, _visualFilter$metaPat3, _dataPointAnnotation2, _visualFilter$metaPat4;
        const id = generate([(_visualFilter$metaPat = visualFilter.metaPath) === null || _visualFilter$metaPat === void 0 ? void 0 : _visualFilter$metaPat.getPath()]);
        interactiveChartProperties.showErrorExpression = "${internal>" + id + "/showError}";
        interactiveChartProperties.errorMessageExpression = "{internal>" + id + "/errorMessage}";
        interactiveChartProperties.errorMessageTitleExpression = "{internal>" + id + "/errorMessageTitle}";
        let dataPointAnnotation;
        if (chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.MeasureAttributes && chartAnnotation !== null && chartAnnotation !== void 0 && chartAnnotation.MeasureAttributes[0]) {
          var _chartAnnotation$Meas18;
          dataPointAnnotation = chartAnnotation !== null && chartAnnotation !== void 0 && (_chartAnnotation$Meas18 = chartAnnotation.MeasureAttributes[0]) !== null && _chartAnnotation$Meas18 !== void 0 && _chartAnnotation$Meas18.DataPoint ? chartAnnotation === null || chartAnnotation === void 0 ? void 0 : chartAnnotation.MeasureAttributes[0].DataPoint.$target : chartAnnotation === null || chartAnnotation === void 0 ? void 0 : chartAnnotation.MeasureAttributes[0];
        }
        const dimension = chartAnnotation === null || chartAnnotation === void 0 ? void 0 : chartAnnotation.Dimensions[0];
        const parameters = CommonHelper.getParameters(visualFilter.contextPath.getObject(), {
          context: visualFilter.contextPath
        });
        const dimensionText = dimension === null || dimension === void 0 ? void 0 : (_dimension$$target2 = dimension.$target) === null || _dimension$$target2 === void 0 ? void 0 : (_dimension$$target2$a = _dimension$$target2.annotations) === null || _dimension$$target2$a === void 0 ? void 0 : (_dimension$$target2$a2 = _dimension$$target2$a.Common) === null || _dimension$$target2$a2 === void 0 ? void 0 : _dimension$$target2$a2.Text;
        const contextObjectPath = getInvolvedDataModelObjects(visualFilter.metaPath, visualFilter.contextPath).targetObject;
        const collection = getInvolvedDataModelObjects(visualFilter.contextPath);
        const selectionVariant = visualFilter.selectionVariantAnnotation ? getInvolvedDataModelObjects(visualFilter.selectionVariantAnnotation) : undefined;
        const sortOrder = contextObjectPath.SortOrder;
        interactiveChartProperties.aggregationBinding = InteractiveChartHelper.getAggregationBinding(chartAnnotation, collection, visualFilter.contextPath, dimensionText, dimension.$target.type, sortOrder, selectionVariant, visualFilter.customAggregate, visualFilter.aggregateProperties, visualFilter.UoMHasCustomAggregate, parameters, visualFilter.filterBarEntityType, visualFilter.draftSupported, visualFilter.chartMeasure);
        interactiveChartProperties.scalefactor = InteractiveChartHelper.getScaleFactor((_dataPointAnnotation = dataPointAnnotation) === null || _dataPointAnnotation === void 0 ? void 0 : _dataPointAnnotation.ValueFormat);
        interactiveChartProperties.uom = InteractiveChartHelper.getUoM(chartAnnotation, collection, true, visualFilter.customAggregate, visualFilter.aggregateProperties);
        interactiveChartProperties.inParameters = CommonHelper.stringifyCustomData(visualFilter.inParameters);
        interactiveChartProperties.inParameterFilters = visualFilter.inParameters ? InteractiveChartHelper.getInParameterFiltersBinding(visualFilter.inParameters) : undefined;
        interactiveChartProperties.selectionVariantAnnotation = visualFilter.selectionVariantAnnotation ? CommonHelper.stringifyCustomData(visualFilter.selectionVariantAnnotation) : undefined;
        interactiveChartProperties.stringifiedParameters = CommonHelper.stringifyCustomData(parameters);
        const dimensionContext = (_visualFilter$metaPat2 = visualFilter.metaPath) === null || _visualFilter$metaPat2 === void 0 ? void 0 : (_visualFilter$metaPat3 = _visualFilter$metaPat2.getModel()) === null || _visualFilter$metaPat3 === void 0 ? void 0 : _visualFilter$metaPat3.createBindingContext(visualFilter.contextPath.getPath() + "/@" + dimension.fullyQualifiedName.split("@")[1]);
        if (dimensionContext) {
          const dimensionObject = getInvolvedDataModelObjects(dimensionContext, visualFilter.contextPath);
          interactiveChartProperties.chartLabel = getTextBinding(dimensionObject, {});
        }
        interactiveChartProperties.measure = InteractiveChartHelper.getChartValue(visualFilter.chartMeasure);
        interactiveChartProperties.displayedValue = InteractiveChartHelper.getChartDisplayedValue(visualFilter.chartMeasure, (_dataPointAnnotation2 = dataPointAnnotation) === null || _dataPointAnnotation2 === void 0 ? void 0 : _dataPointAnnotation2.ValueFormat, (_visualFilter$metaPat4 = visualFilter.metaPath) === null || _visualFilter$metaPat4 === void 0 ? void 0 : _visualFilter$metaPat4.getPath());
        interactiveChartProperties.color = InteractiveChartHelper.getColorBinding(dataPointAnnotation, dimension);
      }
      return interactiveChartProperties;
    }
  };
  return InteractiveChartHelper;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyIiwiZ2V0Q2hhcnREaXNwbGF5ZWRWYWx1ZSIsInZhbHVlIiwidmFsdWVGb3JtYXQiLCJtZXRhUGF0aCIsImluZm9QYXRoIiwiZ2VuZXJhdGUiLCJTY2FsZUZhY3RvciIsInZhbHVlT2YiLCJOdW1iZXJPZkZyYWN0aW9uYWxEaWdpdHMiLCJnZXRDaGFydFZhbHVlIiwiX2dldENvbGxlY3Rpb25OYW1lIiwiY29sbGVjdGlvbiIsImNvbnRleHRQYXRoIiwicGFyYW1ldGVycyIsImNvbGxlY3Rpb25PYmplY3QiLCJ0YXJnZXRPYmplY3QiLCJpc05hdmlnYXRpb25Qcm9wZXJ0eSIsImdldFBhdGgiLCJuYW1lIiwiaXNFbnRpdHlTZXQiLCJfZ2V0QmluZGluZ1BhdGhGb3JQYXJhbWV0ZXJzIiwiZmlsdGVyQ29uZGl0aW9ucyIsIm1ldGFNb2RlbCIsImNvbGxlY3Rpb25OYW1lIiwiZW50aXR5U2V0UGF0aCIsInBhcmFtcyIsImNvbnZlcnRlZEZpbHRlckNvbmRpdGlvbnMiLCJWaXN1YWxGaWx0ZXJVdGlscyIsImNvbnZlcnRGaWx0ZXJDb25kaW9ucyIsInBhcmFtZXRlclByb3BlcnRpZXMiLCJDb21tb25VdGlscyIsImdldFBhcmFtZXRlckluZm8iLCJpIiwicGFyYW1ldGVyIiwicHJvcGVydHkiLCJlbnRpdHlQYXRoIiwic3BsaXQiLCJwcm9wZXJ0eUNvbnRleHQiLCJjcmVhdGVCaW5kaW5nQ29udGV4dCIsInR5cGVDb25maWciLCJUeXBlVXRpbCIsImdldFR5cGVDb25maWciLCIkVHlwZSIsIkpTVG9rZW5pemVyIiwicGFyc2VKUyIsImZvcm1hdE9wdGlvbnMiLCJjb250ZXh0IiwiY29uc3RyYWludHMiLCJjb25kaXRpb24iLCJjb25kaXRpb25JbnRlcm5hbCIsInVuZGVmaW5lZCIsImludGVybmFsUGFyYW1ldGVyQ29uZGl0aW9uIiwiQ29uZGl0aW9uQ29udmVydGVyIiwidG9UeXBlIiwiZWRtVHlwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIk9EYXRhVXRpbHMiLCJmb3JtYXRMaXRlcmFsIiwidmFsdWVzIiwicmVwbGFjZUFsbCIsInB1c2giLCJwYXJhbWV0ZXJFbnRpdHlTZXQiLCJzbGljZSIsImxhc3RJbmRleE9mIiwidGFyZ2V0TmF2aWdhdGlvbiIsInN1YnN0cmluZyIsInRvU3RyaW5nIiwiX2dldFVPTUFnZ3JlZ2F0aW9uRXhwcmVzc2lvbiIsImN1c3RvbUFnZ3JlZ2F0ZSIsIlVvTUhhc0N1c3RvbUFnZ3JlZ2F0ZSIsIlVPTSIsImFnZ3JlZ2F0aW9uIiwiYWdncmVnYXRpb25FeHByZXNzaW9uIiwiVU9NRXhwcmVzc2lvbiIsInBhdGgiLCJBZ2dyZWdhdGFibGVQcm9wZXJ0eSIsIkFnZ3JlZ2F0aW9uTWV0aG9kIiwiZ2V0QWdncmVnYXRpb25CaW5kaW5nIiwiY2hhcnRBbm5vdGF0aW9ucyIsInRleHRBc3NvY2lhdGlvbiIsImRpbWVuc2lvblR5cGUiLCJzb3J0T3JkZXIiLCJzZWxlY3Rpb25WYXJpYW50IiwiZmlsdGVyQmFyQ29udGV4dCIsImRyYWZ0U3VwcG9ydGVkIiwiY2hhcnRNZWFzdXJlIiwic2VsZWN0aW9uVmFyaWFudEFubm90YXRpb24iLCJlbnRpdHlUeXBlIiwiZGltZW5zaW9uIiwiRGltZW5zaW9ucyIsImZpbHRlcnMiLCJnZXRVb00iLCJnZXRNb2RlbCIsIm9wZXJhdG9yIiwidmFsdWUxIiwidmFsdWUyIiwiaXNQYXJhbWV0ZXIiLCJnZXRGaWx0ZXJzQ29uZGl0aW9uc0Zyb21TZWxlY3Rpb25WYXJpYW50IiwiZ2V0Q3VzdG9tQ29uZGl0aW9ucyIsImJpbmQiLCJjb25kaXRpb25zIiwiZm9yRWFjaCIsImxlbmd0aCIsImJpbmRpbmdQYXRoIiwiVU9NQWdncmVnYXRpb25FeHByZXNzaW9uIiwidGV4dEFzc29jaWF0aW9uRXhwcmVzc2lvbiIsImZpbHRlckV4cHJlc3Npb24iLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0U29ydE9yZGVyIiwiZ2V0TWF4SXRlbXMiLCJfZ2V0T3JkZXJFeHByZXNzaW9uRnJvbU1lYXN1cmUiLCJzb3J0UHJvcGVydHlOYW1lIiwiRHluYW1pY1Byb3BlcnR5IiwiJHRhcmdldCIsIk5hbWUiLCJQcm9wZXJ0eSIsIkRlc2NlbmRpbmciLCJDaGFydFR5cGUiLCJnZXRDb2xvckJpbmRpbmciLCJkYXRhUG9pbnQiLCJ2YWx1ZUNyaXRpY2FsaXR5IiwiYW5ub3RhdGlvbnMiLCJVSSIsIlZhbHVlQ3JpdGljYWxpdHkiLCJDcml0aWNhbGl0eSIsImJ1aWxkRXhwcmVzc2lvbkZvckNyaXRpY2FsaXR5Q29sb3JNaWNyb0NoYXJ0IiwiQ3JpdGljYWxpdHlDYWxjdWxhdGlvbiIsIm9EaXJlY3Rpb24iLCJJbXByb3ZlbWVudERpcmVjdGlvbiIsIm9EYXRhUG9pbnRWYWx1ZSIsIlZhbHVlIiwib0RldmlhdGlvblJhbmdlTG93VmFsdWUiLCJEZXZpYXRpb25SYW5nZUxvd1ZhbHVlIiwib1RvbGVyYW5jZVJhbmdlTG93VmFsdWUiLCJUb2xlcmFuY2VSYW5nZUxvd1ZhbHVlIiwib0FjY2VwdGFuY2VSYW5nZUxvd1ZhbHVlIiwiQWNjZXB0YW5jZVJhbmdlTG93VmFsdWUiLCJvQWNjZXB0YW5jZVJhbmdlSGlnaFZhbHVlIiwiQWNjZXB0YW5jZVJhbmdlSGlnaFZhbHVlIiwib1RvbGVyYW5jZVJhbmdlSGlnaFZhbHVlIiwiVG9sZXJhbmNlUmFuZ2VIaWdoVmFsdWUiLCJvRGV2aWF0aW9uUmFuZ2VIaWdoVmFsdWUiLCJEZXZpYXRpb25SYW5nZUhpZ2hWYWx1ZSIsIkNvbW1vbkhlbHBlciIsImdldENyaXRpY2FsaXR5Q2FsY3VsYXRpb25CaW5kaW5nIiwiZ2V0VmFsdWVDcml0aWNhbGl0eSIsInJlc3VsdCIsInZhbHVlQ3JpdGljYWxpdHlUeXBlIiwiX2dldENyaXRpY2FsaXR5RnJvbUVudW0iLCJqb2luIiwiY3JpdGljYWxpdHkiLCJ2YWx1ZUNvbG9yIiwibUxpYnJhcnkiLCJWYWx1ZUNvbG9yIiwiaW5kaWNhdG9yIiwiRXJyb3IiLCJHb29kIiwiQ3JpdGljYWwiLCJOZXV0cmFsIiwiZ2V0U2NhbGVVb01UaXRsZSIsImNoYXJ0QW5ub3RhdGlvbiIsInNlcGVyYXRvciIsInRvb2xUaXAiLCJzY2FsZUZhY3RvciIsIk1lYXN1cmVBdHRyaWJ1dGVzIiwiRGF0YVBvaW50IiwiVmFsdWVGb3JtYXQiLCJmaXhlZEludGVnZXIiLCJOdW1iZXJGb3JtYXQiLCJnZXRJbnRlZ2VySW5zdGFuY2UiLCJzdHlsZSIsInNob3dTY2FsZSIsInNob3J0UmVmTnVtYmVyIiwic2NhbGUiLCJnZXRTY2FsZSIsImV4cHJlc3Npb24iLCJnZXRNZWFzdXJlRGltZW5zaW9uVGl0bGUiLCJtZWFzdXJlTGFiZWwiLCJtZWFzdXJlUGF0aCIsIk1lYXN1cmVzIiwiRHluYW1pY01lYXN1cmVzIiwiZGltZW5zaW9uUGF0aCIsImRpbWVuc2lvbkxhYmVsIiwiQ29tbW9uIiwiTGFiZWwiLCJDb3JlIiwiZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlIiwiZ2V0VGV4dCIsImdldFRvb2xUaXAiLCJyZW5kZXJMaW5lQ2hhcnQiLCJjaGFydFR5cGUiLCJtZWFzdXJlRGltZW5zaW9uVG9vbFRpcCIsImVzY2FwZVNpbmdsZVF1b3RlcyIsInNjYWxlVU9NVG9vbHRpcCIsIl9nZXRVT00iLCJVT01PYmplY3RQYXRoIiwiY3VzdG9tRGF0YSIsImFnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aCIsIlVPTU9iamVjdCIsIiRQYXRoIiwiZW50aXR5UHJvcGVydGllcyIsInRhcmdldFR5cGUiLCJwcm9wZXJ0eUFubm90YXRpb25zIiwiZmluZCIsIm1lYXN1cmUiLCJJU09DdXJyZW5jeSIsInVuaXQiLCJVbml0IiwiZ2V0U2NhbGVGYWN0b3IiLCJnZXRVb01WaXNpYmxpdHkiLCJzaG93RXJyb3IiLCJnZXRJblBhcmFtZXRlckZpbHRlcnNCaW5kaW5nIiwiaW5QYXJhbWV0ZXJzIiwicGFydHMiLCJwYXRocyIsImluUGFyYW1ldGVyIiwibG9jYWxEYXRhUHJvcGVydHkiLCJnZXRmaWx0ZXJDb3VudEJpbmRpbmciLCJnZXRJbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcyIsInZpc3VhbEZpbHRlciIsImludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzIiwiaWQiLCJzaG93RXJyb3JFeHByZXNzaW9uIiwiZXJyb3JNZXNzYWdlRXhwcmVzc2lvbiIsImVycm9yTWVzc2FnZVRpdGxlRXhwcmVzc2lvbiIsImRhdGFQb2ludEFubm90YXRpb24iLCJnZXRQYXJhbWV0ZXJzIiwiZ2V0T2JqZWN0IiwiZGltZW5zaW9uVGV4dCIsIlRleHQiLCJjb250ZXh0T2JqZWN0UGF0aCIsImdldEludm9sdmVkRGF0YU1vZGVsT2JqZWN0cyIsIlNvcnRPcmRlciIsImFnZ3JlZ2F0aW9uQmluZGluZyIsInR5cGUiLCJhZ2dyZWdhdGVQcm9wZXJ0aWVzIiwiZmlsdGVyQmFyRW50aXR5VHlwZSIsInNjYWxlZmFjdG9yIiwidW9tIiwic3RyaW5naWZ5Q3VzdG9tRGF0YSIsImluUGFyYW1ldGVyRmlsdGVycyIsInN0cmluZ2lmaWVkUGFyYW1ldGVycyIsImRpbWVuc2lvbkNvbnRleHQiLCJmdWxseVF1YWxpZmllZE5hbWUiLCJkaW1lbnNpb25PYmplY3QiLCJjaGFydExhYmVsIiwiZ2V0VGV4dEJpbmRpbmciLCJkaXNwbGF5ZWRWYWx1ZSIsImNvbG9yIl0sInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyJJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhdGhBbm5vdGF0aW9uRXhwcmVzc2lvbiwgUHJvcGVydHksIFByb3BlcnR5UGF0aCB9IGZyb20gXCJAc2FwLXV4L3ZvY2FidWxhcmllcy10eXBlc1wiO1xuaW1wb3J0IHsgQWdncmVnYXRlZFByb3BlcnR5LCBBZ2dyZWdhdGVkUHJvcGVydHlUeXBlIH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL3ZvY2FidWxhcmllcy9BbmFseXRpY3NcIjtcbmltcG9ydCB7IExhYmVsLCBTb3J0T3JkZXIgfSBmcm9tIFwiQHNhcC11eC92b2NhYnVsYXJpZXMtdHlwZXMvdm9jYWJ1bGFyaWVzL0NvbW1vblwiO1xuaW1wb3J0IHsgQ2hhcnQsIERhdGFQb2ludCwgTnVtYmVyRm9ybWF0IGFzIE51bWJlckZvcm1hdFR5cGUsIFZhbHVlQ3JpdGljYWxpdHlUeXBlIH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL3ZvY2FidWxhcmllcy9VSVwiO1xuaW1wb3J0IEpTVG9rZW5pemVyIGZyb20gXCJzYXAvYmFzZS91dGlsL0pTVG9rZW5pemVyXCI7XG5pbXBvcnQgQ29tbW9uVXRpbHMgZnJvbSBcInNhcC9mZS9jb3JlL0NvbW1vblV0aWxzXCI7XG5pbXBvcnQgVmlzdWFsRmlsdGVyVXRpbHMgZnJvbSBcInNhcC9mZS9jb3JlL2NvbnRyb2xzL2ZpbHRlcmJhci91dGlscy9WaXN1YWxGaWx0ZXJVdGlsc1wiO1xuaW1wb3J0IHsgUGFyYW1ldGVyVHlwZSB9IGZyb20gXCJzYXAvZmUvY29yZS9jb252ZXJ0ZXJzL2NvbnRyb2xzL0xpc3RSZXBvcnQvVmlzdWFsRmlsdGVyc1wiO1xuaW1wb3J0IHsgZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIH0gZnJvbSBcInNhcC9mZS9jb3JlL2NvbnZlcnRlcnMvTWV0YU1vZGVsQ29udmVydGVyXCI7XG5pbXBvcnQgdHlwZSB7IEJpbmRpbmdUb29sa2l0RXhwcmVzc2lvbiwgQ29tcGlsZWRCaW5kaW5nVG9vbGtpdEV4cHJlc3Npb24gfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9CaW5kaW5nVG9vbGtpdFwiO1xuaW1wb3J0IHsgZ2VuZXJhdGUgfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9TdGFibGVJZEhlbHBlclwiO1xuaW1wb3J0IHsgaXNFbnRpdHlTZXQsIGlzTmF2aWdhdGlvblByb3BlcnR5IH0gZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvVHlwZUd1YXJkc1wiO1xuaW1wb3J0IHsgYnVpbGRFeHByZXNzaW9uRm9yQ3JpdGljYWxpdHlDb2xvck1pY3JvQ2hhcnQgfSBmcm9tIFwic2FwL2ZlL2NvcmUvdGVtcGxhdGluZy9Dcml0aWNhbGl0eUZvcm1hdHRlcnNcIjtcbmltcG9ydCB7IERhdGFNb2RlbE9iamVjdFBhdGggfSBmcm9tIFwic2FwL2ZlL2NvcmUvdGVtcGxhdGluZy9EYXRhTW9kZWxQYXRoSGVscGVyXCI7XG5pbXBvcnQgeyBGaWx0ZXJDb25kaXRpb25zLCBnZXRGaWx0ZXJzQ29uZGl0aW9uc0Zyb21TZWxlY3Rpb25WYXJpYW50IH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvRmlsdGVySGVscGVyXCI7XG5pbXBvcnQgVHlwZVV0aWwgZnJvbSBcInNhcC9mZS9jb3JlL3R5cGUvVHlwZVV0aWxcIjtcbmltcG9ydCBDb21tb25IZWxwZXIgZnJvbSBcInNhcC9mZS9tYWNyb3MvQ29tbW9uSGVscGVyXCI7XG5pbXBvcnQgeyBjb25zdHJhaW50cywgZm9ybWF0T3B0aW9ucyB9IGZyb20gXCJzYXAvZmUvbWFjcm9zL2ZpbHRlci9GaWx0ZXJGaWVsZEhlbHBlclwiO1xuaW1wb3J0IG1MaWJyYXJ5IGZyb20gXCJzYXAvbS9saWJyYXJ5XCI7XG5pbXBvcnQgQ29yZSBmcm9tIFwic2FwL3VpL2NvcmUvQ29yZVwiO1xuaW1wb3J0IE51bWJlckZvcm1hdCBmcm9tIFwic2FwL3VpL2NvcmUvZm9ybWF0L051bWJlckZvcm1hdFwiO1xuaW1wb3J0IENvbmRpdGlvbkNvbnZlcnRlciBmcm9tIFwic2FwL3VpL21kYy9jb25kaXRpb24vQ29uZGl0aW9uQ29udmVydGVyXCI7XG5pbXBvcnQgQ29udGV4dCBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L0NvbnRleHRcIjtcbmltcG9ydCB0eXBlIE9EYXRhTWV0YU1vZGVsIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFNZXRhTW9kZWxcIjtcbmltcG9ydCBPRGF0YU1vZGVsIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFNb2RlbFwiO1xuaW1wb3J0IE9EYXRhVXRpbHMgZnJvbSBcInNhcC91aS9tb2RlbC9vZGF0YS92NC9PRGF0YVV0aWxzXCI7XG5pbXBvcnQgeyBnZXRUZXh0QmluZGluZyB9IGZyb20gXCIuLi9maWVsZC9GaWVsZFRlbXBsYXRpbmdcIjtcbmltcG9ydCBWaXN1YWxGaWx0ZXJCbG9jayBmcm9tIFwiLi9WaXN1YWxGaWx0ZXIuYmxvY2tcIjtcblxudHlwZSBNZWFzdXJlVHlwZSA9IHtcblx0dmFsdWU/OiBzdHJpbmc7XG5cdElTT0N1cnJlbmN5PzogUGF0aEFubm90YXRpb25FeHByZXNzaW9uPHN0cmluZz47XG5cdFVuaXQ/OiBQYXRoQW5ub3RhdGlvbkV4cHJlc3Npb248c3RyaW5nPjtcbn07XG50eXBlIEludGVyYWN0aXZlQ2hhcnRUeXBlID0ge1xuXHRjaGFydExhYmVsPzogQmluZGluZ1Rvb2xraXRFeHByZXNzaW9uPHN0cmluZz4gfCBDb21waWxlZEJpbmRpbmdUb29sa2l0RXhwcmVzc2lvbjtcblx0YWdncmVnYXRpb25CaW5kaW5nPzogc3RyaW5nO1xuXHRlcnJvck1lc3NhZ2VUaXRsZUV4cHJlc3Npb24/OiBzdHJpbmc7XG5cdGVycm9yTWVzc2FnZUV4cHJlc3Npb24/OiBzdHJpbmc7XG5cdHNob3dFcnJvckV4cHJlc3Npb24/OiBzdHJpbmc7XG5cdGluUGFyYW1ldGVycz86IHN0cmluZztcblx0ZGlzcGxheWVkVmFsdWU/OiBzdHJpbmc7XG5cdG1lYXN1cmU/OiBzdHJpbmc7XG5cdHN0cmluZ2lmaWVkUGFyYW1ldGVycz86IHN0cmluZztcblx0c2VsZWN0aW9uVmFyaWFudEFubm90YXRpb24/OiBzdHJpbmc7XG5cdGluUGFyYW1ldGVyRmlsdGVycz86IHN0cmluZztcblx0Y29sb3I/OiBzdHJpbmc7XG5cdHVvbT86IHN0cmluZyB8IFBhdGhBbm5vdGF0aW9uRXhwcmVzc2lvbjxzdHJpbmc+O1xuXHRzY2FsZWZhY3Rvcj86IG51bWJlciB8IG9iamVjdDtcbn07XG5cbmNvbnN0IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIgPSB7XG5cdGdldENoYXJ0RGlzcGxheWVkVmFsdWU6IGZ1bmN0aW9uICh2YWx1ZTogc3RyaW5nLCB2YWx1ZUZvcm1hdD86IE51bWJlckZvcm1hdFR5cGUsIG1ldGFQYXRoPzogc3RyaW5nKSB7XG5cdFx0Y29uc3QgaW5mb1BhdGggPSBnZW5lcmF0ZShbbWV0YVBhdGhdKTtcblx0XHRyZXR1cm4gKFxuXHRcdFx0XCJ7cGFydHM6W3twYXRoOidcIiArXG5cdFx0XHR2YWx1ZSArXG5cdFx0XHRcIicsdHlwZTonc2FwLnVpLm1vZGVsLm9kYXRhLnR5cGUuRGVjaW1hbCcsIGNvbnN0cmFpbnRzOnsnbnVsbGFibGUnOmZhbHNlfX1cIiArXG5cdFx0XHQodmFsdWVGb3JtYXQgJiYgdmFsdWVGb3JtYXQuU2NhbGVGYWN0b3Jcblx0XHRcdFx0PyBcIix7dmFsdWU6J1wiICsgdmFsdWVGb3JtYXQuU2NhbGVGYWN0b3IudmFsdWVPZigpICsgXCInfVwiXG5cdFx0XHRcdDogXCIse3BhdGg6J2ludGVybmFsPnNjYWxlZmFjdG9yTnVtYmVyL1wiICsgaW5mb1BhdGggKyBcIid9XCIpICtcblx0XHRcdCh2YWx1ZUZvcm1hdCAmJiB2YWx1ZUZvcm1hdC5OdW1iZXJPZkZyYWN0aW9uYWxEaWdpdHNcblx0XHRcdFx0PyBcIix7dmFsdWU6J1wiICsgdmFsdWVGb3JtYXQuTnVtYmVyT2ZGcmFjdGlvbmFsRGlnaXRzICsgXCInfVwiXG5cdFx0XHRcdDogXCIse3ZhbHVlOicwJ31cIikgK1xuXHRcdFx0XCIse3BhdGg6J2ludGVybmFsPmN1cnJlbmN5L1wiICtcblx0XHRcdGluZm9QYXRoICtcblx0XHRcdFwiJ31cIiArXG5cdFx0XHRcIix7cGF0aDonXCIgK1xuXHRcdFx0dmFsdWUgK1xuXHRcdFx0XCInLHR5cGU6J3NhcC51aS5tb2RlbC5vZGF0YS50eXBlLlN0cmluZycsIGNvbnN0cmFpbnRzOnsnbnVsbGFibGUnOmZhbHNlfX1cIiArXG5cdFx0XHRcIl0sIGZvcm1hdHRlcjonVmlzdWFsRmlsdGVyUnVudGltZS5zY2FsZVZpc3VhbEZpbHRlclZhbHVlJ31cIlxuXHRcdCk7IC8vKyBzVHlwZS5zcGxpdCgnIycpLmxlbmd0aCA/IHNUeXBlLnNwbGl0KCcjJylbMV0gOiAnRGVjaW1hbCcgKyBcIn1cIjtcblx0fSxcblx0Z2V0Q2hhcnRWYWx1ZTogZnVuY3Rpb24gKHZhbHVlOiBzdHJpbmcpIHtcblx0XHRyZXR1cm4gXCJ7cGF0aDonXCIgKyB2YWx1ZSArIFwiJyx0eXBlOidzYXAudWkubW9kZWwub2RhdGEudHlwZS5EZWNpbWFsJywgY29uc3RyYWludHM6eydudWxsYWJsZSc6ZmFsc2V9fVwiO1xuXHR9LFxuXHRfZ2V0Q29sbGVjdGlvbk5hbWU6IGZ1bmN0aW9uIChjb2xsZWN0aW9uOiBEYXRhTW9kZWxPYmplY3RQYXRoLCBjb250ZXh0UGF0aDogQ29udGV4dCwgcGFyYW1ldGVycz86IEFycmF5PHN0cmluZz4pIHtcblx0XHRjb25zdCBjb2xsZWN0aW9uT2JqZWN0ID0gY29sbGVjdGlvbi50YXJnZXRPYmplY3Q7XG5cdFx0aWYgKGlzTmF2aWdhdGlvblByb3BlcnR5KGNvbGxlY3Rpb25PYmplY3QpKSB7XG5cdFx0XHRyZXR1cm4gcGFyYW1ldGVycyA/IGNvbnRleHRQYXRoLmdldFBhdGgoKSA6IGNvbGxlY3Rpb25PYmplY3QubmFtZTtcblx0XHR9IGVsc2UgaWYgKGlzRW50aXR5U2V0KGNvbGxlY3Rpb25PYmplY3QpKSB7XG5cdFx0XHRyZXR1cm4gXCIvXCIgKyBjb2xsZWN0aW9uT2JqZWN0Lm5hbWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBjb2xsZWN0aW9uT2JqZWN0Lm5hbWU7XG5cdFx0fVxuXHR9LFxuXHRfZ2V0QmluZGluZ1BhdGhGb3JQYXJhbWV0ZXJzOiBmdW5jdGlvbiAoXG5cdFx0ZmlsdGVyQ29uZGl0aW9uczogUmVjb3JkPHN0cmluZywgRmlsdGVyQ29uZGl0aW9uc1tdPixcblx0XHRtZXRhTW9kZWw6IE9EYXRhTW9kZWwsXG5cdFx0Y29sbGVjdGlvbk5hbWU6IHN0cmluZyxcblx0XHRwYXJhbWV0ZXJzOiBBcnJheTxzdHJpbmc+LFxuXHRcdGVudGl0eVNldFBhdGg6IHN0cmluZ1xuXHQpIHtcblx0XHRjb25zdCBwYXJhbXMgPSBbXTtcblx0XHRjb25zdCBjb252ZXJ0ZWRGaWx0ZXJDb25kaXRpb25zID0gVmlzdWFsRmlsdGVyVXRpbHMuY29udmVydEZpbHRlckNvbmRpb25zKGZpbHRlckNvbmRpdGlvbnMpO1xuXHRcdGNvbnN0IHBhcmFtZXRlclByb3BlcnRpZXMgPSBDb21tb25VdGlscy5nZXRQYXJhbWV0ZXJJbmZvKFxuXHRcdFx0bWV0YU1vZGVsIGFzIHVua25vd24gYXMgT0RhdGFNZXRhTW9kZWwsXG5cdFx0XHRjb2xsZWN0aW9uTmFtZVxuXHRcdCkucGFyYW1ldGVyUHJvcGVydGllcztcblx0XHRpZiAocGFyYW1ldGVyUHJvcGVydGllcykge1xuXHRcdFx0Zm9yIChjb25zdCBpIGluIHBhcmFtZXRlcnMpIHtcblx0XHRcdFx0Y29uc3QgcGFyYW1ldGVyID0gcGFyYW1ldGVyc1tpXTtcblx0XHRcdFx0Y29uc3QgcHJvcGVydHkgPSBwYXJhbWV0ZXJQcm9wZXJ0aWVzW3BhcmFtZXRlcl07XG5cdFx0XHRcdGNvbnN0IGVudGl0eVBhdGggPSBlbnRpdHlTZXRQYXRoLnNwbGl0KFwiL1wiKVsxXTtcblx0XHRcdFx0Y29uc3QgcHJvcGVydHlDb250ZXh0ID0gbWV0YU1vZGVsLmNyZWF0ZUJpbmRpbmdDb250ZXh0KGAvJHtlbnRpdHlQYXRofS8ke3BhcmFtZXRlcn1gKTtcblx0XHRcdFx0Y29uc3QgdHlwZUNvbmZpZyA9IFR5cGVVdGlsLmdldFR5cGVDb25maWcoXG5cdFx0XHRcdFx0cHJvcGVydHkuJFR5cGUsXG5cdFx0XHRcdFx0SlNUb2tlbml6ZXIucGFyc2VKUyhmb3JtYXRPcHRpb25zKHByb3BlcnR5LCB7IGNvbnRleHQ6IHByb3BlcnR5Q29udGV4dCB9KSB8fCBcInt9XCIpLFxuXHRcdFx0XHRcdEpTVG9rZW5pemVyLnBhcnNlSlMoY29uc3RyYWludHMocHJvcGVydHksIHsgY29udGV4dDogcHJvcGVydHlDb250ZXh0IH0pIHx8IFwie31cIilcblx0XHRcdFx0KTtcblx0XHRcdFx0Y29uc3QgY29uZGl0aW9uID0gY29udmVydGVkRmlsdGVyQ29uZGl0aW9uc1twYXJhbWV0ZXJdO1xuXHRcdFx0XHRjb25zdCBjb25kaXRpb25JbnRlcm5hbCA9IGNvbmRpdGlvbiA/IGNvbmRpdGlvblswXSA6IHVuZGVmaW5lZDtcblx0XHRcdFx0aWYgKGNvbmRpdGlvbkludGVybmFsKSB7XG5cdFx0XHRcdFx0Y29uc3QgaW50ZXJuYWxQYXJhbWV0ZXJDb25kaXRpb24gPSBDb25kaXRpb25Db252ZXJ0ZXIudG9UeXBlKGNvbmRpdGlvbkludGVybmFsLCB0eXBlQ29uZmlnLCBUeXBlVXRpbCk7XG5cdFx0XHRcdFx0Y29uc3QgZWRtVHlwZSA9IHByb3BlcnR5LiRUeXBlO1xuXHRcdFx0XHRcdGxldCB2YWx1ZSA9IGVuY29kZVVSSUNvbXBvbmVudChPRGF0YVV0aWxzLmZvcm1hdExpdGVyYWwoaW50ZXJuYWxQYXJhbWV0ZXJDb25kaXRpb24udmFsdWVzWzBdLCBlZG1UeXBlKSk7XG5cdFx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlQWxsKFwiJ1wiLCBcIlxcXFwnXCIpO1xuXHRcdFx0XHRcdHBhcmFtcy5wdXNoKGAke3BhcmFtZXRlcn09JHt2YWx1ZX1gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGNvbnN0IHBhcmFtZXRlckVudGl0eVNldCA9IGNvbGxlY3Rpb25OYW1lLnNsaWNlKDAsIGNvbGxlY3Rpb25OYW1lLmxhc3RJbmRleE9mKFwiL1wiKSk7XG5cdFx0Y29uc3QgdGFyZ2V0TmF2aWdhdGlvbiA9IGNvbGxlY3Rpb25OYW1lLnN1YnN0cmluZyhjb2xsZWN0aW9uTmFtZS5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcblx0XHQvLyBjcmVhdGUgcGFyYW1ldGVyIGNvbnRleHRcblx0XHRyZXR1cm4gYCR7cGFyYW1ldGVyRW50aXR5U2V0fSgke3BhcmFtcy50b1N0cmluZygpfSkvJHt0YXJnZXROYXZpZ2F0aW9ufWA7XG5cdH0sXG5cdF9nZXRVT01BZ2dyZWdhdGlvbkV4cHJlc3Npb246IGZ1bmN0aW9uIChcblx0XHRjdXN0b21BZ2dyZWdhdGU/OiBib29sZWFuLFxuXHRcdFVvTUhhc0N1c3RvbUFnZ3JlZ2F0ZT86IGJvb2xlYW4sXG5cdFx0VU9NPzogUGF0aEFubm90YXRpb25FeHByZXNzaW9uPHN0cmluZz4gfCBzdHJpbmcsXG5cdFx0YWdncmVnYXRpb24/OiBBZ2dyZWdhdGVkUHJvcGVydHlUeXBlXG5cdCkge1xuXHRcdGxldCBhZ2dyZWdhdGlvbkV4cHJlc3Npb24sIFVPTUV4cHJlc3Npb247XG5cdFx0Y29uc3QgcGF0aCA9IFVPTSAmJiB0eXBlb2YgVU9NICE9IFwic3RyaW5nXCIgJiYgVU9NLnBhdGg7XG5cdFx0aWYgKGN1c3RvbUFnZ3JlZ2F0ZSkge1xuXHRcdFx0Ly9jdXN0b20gYWdncmVnYXRlIGZvciBhIGN1cnJlbmN5IG9yIHVuaXQgb2YgbWVhc3VyZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWdncmVnYXRhYmxlIHByb3BlcnR5XG5cdFx0XHRpZiAoVW9NSGFzQ3VzdG9tQWdncmVnYXRlKSB7XG5cdFx0XHRcdGFnZ3JlZ2F0aW9uRXhwcmVzc2lvbiA9IHBhdGggPyBgeyAndW5pdCcgOiAnJHtwYXRofScgfWAgOiBcInt9XCI7XG5cdFx0XHRcdFVPTUV4cHJlc3Npb24gPSBcIlwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YWdncmVnYXRpb25FeHByZXNzaW9uID0gXCJ7fVwiO1xuXHRcdFx0XHRVT01FeHByZXNzaW9uID0gcGF0aCA/IGAsICcke3BhdGh9JyA6IHt9YCA6IFwiXCI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdGFnZ3JlZ2F0aW9uICYmXG5cdFx0XHRhZ2dyZWdhdGlvbi5BZ2dyZWdhdGFibGVQcm9wZXJ0eSAmJlxuXHRcdFx0YWdncmVnYXRpb24uQWdncmVnYXRhYmxlUHJvcGVydHkudmFsdWUgJiZcblx0XHRcdGFnZ3JlZ2F0aW9uLkFnZ3JlZ2F0aW9uTWV0aG9kXG5cdFx0KSB7XG5cdFx0XHRhZ2dyZWdhdGlvbkV4cHJlc3Npb24gPVxuXHRcdFx0XHRcInsgJ25hbWUnIDogJ1wiICsgYWdncmVnYXRpb24uQWdncmVnYXRhYmxlUHJvcGVydHkudmFsdWUgKyBcIicsICd3aXRoJyA6ICdcIiArIGFnZ3JlZ2F0aW9uLkFnZ3JlZ2F0aW9uTWV0aG9kICsgXCInfVwiO1xuXHRcdFx0VU9NRXhwcmVzc2lvbiA9IHBhdGggPyBcIiwgJ1wiICsgcGF0aCArIFwiJyA6IHt9XCIgOiBcIlwiO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRhZ2dyZWdhdGlvbkV4cHJlc3Npb246IGFnZ3JlZ2F0aW9uRXhwcmVzc2lvbixcblx0XHRcdFVPTUV4cHJlc3Npb246IFVPTUV4cHJlc3Npb25cblx0XHR9O1xuXHR9LFxuXHRnZXRBZ2dyZWdhdGlvbkJpbmRpbmc6IGZ1bmN0aW9uIChcblx0XHRjaGFydEFubm90YXRpb25zOiBDaGFydCxcblx0XHRjb2xsZWN0aW9uOiBEYXRhTW9kZWxPYmplY3RQYXRoLFxuXHRcdGNvbnRleHRQYXRoOiBDb250ZXh0LFxuXHRcdHRleHRBc3NvY2lhdGlvbj86IFBhdGhBbm5vdGF0aW9uRXhwcmVzc2lvbjxzdHJpbmc+LFxuXHRcdGRpbWVuc2lvblR5cGU/OiBzdHJpbmcsXG5cdFx0c29ydE9yZGVyPzogU29ydE9yZGVyLFxuXHRcdHNlbGVjdGlvblZhcmlhbnQ/OiBEYXRhTW9kZWxPYmplY3RQYXRoLFxuXHRcdGN1c3RvbUFnZ3JlZ2F0ZT86IGJvb2xlYW4sXG5cdFx0YWdncmVnYXRpb24/OiBBZ2dyZWdhdGVkUHJvcGVydHlUeXBlLFxuXHRcdFVvTUhhc0N1c3RvbUFnZ3JlZ2F0ZT86IGJvb2xlYW4sXG5cdFx0cGFyYW1ldGVycz86IEFycmF5PHN0cmluZz4sXG5cdFx0ZmlsdGVyQmFyQ29udGV4dD86IENvbnRleHQsXG5cdFx0ZHJhZnRTdXBwb3J0ZWQ/OiBib29sZWFuLFxuXHRcdGNoYXJ0TWVhc3VyZT86IHN0cmluZ1xuXHQpIHtcblx0XHRjb25zdCBzZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbiA9IHNlbGVjdGlvblZhcmlhbnQ/LnRhcmdldE9iamVjdDtcblx0XHRjb25zdCBlbnRpdHlUeXBlID0gZmlsdGVyQmFyQ29udGV4dCA/IGZpbHRlckJhckNvbnRleHQuZ2V0UGF0aCgpIDogXCJcIjtcblx0XHRjb25zdCBlbnRpdHlTZXRQYXRoID0gY29udGV4dFBhdGguZ2V0UGF0aCgpO1xuXHRcdGNvbnN0IGRpbWVuc2lvbiA9IGNoYXJ0QW5ub3RhdGlvbnMuRGltZW5zaW9uc1swXS52YWx1ZTtcblx0XHRjb25zdCBmaWx0ZXJzID0gW107XG5cdFx0bGV0IGZpbHRlckNvbmRpdGlvbnM7XG5cdFx0bGV0IGNvbGxlY3Rpb25OYW1lID0gdGhpcy5fZ2V0Q29sbGVjdGlvbk5hbWUoY29sbGVjdGlvbiwgY29udGV4dFBhdGgsIHBhcmFtZXRlcnMpO1xuXHRcdGNvbnN0IFVPTTogUGF0aEFubm90YXRpb25FeHByZXNzaW9uPHN0cmluZz4gfCBzdHJpbmcgfCB1bmRlZmluZWQgPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldFVvTShcblx0XHRcdGNoYXJ0QW5ub3RhdGlvbnMsXG5cdFx0XHRjb2xsZWN0aW9uLFxuXHRcdFx0dW5kZWZpbmVkLFxuXHRcdFx0Y3VzdG9tQWdncmVnYXRlLFxuXHRcdFx0YWdncmVnYXRpb25cblx0XHQpO1xuXHRcdGNvbnN0IG1ldGFNb2RlbCA9IGNvbnRleHRQYXRoLmdldE1vZGVsKCk7XG5cdFx0aWYgKGRyYWZ0U3VwcG9ydGVkKSB7XG5cdFx0XHRmaWx0ZXJzLnB1c2goe1xuXHRcdFx0XHRvcGVyYXRvcjogXCJFUVwiLFxuXHRcdFx0XHR2YWx1ZTE6IFwidHJ1ZVwiLFxuXHRcdFx0XHR2YWx1ZTI6IG51bGwsXG5cdFx0XHRcdHBhdGg6IFwiSXNBY3RpdmVFbnRpdHlcIixcblx0XHRcdFx0aXNQYXJhbWV0ZXI6IHRydWVcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoc2VsZWN0aW9uVmFyaWFudEFubm90YXRpb24pIHtcblx0XHRcdGZpbHRlckNvbmRpdGlvbnMgPSBnZXRGaWx0ZXJzQ29uZGl0aW9uc0Zyb21TZWxlY3Rpb25WYXJpYW50KFxuXHRcdFx0XHRlbnRpdHlTZXRQYXRoLFxuXHRcdFx0XHRtZXRhTW9kZWwgYXMgdW5rbm93biBhcyBPRGF0YU1ldGFNb2RlbCxcblx0XHRcdFx0c2VsZWN0aW9uVmFyaWFudEFubm90YXRpb24sXG5cdFx0XHRcdFZpc3VhbEZpbHRlclV0aWxzLmdldEN1c3RvbUNvbmRpdGlvbnMuYmluZChWaXN1YWxGaWx0ZXJVdGlscylcblx0XHRcdCk7XG5cdFx0XHRmb3IgKGNvbnN0IHBhdGggaW4gZmlsdGVyQ29uZGl0aW9ucykge1xuXHRcdFx0XHRjb25zdCBjb25kaXRpb25zID0gZmlsdGVyQ29uZGl0aW9uc1twYXRoXTtcblx0XHRcdFx0Y29uZGl0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb25kaXRpb246IEZpbHRlckNvbmRpdGlvbnMpIHtcblx0XHRcdFx0XHRpZiAoIWNvbmRpdGlvbi5pc1BhcmFtZXRlcikge1xuXHRcdFx0XHRcdFx0ZmlsdGVycy5wdXNoKGNvbmRpdGlvbik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGVudGl0eVR5cGUgIT09IGAke2NvbGxlY3Rpb25OYW1lfS9gICYmIHBhcmFtZXRlcnMgJiYgcGFyYW1ldGVycy5sZW5ndGggJiYgZmlsdGVyQ29uZGl0aW9ucykge1xuXHRcdFx0Y29uc3QgYmluZGluZ1BhdGggPSB0aGlzLl9nZXRCaW5kaW5nUGF0aEZvclBhcmFtZXRlcnMoZmlsdGVyQ29uZGl0aW9ucywgbWV0YU1vZGVsLCBjb2xsZWN0aW9uTmFtZSwgcGFyYW1ldGVycywgZW50aXR5U2V0UGF0aCk7XG5cdFx0XHRjb2xsZWN0aW9uTmFtZSA9IGJpbmRpbmdQYXRoO1xuXHRcdH1cblx0XHRjb25zdCBVT01BZ2dyZWdhdGlvbkV4cHJlc3Npb24gPSB0aGlzLl9nZXRVT01BZ2dyZWdhdGlvbkV4cHJlc3Npb24oY3VzdG9tQWdncmVnYXRlLCBVb01IYXNDdXN0b21BZ2dyZWdhdGUsIFVPTSwgYWdncmVnYXRpb24pO1xuXHRcdGNvbnN0IGFnZ3JlZ2F0aW9uRXhwcmVzc2lvbiA9IFVPTUFnZ3JlZ2F0aW9uRXhwcmVzc2lvbi5hZ2dyZWdhdGlvbkV4cHJlc3Npb247XG5cdFx0Y29uc3QgVU9NRXhwcmVzc2lvbiA9IFVPTUFnZ3JlZ2F0aW9uRXhwcmVzc2lvbi5VT01FeHByZXNzaW9uO1xuXHRcdGNvbnN0IHRleHRBc3NvY2lhdGlvbkV4cHJlc3Npb24gPSB0ZXh0QXNzb2NpYXRpb24gPyBcIicgOiB7ICdhZGRpdGlvbmFsbHknIDogWydcIiArIHRleHRBc3NvY2lhdGlvbi5wYXRoICsgXCInXSB9XCIgOiBcIicgOiB7IH1cIjtcblx0XHRjb25zdCBmaWx0ZXJFeHByZXNzaW9uID0gSlNPTi5zdHJpbmdpZnkoZmlsdGVycyk7XG5cdFx0cmV0dXJuIChcblx0XHRcdFwie3BhdGg6ICdcIiArXG5cdFx0XHRjb2xsZWN0aW9uTmFtZSArXG5cdFx0XHRcIicsIHRlbXBsYXRlU2hhcmVhYmxlOiB0cnVlLCBzdXNwZW5kZWQgOiB0cnVlLCAnZmlsdGVycycgOiBcIiArXG5cdFx0XHRmaWx0ZXJFeHByZXNzaW9uICtcblx0XHRcdFwiLCdwYXJhbWV0ZXJzJyA6IHtcIiArXG5cdFx0XHRJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldFNvcnRPcmRlcihjaGFydEFubm90YXRpb25zLCBkaW1lbnNpb25UeXBlLCBzb3J0T3JkZXIsIGNoYXJ0TWVhc3VyZSkgK1xuXHRcdFx0XCIsICckJGFnZ3JlZ2F0aW9uJyA6IHsnYWdncmVnYXRlJyA6IHsnXCIgK1xuXHRcdFx0Y2hhcnRNZWFzdXJlICtcblx0XHRcdFwiJyA6IFwiICtcblx0XHRcdGFnZ3JlZ2F0aW9uRXhwcmVzc2lvbiArXG5cdFx0XHRcIn0sJ2dyb3VwJyA6IHsnXCIgK1xuXHRcdFx0ZGltZW5zaW9uICtcblx0XHRcdHRleHRBc3NvY2lhdGlvbkV4cHJlc3Npb24gK1xuXHRcdFx0VU9NRXhwcmVzc2lvbiArXG5cdFx0XHRcIn0gfSB9XCIgK1xuXHRcdFx0SW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRNYXhJdGVtcyhjaGFydEFubm90YXRpb25zKSArXG5cdFx0XHRcIn1cIlxuXHRcdCk7XG5cdH0sXG5cdF9nZXRPcmRlckV4cHJlc3Npb25Gcm9tTWVhc3VyZTogZnVuY3Rpb24gKHNvcnRPcmRlcj86IFNvcnRPcmRlciwgY2hhcnRNZWFzdXJlPzogc3RyaW5nKSB7XG5cdFx0bGV0IHNvcnRQcm9wZXJ0eU5hbWU7XG5cdFx0aWYgKHNvcnRPcmRlciAmJiBzb3J0T3JkZXIubGVuZ3RoKSB7XG5cdFx0XHRpZiAoc29ydE9yZGVyWzBdLkR5bmFtaWNQcm9wZXJ0eSkge1xuXHRcdFx0XHRzb3J0UHJvcGVydHlOYW1lID0gKHNvcnRPcmRlclswXS5EeW5hbWljUHJvcGVydHkuJHRhcmdldCBhcyBBZ2dyZWdhdGVkUHJvcGVydHkpPy5OYW1lO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c29ydFByb3BlcnR5TmFtZSA9IHNvcnRPcmRlclswXS5Qcm9wZXJ0eT8udmFsdWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAoc29ydFByb3BlcnR5TmFtZSA9PT0gY2hhcnRNZWFzdXJlKSB7XG5cdFx0XHRcdHJldHVybiBcIickb3JkZXJieScgOiAnXCIgKyBjaGFydE1lYXN1cmUgKyAoc29ydE9yZGVyWzBdLkRlc2NlbmRpbmcgPyBcIiBkZXNjJ1wiIDogXCInXCIpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIFwiJyRvcmRlcmJ5JyA6ICdcIiArIGNoYXJ0TWVhc3VyZSArIFwiIGRlc2MnXCI7XG5cdFx0fVxuXHRcdHJldHVybiBcIickb3JkZXJieScgOiAnXCIgKyBjaGFydE1lYXN1cmUgKyBcIiBkZXNjJ1wiO1xuXHR9LFxuXHRnZXRTb3J0T3JkZXI6IGZ1bmN0aW9uIChjaGFydEFubm90YXRpb25zOiBDaGFydCwgZGltZW5zaW9uVHlwZT86IHN0cmluZywgc29ydE9yZGVyPzogU29ydE9yZGVyLCBjaGFydE1lYXN1cmU/OiBzdHJpbmcpIHtcblx0XHRpZiAoY2hhcnRBbm5vdGF0aW9ucy5DaGFydFR5cGUgPT09IFwiVUkuQ2hhcnRUeXBlL0RvbnV0XCIgfHwgY2hhcnRBbm5vdGF0aW9ucy5DaGFydFR5cGUgPT09IFwiVUkuQ2hhcnRUeXBlL0JhclwiKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fZ2V0T3JkZXJFeHByZXNzaW9uRnJvbU1lYXN1cmUoc29ydE9yZGVyLCBjaGFydE1lYXN1cmUpO1xuXHRcdH0gZWxzZSBpZiAoZGltZW5zaW9uVHlwZSA9PT0gXCJFZG0uRGF0ZVwiIHx8IGRpbWVuc2lvblR5cGUgPT09IFwiRWRtLlRpbWVcIiB8fCBkaW1lbnNpb25UeXBlID09PSBcIkVkbS5EYXRlVGltZU9mZnNldFwiKSB7XG5cdFx0XHRyZXR1cm4gXCInJG9yZGVyYnknIDogJ1wiICsgY2hhcnRBbm5vdGF0aW9ucy5EaW1lbnNpb25zWzBdLnZhbHVlICsgXCInXCI7XG5cdFx0fSBlbHNlIGlmIChcblx0XHRcdHNvcnRPcmRlciAmJlxuXHRcdFx0c29ydE9yZGVyLmxlbmd0aCAmJlxuXHRcdFx0KHNvcnRPcmRlclswXS5Qcm9wZXJ0eT8uJHRhcmdldCBhcyB1bmtub3duIGFzIFBhdGhBbm5vdGF0aW9uRXhwcmVzc2lvbjxzdHJpbmc+KT8ucGF0aCA9PT0gY2hhcnRBbm5vdGF0aW9ucy5EaW1lbnNpb25zWzBdLnZhbHVlXG5cdFx0KSB7XG5cdFx0XHRyZXR1cm4gXCInJG9yZGVyYnknIDogJ1wiICsgc29ydE9yZGVyWzBdLlByb3BlcnR5Py4kdGFyZ2V0Py5uYW1lICsgKHNvcnRPcmRlclswXS5EZXNjZW5kaW5nID8gXCIgZGVzYydcIiA6IFwiJ1wiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFwiJyRvcmRlcmJ5JyA6ICdcIiArIGNoYXJ0QW5ub3RhdGlvbnMuRGltZW5zaW9uc1swXS4kdGFyZ2V0Py5uYW1lICsgXCInXCI7XG5cdFx0fVxuXHR9LFxuXHRnZXRNYXhJdGVtczogZnVuY3Rpb24gKGNoYXJ0QW5ub3RhdGlvbnM6IENoYXJ0KSB7XG5cdFx0aWYgKGNoYXJ0QW5ub3RhdGlvbnMuQ2hhcnRUeXBlID09PSBcIlVJLkNoYXJ0VHlwZS9CYXJcIikge1xuXHRcdFx0cmV0dXJuIFwiLCdzdGFydEluZGV4JyA6IDAsJ2xlbmd0aCcgOiAzXCI7XG5cdFx0fSBlbHNlIGlmIChjaGFydEFubm90YXRpb25zLkNoYXJ0VHlwZSA9PT0gXCJVSS5DaGFydFR5cGUvTGluZVwiKSB7XG5cdFx0XHRyZXR1cm4gXCIsJ3N0YXJ0SW5kZXgnIDogMCwnbGVuZ3RoJyA6IDZcIjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIFwiXCI7XG5cdFx0fVxuXHR9LFxuXHRnZXRDb2xvckJpbmRpbmc6IGZ1bmN0aW9uIChkYXRhUG9pbnQ6IERhdGFQb2ludCwgZGltZW5zaW9uOiBQcm9wZXJ0eVBhdGgpIHtcblx0XHRjb25zdCB2YWx1ZUNyaXRpY2FsaXR5ID0gZGltZW5zaW9uPy4kdGFyZ2V0Py5hbm5vdGF0aW9ucz8uVUk/LlZhbHVlQ3JpdGljYWxpdHk7XG5cdFx0aWYgKGRhdGFQb2ludD8uQ3JpdGljYWxpdHkpIHtcblx0XHRcdHJldHVybiBidWlsZEV4cHJlc3Npb25Gb3JDcml0aWNhbGl0eUNvbG9yTWljcm9DaGFydChkYXRhUG9pbnQpO1xuXHRcdH0gZWxzZSBpZiAoZGF0YVBvaW50Py5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uKSB7XG5cdFx0XHRjb25zdCBvRGlyZWN0aW9uID0gZGF0YVBvaW50LkNyaXRpY2FsaXR5Q2FsY3VsYXRpb24uSW1wcm92ZW1lbnREaXJlY3Rpb247XG5cdFx0XHRjb25zdCBvRGF0YVBvaW50VmFsdWUgPSBkYXRhUG9pbnQuVmFsdWU7XG5cdFx0XHRjb25zdCBvRGV2aWF0aW9uUmFuZ2VMb3dWYWx1ZSA9IGRhdGFQb2ludC5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uLkRldmlhdGlvblJhbmdlTG93VmFsdWUudmFsdWVPZigpO1xuXHRcdFx0Y29uc3Qgb1RvbGVyYW5jZVJhbmdlTG93VmFsdWUgPSBkYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5Ub2xlcmFuY2VSYW5nZUxvd1ZhbHVlLnZhbHVlT2YoKTtcblx0XHRcdGNvbnN0IG9BY2NlcHRhbmNlUmFuZ2VMb3dWYWx1ZSA9IGRhdGFQb2ludC5Dcml0aWNhbGl0eUNhbGN1bGF0aW9uLkFjY2VwdGFuY2VSYW5nZUxvd1ZhbHVlLnZhbHVlT2YoKTtcblx0XHRcdGNvbnN0IG9BY2NlcHRhbmNlUmFuZ2VIaWdoVmFsdWUgPSBkYXRhUG9pbnQuQ3JpdGljYWxpdHlDYWxjdWxhdGlvbi5BY2NlcHRhbmNlUmFuZ2VIaWdoVmFsdWUudmFsdWVPZigpO1xuXHRcdFx0Y29uc3Qgb1RvbGVyYW5jZVJhbmdlSGlnaFZhbHVlID0gZGF0YVBvaW50LkNyaXRpY2FsaXR5Q2FsY3VsYXRpb24uVG9sZXJhbmNlUmFuZ2VIaWdoVmFsdWUudmFsdWVPZigpO1xuXHRcdFx0Y29uc3Qgb0RldmlhdGlvblJhbmdlSGlnaFZhbHVlID0gZGF0YVBvaW50LkNyaXRpY2FsaXR5Q2FsY3VsYXRpb24uRGV2aWF0aW9uUmFuZ2VIaWdoVmFsdWUudmFsdWVPZigpO1xuXHRcdFx0cmV0dXJuIENvbW1vbkhlbHBlci5nZXRDcml0aWNhbGl0eUNhbGN1bGF0aW9uQmluZGluZyhcblx0XHRcdFx0b0RpcmVjdGlvbixcblx0XHRcdFx0b0RhdGFQb2ludFZhbHVlLFxuXHRcdFx0XHRvRGV2aWF0aW9uUmFuZ2VMb3dWYWx1ZSxcblx0XHRcdFx0b1RvbGVyYW5jZVJhbmdlTG93VmFsdWUsXG5cdFx0XHRcdG9BY2NlcHRhbmNlUmFuZ2VMb3dWYWx1ZSxcblx0XHRcdFx0b0FjY2VwdGFuY2VSYW5nZUhpZ2hWYWx1ZSxcblx0XHRcdFx0b1RvbGVyYW5jZVJhbmdlSGlnaFZhbHVlLFxuXHRcdFx0XHRvRGV2aWF0aW9uUmFuZ2VIaWdoVmFsdWVcblx0XHRcdCk7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZUNyaXRpY2FsaXR5ICYmIHZhbHVlQ3JpdGljYWxpdHkubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm4gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRWYWx1ZUNyaXRpY2FsaXR5KGRpbWVuc2lvbi52YWx1ZSwgdmFsdWVDcml0aWNhbGl0eSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9LFxuXHRnZXRWYWx1ZUNyaXRpY2FsaXR5OiBmdW5jdGlvbiAoZGltZW5zaW9uOiBzdHJpbmcsIHZhbHVlQ3JpdGljYWxpdHk6IEFycmF5PFZhbHVlQ3JpdGljYWxpdHlUeXBlPikge1xuXHRcdGxldCByZXN1bHQ7XG5cdFx0Y29uc3QgdmFsdWVzOiBzdHJpbmdbXSA9IFtdO1xuXHRcdGlmICh2YWx1ZUNyaXRpY2FsaXR5ICYmIHZhbHVlQ3JpdGljYWxpdHkubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFsdWVDcml0aWNhbGl0eS5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZUNyaXRpY2FsaXR5VHlwZTogVmFsdWVDcml0aWNhbGl0eVR5cGUpIHtcblx0XHRcdFx0aWYgKHZhbHVlQ3JpdGljYWxpdHlUeXBlLlZhbHVlICYmIHZhbHVlQ3JpdGljYWxpdHlUeXBlLkNyaXRpY2FsaXR5KSB7XG5cdFx0XHRcdFx0Y29uc3QgdmFsdWUgPVxuXHRcdFx0XHRcdFx0XCIke1wiICtcblx0XHRcdFx0XHRcdGRpbWVuc2lvbiArXG5cdFx0XHRcdFx0XHRcIn0gPT09ICdcIiArXG5cdFx0XHRcdFx0XHR2YWx1ZUNyaXRpY2FsaXR5VHlwZS5WYWx1ZSArXG5cdFx0XHRcdFx0XHRcIicgPyAnXCIgK1xuXHRcdFx0XHRcdFx0SW50ZXJhY3RpdmVDaGFydEhlbHBlci5fZ2V0Q3JpdGljYWxpdHlGcm9tRW51bSh2YWx1ZUNyaXRpY2FsaXR5VHlwZS5Dcml0aWNhbGl0eSkgK1xuXHRcdFx0XHRcdFx0XCInXCI7XG5cdFx0XHRcdFx0dmFsdWVzLnB1c2godmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJlc3VsdCA9IHZhbHVlcy5sZW5ndGggPiAwICYmIHZhbHVlcy5qb2luKFwiIDogXCIpICsgXCIgOiB1bmRlZmluZWRcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdCA/IFwiez0gXCIgKyByZXN1bHQgKyBcIiB9XCIgOiB1bmRlZmluZWQ7XG5cdH0sXG5cdC8qKlxuXHQgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGNyaXRpY2FsaXR5IGluZGljYXRvciBmcm9tIGFubm90YXRpb25zIGlmIGNyaXRpY2FsaXR5IGlzIEVudW1NZW1iZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSBjcml0aWNhbGl0eSBDcml0aWNhbGl0eSBwcm92aWRlZCBpbiB0aGUgYW5ub3RhdGlvbnNcblx0ICogQHJldHVybnMgUmV0dXJuIHRoZSBpbmRpY2F0b3IgZm9yIGNyaXRpY2FsaXR5XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRfZ2V0Q3JpdGljYWxpdHlGcm9tRW51bTogZnVuY3Rpb24gKGNyaXRpY2FsaXR5OiBzdHJpbmcpIHtcblx0XHRjb25zdCB2YWx1ZUNvbG9yID0gbUxpYnJhcnkuVmFsdWVDb2xvcjtcblx0XHRsZXQgaW5kaWNhdG9yO1xuXHRcdGlmIChjcml0aWNhbGl0eSA9PT0gXCJVSS5Dcml0aWNhbGl0eVR5cGUvTmVnYXRpdmVcIikge1xuXHRcdFx0aW5kaWNhdG9yID0gdmFsdWVDb2xvci5FcnJvcjtcblx0XHR9IGVsc2UgaWYgKGNyaXRpY2FsaXR5ID09PSBcIlVJLkNyaXRpY2FsaXR5VHlwZS9Qb3NpdGl2ZVwiKSB7XG5cdFx0XHRpbmRpY2F0b3IgPSB2YWx1ZUNvbG9yLkdvb2Q7XG5cdFx0fSBlbHNlIGlmIChjcml0aWNhbGl0eSA9PT0gXCJVSS5Dcml0aWNhbGl0eVR5cGUvQ3JpdGljYWxcIikge1xuXHRcdFx0aW5kaWNhdG9yID0gdmFsdWVDb2xvci5Dcml0aWNhbDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aW5kaWNhdG9yID0gdmFsdWVDb2xvci5OZXV0cmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gaW5kaWNhdG9yO1xuXHR9LFxuXHRnZXRTY2FsZVVvTVRpdGxlOiBmdW5jdGlvbiAoXG5cdFx0Y2hhcnRBbm5vdGF0aW9uPzogQ2hhcnQsXG5cdFx0Y29sbGVjdGlvbj86IERhdGFNb2RlbE9iamVjdFBhdGgsXG5cdFx0bWV0YVBhdGg/OiBzdHJpbmcsXG5cdFx0Y3VzdG9tQWdncmVnYXRlPzogYm9vbGVhbixcblx0XHRhZ2dyZWdhdGlvbj86IEFnZ3JlZ2F0ZWRQcm9wZXJ0eVR5cGUsXG5cdFx0c2VwZXJhdG9yPzogc3RyaW5nLFxuXHRcdHRvb2xUaXA/OiBib29sZWFuXG5cdCkge1xuXHRcdGNvbnN0IHNjYWxlRmFjdG9yID0gY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlQXR0cmlidXRlc1xuXHRcdFx0PyBjaGFydEFubm90YXRpb24uTWVhc3VyZUF0dHJpYnV0ZXNbMF0/LkRhdGFQb2ludD8uJHRhcmdldD8uVmFsdWVGb3JtYXQ/LlNjYWxlRmFjdG9yPy52YWx1ZU9mKClcblx0XHRcdDogdW5kZWZpbmVkO1xuXHRcdGNvbnN0IGluZm9QYXRoID0gZ2VuZXJhdGUoW21ldGFQYXRoXSk7XG5cdFx0Y29uc3QgZml4ZWRJbnRlZ2VyID0gTnVtYmVyRm9ybWF0LmdldEludGVnZXJJbnN0YW5jZSh7XG5cdFx0XHRzdHlsZTogXCJzaG9ydFwiLFxuXHRcdFx0c2hvd1NjYWxlOiBmYWxzZSxcblx0XHRcdHNob3J0UmVmTnVtYmVyOiBzY2FsZUZhY3RvciBhcyBudW1iZXJcblx0XHR9KTtcblx0XHRsZXQgc2NhbGUgPSBmaXhlZEludGVnZXIuZ2V0U2NhbGUoKTtcblx0XHRsZXQgVU9NID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRVb00oY2hhcnRBbm5vdGF0aW9uLCBjb2xsZWN0aW9uLCB1bmRlZmluZWQsIGN1c3RvbUFnZ3JlZ2F0ZSwgYWdncmVnYXRpb24pO1xuXHRcdFVPTSA9IFVPTSAmJiAoKFVPTSBhcyBQYXRoQW5ub3RhdGlvbkV4cHJlc3Npb248c3RyaW5nPikucGF0aCA/IFwiJHtpbnRlcm5hbD51b20vXCIgKyBpbmZvUGF0aCArIFwifVwiIDogXCInXCIgKyBVT00gKyBcIidcIik7XG5cdFx0c2NhbGUgPSBzY2FsZSA/IFwiJ1wiICsgc2NhbGUgKyBcIidcIiA6IFwiJHtpbnRlcm5hbD5zY2FsZWZhY3Rvci9cIiArIGluZm9QYXRoICsgXCJ9XCI7XG5cdFx0aWYgKCFzZXBlcmF0b3IpIHtcblx0XHRcdHNlcGVyYXRvciA9IFwifFwiO1xuXHRcdH1cblx0XHRzZXBlcmF0b3IgPSBcIicgXCIgKyBzZXBlcmF0b3IgKyBcIiAnICsgXCI7XG5cdFx0Y29uc3QgZXhwcmVzc2lvbiA9IHNjYWxlICYmIFVPTSA/IHNlcGVyYXRvciArIHNjYWxlICsgXCIgKyAnICcgKyBcIiArIFVPTSA6IHNlcGVyYXRvciArIChzY2FsZSB8fCBVT00pO1xuXHRcdHJldHVybiB0b29sVGlwID8gZXhwcmVzc2lvbiA6IFwiez0gXCIgKyBleHByZXNzaW9uICsgXCJ9XCI7XG5cdH0sXG5cdGdldE1lYXN1cmVEaW1lbnNpb25UaXRsZTogZnVuY3Rpb24gKGNoYXJ0QW5ub3RhdGlvbj86IENoYXJ0LCBjdXN0b21BZ2dyZWdhdGU/OiBib29sZWFuLCBhZ2dyZWdhdGlvbj86IEFnZ3JlZ2F0ZWRQcm9wZXJ0eVR5cGUpIHtcblx0XHRsZXQgbWVhc3VyZUxhYmVsO1xuXHRcdGxldCBtZWFzdXJlUGF0aDtcblx0XHRpZiAoY3VzdG9tQWdncmVnYXRlKSB7XG5cdFx0XHRtZWFzdXJlUGF0aCA9IGNoYXJ0QW5ub3RhdGlvbj8uTWVhc3VyZXNbMF0/LiR0YXJnZXQ/Lm5hbWU7XG5cdFx0fVxuXHRcdGlmIChjaGFydEFubm90YXRpb24/LkR5bmFtaWNNZWFzdXJlcyAmJiBjaGFydEFubm90YXRpb24uRHluYW1pY01lYXN1cmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdG1lYXN1cmVQYXRoID0gKGNoYXJ0QW5ub3RhdGlvbi5EeW5hbWljTWVhc3VyZXNbMF0/LiR0YXJnZXQgYXMgQWdncmVnYXRlZFByb3BlcnR5VHlwZSk/LkFnZ3JlZ2F0YWJsZVByb3BlcnR5Py52YWx1ZTtcblx0XHR9IGVsc2UgaWYgKCFjdXN0b21BZ2dyZWdhdGUgJiYgY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlcyAmJiBjaGFydEFubm90YXRpb24/Lk1lYXN1cmVzLmxlbmd0aCA+IDApIHtcblx0XHRcdG1lYXN1cmVQYXRoID0gY2hhcnRBbm5vdGF0aW9uLk1lYXN1cmVzWzBdPy4kdGFyZ2V0Py5uYW1lO1xuXHRcdH1cblx0XHRjb25zdCBkaW1lbnNpb25QYXRoID0gY2hhcnRBbm5vdGF0aW9uPy5EaW1lbnNpb25zWzBdPy52YWx1ZSBhcyB1bmtub3duIGFzIExhYmVsO1xuXHRcdGxldCBkaW1lbnNpb25MYWJlbCA9IGNoYXJ0QW5ub3RhdGlvbj8uRGltZW5zaW9uc1swXT8uJHRhcmdldD8uYW5ub3RhdGlvbnM/LkNvbW1vbj8uTGFiZWw7XG5cdFx0aWYgKCFjdXN0b21BZ2dyZWdhdGUgJiYgYWdncmVnYXRpb24pIHtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBsYWJlbCBpcyBwYXJ0IG9mIGFnZ3JlZ2F0ZWQgcHJvcGVydGllcyAoVHJhbnNmb3JtYXRpb24gYWdncmVnYXRlcylcblx0XHRcdG1lYXN1cmVMYWJlbCA9IGFnZ3JlZ2F0aW9uLmFubm90YXRpb25zICYmIGFnZ3JlZ2F0aW9uLmFubm90YXRpb25zLkNvbW1vbiAmJiBhZ2dyZWdhdGlvbi5hbm5vdGF0aW9ucy5Db21tb24uTGFiZWw7XG5cdFx0XHRpZiAobWVhc3VyZUxhYmVsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0bWVhc3VyZUxhYmVsID0gY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlc1swXT8uJHRhcmdldD8uYW5ub3RhdGlvbnM/LkNvbW1vbj8uTGFiZWw7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1lYXN1cmVMYWJlbCA9IGNoYXJ0QW5ub3RhdGlvbj8uTWVhc3VyZXNbMF0/LiR0YXJnZXQ/LmFubm90YXRpb25zPy5Db21tb24/LkxhYmVsO1xuXHRcdH1cblx0XHRpZiAobWVhc3VyZUxhYmVsID09PSB1bmRlZmluZWQpIHtcblx0XHRcdG1lYXN1cmVMYWJlbCA9IG1lYXN1cmVQYXRoO1xuXHRcdH1cblx0XHRpZiAoZGltZW5zaW9uTGFiZWwgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0ZGltZW5zaW9uTGFiZWwgPSBkaW1lbnNpb25QYXRoO1xuXHRcdH1cblx0XHRyZXR1cm4gQ29yZS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoXCJzYXAuZmUubWFjcm9zXCIpLmdldFRleHQoXCJNX0lOVEVSQUNUSVZFX0NIQVJUX0hFTFBFUl9WSVNVQUxGSUxURVJfTUVBU1VSRV9ESU1FTlNJT05fVElUTEVcIiwgW1xuXHRcdFx0bWVhc3VyZUxhYmVsLFxuXHRcdFx0ZGltZW5zaW9uTGFiZWxcblx0XHRdKTtcblx0fSxcblxuXHRnZXRUb29sVGlwOiBmdW5jdGlvbiAoXG5cdFx0Y2hhcnRBbm5vdGF0aW9uPzogQ2hhcnQsXG5cdFx0Y29sbGVjdGlvbj86IERhdGFNb2RlbE9iamVjdFBhdGgsXG5cdFx0bWV0YVBhdGg/OiBzdHJpbmcsXG5cdFx0Y3VzdG9tQWdncmVnYXRlPzogYm9vbGVhbixcblx0XHRhZ2dyZWdhdGlvbj86IEFnZ3JlZ2F0ZWRQcm9wZXJ0eVR5cGUsXG5cdFx0cmVuZGVyTGluZUNoYXJ0PzogYm9vbGVhbiB8IHN0cmluZ1xuXHQpIHtcblx0XHRjb25zdCBjaGFydFR5cGUgPSBjaGFydEFubm90YXRpb24gJiYgY2hhcnRBbm5vdGF0aW9uW1wiQ2hhcnRUeXBlXCJdO1xuXHRcdGxldCBtZWFzdXJlRGltZW5zaW9uVG9vbFRpcCA9IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0TWVhc3VyZURpbWVuc2lvblRpdGxlKGNoYXJ0QW5ub3RhdGlvbiwgY3VzdG9tQWdncmVnYXRlLCBhZ2dyZWdhdGlvbik7XG5cdFx0bWVhc3VyZURpbWVuc2lvblRvb2xUaXAgPSBDb21tb25IZWxwZXIuZXNjYXBlU2luZ2xlUXVvdGVzKG1lYXN1cmVEaW1lbnNpb25Ub29sVGlwKTtcblx0XHRpZiAocmVuZGVyTGluZUNoYXJ0ID09PSBcImZhbHNlXCIgJiYgY2hhcnRUeXBlID09PSBcIlVJLkNoYXJ0VHlwZS9MaW5lXCIpIHtcblx0XHRcdHJldHVybiBgez0gJyR7bWVhc3VyZURpbWVuc2lvblRvb2xUaXB9J31gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHNlcGVyYXRvciA9IENvcmUuZ2V0TGlicmFyeVJlc291cmNlQnVuZGxlKFwic2FwLmZlLm1hY3Jvc1wiKS5nZXRUZXh0KFxuXHRcdFx0XCJNX0lOVEVSQUNUSVZFX0NIQVJUX0hFTFBFUl9WSVNVQUxGSUxURVJfVE9PTFRJUF9TRVBFUkFUT1JcIlxuXHRcdCk7XG5cdFx0Y29uc3QgaW5mb1BhdGggPSBnZW5lcmF0ZShbbWV0YVBhdGhdKTtcblx0XHRjb25zdCBzY2FsZVVPTVRvb2x0aXAgPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldFNjYWxlVW9NVGl0bGUoXG5cdFx0XHRjaGFydEFubm90YXRpb24sXG5cdFx0XHRjb2xsZWN0aW9uLFxuXHRcdFx0aW5mb1BhdGgsXG5cdFx0XHRjdXN0b21BZ2dyZWdhdGUsXG5cdFx0XHRhZ2dyZWdhdGlvbixcblx0XHRcdHNlcGVyYXRvcixcblx0XHRcdHRydWVcblx0XHQpO1xuXHRcdHJldHVybiBcIns9ICdcIiArIG1lYXN1cmVEaW1lbnNpb25Ub29sVGlwICsgKHNjYWxlVU9NVG9vbHRpcCA/IFwiJyArIFwiICsgc2NhbGVVT01Ub29sdGlwIDogXCInXCIpICsgXCJ9XCI7XG5cdH0sXG5cdF9nZXRVT006IGZ1bmN0aW9uIChcblx0XHRVT01PYmplY3RQYXRoPzogUGF0aEFubm90YXRpb25FeHByZXNzaW9uPHN0cmluZz4sXG5cdFx0VU9NPzogc3RyaW5nLFxuXHRcdGNvbGxlY3Rpb24/OiBEYXRhTW9kZWxPYmplY3RQYXRoLFxuXHRcdGN1c3RvbURhdGE/OiBib29sZWFuLFxuXHRcdGFnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aD86IHN0cmluZ1xuXHQpIHtcblx0XHRjb25zdCBVT01PYmplY3Q6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XG5cdFx0Y29uc3QgY29sbGVjdGlvbk9iamVjdCA9IGNvbGxlY3Rpb24/LnRhcmdldE9iamVjdDtcblx0XHRpZiAoVU9NT2JqZWN0UGF0aCAmJiBVT00pIHtcblx0XHRcdC8vIGNoZWNrIGlmIHRoZSBVT00gaXMgcGFydCBvZiBNZWFzdXJlIGFubm90YXRpb25zKEN1c3RvbSBhZ2dyZWdhdGVzKVxuXHRcdFx0VU9NT2JqZWN0W1VPTV0gPSB7ICRQYXRoOiBVT01PYmplY3RQYXRoLnBhdGggfTtcblx0XHRcdHJldHVybiBjdXN0b21EYXRhICYmIFVPTU9iamVjdFBhdGgucGF0aCA/IEpTT04uc3RyaW5naWZ5KFVPTU9iamVjdCkgOiBVT01PYmplY3RQYXRoO1xuXHRcdH0gZWxzZSBpZiAoYWdncmVnYXRhYmxlUHJvcGVydHlQYXRoKSB7XG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgVU9NIGlzIHBhcnQgb2YgYmFzZSBwcm9wZXJ0eSBhbm5vdGF0aW9ucyhUcmFuc2Zvcm1hdGlvbiBhZ2dyZWdhdGVzKVxuXHRcdFx0Y29uc3QgZW50aXR5UHJvcGVydGllcyA9IGNvbGxlY3Rpb25PYmplY3QuZW50aXR5VHlwZVxuXHRcdFx0XHQ/IGNvbGxlY3Rpb25PYmplY3QuZW50aXR5VHlwZS5lbnRpdHlQcm9wZXJ0aWVzXG5cdFx0XHRcdDogY29sbGVjdGlvbk9iamVjdC50YXJnZXRUeXBlPy5lbnRpdHlQcm9wZXJ0aWVzO1xuXHRcdFx0Y29uc3QgcHJvcGVydHlBbm5vdGF0aW9ucyA9IGVudGl0eVByb3BlcnRpZXM/LmZpbmQoKHByb3BlcnR5OiBQcm9wZXJ0eSkgPT4gcHJvcGVydHkubmFtZSA9PSBhZ2dyZWdhdGFibGVQcm9wZXJ0eVBhdGgpO1xuXHRcdFx0aWYgKHByb3BlcnR5QW5ub3RhdGlvbnM/LmFubm90YXRpb25zPy5NZWFzdXJlcyAmJiBVT00pIHtcblx0XHRcdFx0VU9NT2JqZWN0UGF0aCA9IHByb3BlcnR5QW5ub3RhdGlvbnM/LmFubm90YXRpb25zPy5NZWFzdXJlc1tVT01dO1xuXHRcdFx0XHRVT01PYmplY3RbVU9NXSA9IHsgJFBhdGg6IFVPTU9iamVjdFBhdGg/LnBhdGggfTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBVT01PYmplY3RQYXRoICYmIGN1c3RvbURhdGEgJiYgVU9NT2JqZWN0UGF0aC5wYXRoID8gSlNPTi5zdHJpbmdpZnkoVU9NT2JqZWN0KSA6IFVPTU9iamVjdFBhdGg7XG5cdFx0fVxuXHR9LFxuXHRnZXRVb006IGZ1bmN0aW9uIChcblx0XHRjaGFydEFubm90YXRpb24/OiBDaGFydCxcblx0XHRjb2xsZWN0aW9uPzogRGF0YU1vZGVsT2JqZWN0UGF0aCxcblx0XHRjdXN0b21EYXRhPzogYm9vbGVhbixcblx0XHRjdXN0b21BZ2dyZWdhdGU/OiBib29sZWFuLFxuXHRcdGFnZ3JlZ2F0aW9uPzogQWdncmVnYXRlZFByb3BlcnR5VHlwZVxuXHQpIHtcblx0XHRsZXQgbWVhc3VyZTogTWVhc3VyZVR5cGUgPSB7fTtcblx0XHRpZiAoY3VzdG9tQWdncmVnYXRlKSB7XG5cdFx0XHRtZWFzdXJlID0gY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlc1swXSBhcyBNZWFzdXJlVHlwZTtcblx0XHR9XG5cdFx0aWYgKGNoYXJ0QW5ub3RhdGlvbj8uRHluYW1pY01lYXN1cmVzICYmIGNoYXJ0QW5ub3RhdGlvbi5EeW5hbWljTWVhc3VyZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0bWVhc3VyZSA9IChjaGFydEFubm90YXRpb24uRHluYW1pY01lYXN1cmVzWzBdPy4kdGFyZ2V0IGFzIEFnZ3JlZ2F0ZWRQcm9wZXJ0eVR5cGUpPy5BZ2dyZWdhdGFibGVQcm9wZXJ0eT8uJHRhcmdldD8uYW5ub3RhdGlvbnNcblx0XHRcdFx0Py5NZWFzdXJlcyBhcyBNZWFzdXJlVHlwZTtcblx0XHR9IGVsc2UgaWYgKCFjdXN0b21BZ2dyZWdhdGUgJiYgY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlcyAmJiBjaGFydEFubm90YXRpb24uTWVhc3VyZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0bWVhc3VyZSA9IGNoYXJ0QW5ub3RhdGlvbi5NZWFzdXJlc1swXTtcblx0XHR9XG5cdFx0Y29uc3QgSVNPQ3VycmVuY3kgPSBtZWFzdXJlPy5JU09DdXJyZW5jeTtcblx0XHRjb25zdCB1bml0ID0gbWVhc3VyZT8uVW5pdDtcblx0XHRsZXQgYWdncmVnYXRhYmxlUHJvcGVydHlQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cdFx0aWYgKCFjdXN0b21BZ2dyZWdhdGUgJiYgYWdncmVnYXRpb24pIHtcblx0XHRcdGFnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aCA9IGFnZ3JlZ2F0aW9uLkFnZ3JlZ2F0YWJsZVByb3BlcnR5ICYmIGFnZ3JlZ2F0aW9uLkFnZ3JlZ2F0YWJsZVByb3BlcnR5LnZhbHVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZ2dyZWdhdGFibGVQcm9wZXJ0eVBhdGggPSBtZWFzdXJlPy52YWx1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIChcblx0XHRcdHRoaXMuX2dldFVPTShJU09DdXJyZW5jeSwgXCJJU09DdXJyZW5jeVwiLCBjb2xsZWN0aW9uLCBjdXN0b21EYXRhLCBhZ2dyZWdhdGFibGVQcm9wZXJ0eVBhdGgpIHx8XG5cdFx0XHR0aGlzLl9nZXRVT00odW5pdCwgXCJVbml0XCIsIGNvbGxlY3Rpb24sIGN1c3RvbURhdGEsIGFnZ3JlZ2F0YWJsZVByb3BlcnR5UGF0aClcblx0XHQpO1xuXHR9LFxuXHRnZXRTY2FsZUZhY3RvcjogZnVuY3Rpb24gKHZhbHVlRm9ybWF0PzogTnVtYmVyRm9ybWF0VHlwZSkge1xuXHRcdGlmICh2YWx1ZUZvcm1hdCAmJiB2YWx1ZUZvcm1hdC5TY2FsZUZhY3Rvcikge1xuXHRcdFx0cmV0dXJuIHZhbHVlRm9ybWF0LlNjYWxlRmFjdG9yLnZhbHVlT2YoKTtcblx0XHR9XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fSxcblx0Z2V0VW9NVmlzaWJsaXR5OiBmdW5jdGlvbiAoY2hhcnRBbm5vdGF0aW9uPzogQ2hhcnQsIHNob3dFcnJvcj86IGJvb2xlYW4pIHtcblx0XHRjb25zdCBjaGFydFR5cGUgPSBjaGFydEFubm90YXRpb24gJiYgY2hhcnRBbm5vdGF0aW9uW1wiQ2hhcnRUeXBlXCJdO1xuXHRcdGlmIChzaG93RXJyb3IpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2UgaWYgKCEoY2hhcnRUeXBlID09PSBcIlVJLkNoYXJ0VHlwZS9CYXJcIiB8fCBjaGFydFR5cGUgPT09IFwiVUkuQ2hhcnRUeXBlL0xpbmVcIikpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9LFxuXHRnZXRJblBhcmFtZXRlckZpbHRlcnNCaW5kaW5nOiBmdW5jdGlvbiAoaW5QYXJhbWV0ZXJzOiBBcnJheTxQYXJhbWV0ZXJUeXBlPikge1xuXHRcdGlmIChpblBhcmFtZXRlcnMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cdFx0XHRsZXQgcGF0aHMgPSBcIlwiO1xuXHRcdFx0aW5QYXJhbWV0ZXJzLmZvckVhY2goZnVuY3Rpb24gKGluUGFyYW1ldGVyOiBQYXJhbWV0ZXJUeXBlKSB7XG5cdFx0XHRcdGlmIChpblBhcmFtZXRlci5sb2NhbERhdGFQcm9wZXJ0eSkge1xuXHRcdFx0XHRcdHBhcnRzLnB1c2goYHtwYXRoOickZmlsdGVycz4vY29uZGl0aW9ucy8ke2luUGFyYW1ldGVyLmxvY2FsRGF0YVByb3BlcnR5fSd9YCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdFx0aWYgKHBhcnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0cGF0aHMgPSBwYXJ0cy5qb2luKCk7XG5cdFx0XHRcdHJldHVybiBge3BhcnRzOlske3BhdGhzfV0sIGZvcm1hdHRlcjonc2FwLmZlLm1hY3Jvcy52aXN1YWxmaWx0ZXJzLlZpc3VhbEZpbHRlclJ1bnRpbWUuZ2V0RmlsdGVyc0Zyb21Db25kaXRpb25zJ31gO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdH0sXG5cblx0Z2V0ZmlsdGVyQ291bnRCaW5kaW5nOiBmdW5jdGlvbiAoY2hhcnRBbm5vdGF0aW9uPzogQ2hhcnQpIHtcblx0XHRjb25zdCBkaW1lbnNpb24gPSBjaGFydEFubm90YXRpb24/LkRpbWVuc2lvbnNbMF0/LiR0YXJnZXQ/Lm5hbWU7XG5cdFx0cmV0dXJuIChcblx0XHRcdFwie3BhdGg6JyRmaWx0ZXJzPi9jb25kaXRpb25zL1wiICsgZGltZW5zaW9uICsgXCInLCBmb3JtYXR0ZXI6J3NhcC5mZS5tYWNyb3MudmlzdWFsZmlsdGVycy5WaXN1YWxGaWx0ZXJSdW50aW1lLmdldEZpbHRlckNvdW50cyd9XCJcblx0XHQpO1xuXHR9LFxuXG5cdGdldEludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzOiBmdW5jdGlvbiAodmlzdWFsRmlsdGVyOiBWaXN1YWxGaWx0ZXJCbG9jaykge1xuXHRcdGNvbnN0IGNoYXJ0QW5ub3RhdGlvbiA9IHZpc3VhbEZpbHRlci5jaGFydEFubm90YXRpb247XG5cdFx0Y29uc3QgaW50ZXJhY3RpdmVDaGFydFByb3BlcnRpZXM6IEludGVyYWN0aXZlQ2hhcnRUeXBlID0ge307XG5cdFx0aWYgKHZpc3VhbEZpbHRlci5jaGFydE1lYXN1cmUgJiYgY2hhcnRBbm5vdGF0aW9uPy5EaW1lbnNpb25zICYmIGNoYXJ0QW5ub3RhdGlvbi5EaW1lbnNpb25zWzBdKSB7XG5cdFx0XHRjb25zdCBpZCA9IGdlbmVyYXRlKFt2aXN1YWxGaWx0ZXIubWV0YVBhdGg/LmdldFBhdGgoKV0pO1xuXHRcdFx0aW50ZXJhY3RpdmVDaGFydFByb3BlcnRpZXMuc2hvd0Vycm9yRXhwcmVzc2lvbiA9IFwiJHtpbnRlcm5hbD5cIiArIGlkICsgXCIvc2hvd0Vycm9yfVwiO1xuXHRcdFx0aW50ZXJhY3RpdmVDaGFydFByb3BlcnRpZXMuZXJyb3JNZXNzYWdlRXhwcmVzc2lvbiA9IFwie2ludGVybmFsPlwiICsgaWQgKyBcIi9lcnJvck1lc3NhZ2V9XCI7XG5cdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy5lcnJvck1lc3NhZ2VUaXRsZUV4cHJlc3Npb24gPSBcIntpbnRlcm5hbD5cIiArIGlkICsgXCIvZXJyb3JNZXNzYWdlVGl0bGV9XCI7XG5cdFx0XHRsZXQgZGF0YVBvaW50QW5ub3RhdGlvbjtcblx0XHRcdGlmIChjaGFydEFubm90YXRpb24/Lk1lYXN1cmVBdHRyaWJ1dGVzICYmIGNoYXJ0QW5ub3RhdGlvbj8uTWVhc3VyZUF0dHJpYnV0ZXNbMF0pIHtcblx0XHRcdFx0ZGF0YVBvaW50QW5ub3RhdGlvbiA9IGNoYXJ0QW5ub3RhdGlvbj8uTWVhc3VyZUF0dHJpYnV0ZXNbMF0/LkRhdGFQb2ludFxuXHRcdFx0XHRcdD8gY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlQXR0cmlidXRlc1swXS5EYXRhUG9pbnQuJHRhcmdldFxuXHRcdFx0XHRcdDogY2hhcnRBbm5vdGF0aW9uPy5NZWFzdXJlQXR0cmlidXRlc1swXTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IGRpbWVuc2lvbiA9IGNoYXJ0QW5ub3RhdGlvbj8uRGltZW5zaW9uc1swXTtcblx0XHRcdGNvbnN0IHBhcmFtZXRlcnMgPSBDb21tb25IZWxwZXIuZ2V0UGFyYW1ldGVycyh2aXN1YWxGaWx0ZXIuY29udGV4dFBhdGguZ2V0T2JqZWN0KCksIHsgY29udGV4dDogdmlzdWFsRmlsdGVyLmNvbnRleHRQYXRoIH0pO1xuXHRcdFx0Y29uc3QgZGltZW5zaW9uVGV4dCA9IGRpbWVuc2lvbj8uJHRhcmdldD8uYW5ub3RhdGlvbnM/LkNvbW1vbj8uVGV4dCBhcyB1bmtub3duIGFzIFBhdGhBbm5vdGF0aW9uRXhwcmVzc2lvbjxzdHJpbmc+O1xuXHRcdFx0Y29uc3QgY29udGV4dE9iamVjdFBhdGggPSBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHModmlzdWFsRmlsdGVyLm1ldGFQYXRoLCB2aXN1YWxGaWx0ZXIuY29udGV4dFBhdGgpLnRhcmdldE9iamVjdDtcblx0XHRcdGNvbnN0IGNvbGxlY3Rpb24gPSBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHModmlzdWFsRmlsdGVyLmNvbnRleHRQYXRoKTtcblx0XHRcdGNvbnN0IHNlbGVjdGlvblZhcmlhbnQgPSB2aXN1YWxGaWx0ZXIuc2VsZWN0aW9uVmFyaWFudEFubm90YXRpb25cblx0XHRcdFx0PyBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHModmlzdWFsRmlsdGVyLnNlbGVjdGlvblZhcmlhbnRBbm5vdGF0aW9uKVxuXHRcdFx0XHQ6IHVuZGVmaW5lZDtcblx0XHRcdGNvbnN0IHNvcnRPcmRlciA9IGNvbnRleHRPYmplY3RQYXRoLlNvcnRPcmRlcjtcblx0XHRcdGludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzLmFnZ3JlZ2F0aW9uQmluZGluZyA9IEludGVyYWN0aXZlQ2hhcnRIZWxwZXIuZ2V0QWdncmVnYXRpb25CaW5kaW5nKFxuXHRcdFx0XHRjaGFydEFubm90YXRpb24sXG5cdFx0XHRcdGNvbGxlY3Rpb24sXG5cdFx0XHRcdHZpc3VhbEZpbHRlci5jb250ZXh0UGF0aCxcblx0XHRcdFx0ZGltZW5zaW9uVGV4dCxcblx0XHRcdFx0ZGltZW5zaW9uLiR0YXJnZXQudHlwZSxcblx0XHRcdFx0c29ydE9yZGVyLFxuXHRcdFx0XHRzZWxlY3Rpb25WYXJpYW50LFxuXHRcdFx0XHR2aXN1YWxGaWx0ZXIuY3VzdG9tQWdncmVnYXRlLFxuXHRcdFx0XHR2aXN1YWxGaWx0ZXIuYWdncmVnYXRlUHJvcGVydGllcyxcblx0XHRcdFx0dmlzdWFsRmlsdGVyLlVvTUhhc0N1c3RvbUFnZ3JlZ2F0ZSxcblx0XHRcdFx0cGFyYW1ldGVycyxcblx0XHRcdFx0dmlzdWFsRmlsdGVyLmZpbHRlckJhckVudGl0eVR5cGUsXG5cdFx0XHRcdHZpc3VhbEZpbHRlci5kcmFmdFN1cHBvcnRlZCxcblx0XHRcdFx0dmlzdWFsRmlsdGVyLmNoYXJ0TWVhc3VyZVxuXHRcdFx0KTtcblx0XHRcdGludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzLnNjYWxlZmFjdG9yID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRTY2FsZUZhY3RvcigoZGF0YVBvaW50QW5ub3RhdGlvbiBhcyBEYXRhUG9pbnQpPy5WYWx1ZUZvcm1hdCk7XG5cdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy51b20gPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldFVvTShcblx0XHRcdFx0Y2hhcnRBbm5vdGF0aW9uLFxuXHRcdFx0XHRjb2xsZWN0aW9uLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0XHR2aXN1YWxGaWx0ZXIuY3VzdG9tQWdncmVnYXRlLFxuXHRcdFx0XHR2aXN1YWxGaWx0ZXIuYWdncmVnYXRlUHJvcGVydGllc1xuXHRcdFx0KTtcblx0XHRcdGludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzLmluUGFyYW1ldGVycyA9IENvbW1vbkhlbHBlci5zdHJpbmdpZnlDdXN0b21EYXRhKHZpc3VhbEZpbHRlci5pblBhcmFtZXRlcnMgYXMgb2JqZWN0KTtcblx0XHRcdGludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzLmluUGFyYW1ldGVyRmlsdGVycyA9IHZpc3VhbEZpbHRlci5pblBhcmFtZXRlcnNcblx0XHRcdFx0PyBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldEluUGFyYW1ldGVyRmlsdGVyc0JpbmRpbmcodmlzdWFsRmlsdGVyLmluUGFyYW1ldGVycylcblx0XHRcdFx0OiB1bmRlZmluZWQ7XG5cdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy5zZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbiA9IHZpc3VhbEZpbHRlci5zZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvblxuXHRcdFx0XHQ/IENvbW1vbkhlbHBlci5zdHJpbmdpZnlDdXN0b21EYXRhKHZpc3VhbEZpbHRlci5zZWxlY3Rpb25WYXJpYW50QW5ub3RhdGlvbilcblx0XHRcdFx0OiB1bmRlZmluZWQ7XG5cdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy5zdHJpbmdpZmllZFBhcmFtZXRlcnMgPSBDb21tb25IZWxwZXIuc3RyaW5naWZ5Q3VzdG9tRGF0YShwYXJhbWV0ZXJzKTtcblx0XHRcdGNvbnN0IGRpbWVuc2lvbkNvbnRleHQgPSB2aXN1YWxGaWx0ZXIubWV0YVBhdGhcblx0XHRcdFx0Py5nZXRNb2RlbCgpXG5cdFx0XHRcdD8uY3JlYXRlQmluZGluZ0NvbnRleHQodmlzdWFsRmlsdGVyLmNvbnRleHRQYXRoLmdldFBhdGgoKSArIFwiL0BcIiArIGRpbWVuc2lvbi5mdWxseVF1YWxpZmllZE5hbWUuc3BsaXQoXCJAXCIpWzFdKTtcblx0XHRcdGlmIChkaW1lbnNpb25Db250ZXh0KSB7XG5cdFx0XHRcdGNvbnN0IGRpbWVuc2lvbk9iamVjdCA9IGdldEludm9sdmVkRGF0YU1vZGVsT2JqZWN0cyhkaW1lbnNpb25Db250ZXh0LCB2aXN1YWxGaWx0ZXIuY29udGV4dFBhdGgpO1xuXHRcdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy5jaGFydExhYmVsID0gZ2V0VGV4dEJpbmRpbmcoZGltZW5zaW9uT2JqZWN0LCB7fSk7XG5cdFx0XHR9XG5cdFx0XHRpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcy5tZWFzdXJlID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRDaGFydFZhbHVlKHZpc3VhbEZpbHRlci5jaGFydE1lYXN1cmUpO1xuXHRcdFx0aW50ZXJhY3RpdmVDaGFydFByb3BlcnRpZXMuZGlzcGxheWVkVmFsdWUgPSBJbnRlcmFjdGl2ZUNoYXJ0SGVscGVyLmdldENoYXJ0RGlzcGxheWVkVmFsdWUoXG5cdFx0XHRcdHZpc3VhbEZpbHRlci5jaGFydE1lYXN1cmUsXG5cdFx0XHRcdChkYXRhUG9pbnRBbm5vdGF0aW9uIGFzIERhdGFQb2ludCk/LlZhbHVlRm9ybWF0LFxuXHRcdFx0XHR2aXN1YWxGaWx0ZXIubWV0YVBhdGg/LmdldFBhdGgoKVxuXHRcdFx0KTtcblx0XHRcdGludGVyYWN0aXZlQ2hhcnRQcm9wZXJ0aWVzLmNvbG9yID0gSW50ZXJhY3RpdmVDaGFydEhlbHBlci5nZXRDb2xvckJpbmRpbmcoZGF0YVBvaW50QW5ub3RhdGlvbiBhcyBEYXRhUG9pbnQsIGRpbWVuc2lvbik7XG5cdFx0fVxuXHRcdHJldHVybiBpbnRlcmFjdGl2ZUNoYXJ0UHJvcGVydGllcztcblx0fVxufTtcblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3RpdmVDaGFydEhlbHBlcjtcbiJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7OztFQW1EQSxNQUFNQSxzQkFBc0IsR0FBRztJQUM5QkMsc0JBQXNCLEVBQUUsVUFBVUMsS0FBYSxFQUFFQyxXQUE4QixFQUFFQyxRQUFpQixFQUFFO01BQ25HLE1BQU1DLFFBQVEsR0FBR0MsUUFBUSxDQUFDLENBQUNGLFFBQVEsQ0FBQyxDQUFDO01BQ3JDLE9BQ0MsaUJBQWlCLEdBQ2pCRixLQUFLLEdBQ0wsMkVBQTJFLElBQzFFQyxXQUFXLElBQUlBLFdBQVcsQ0FBQ0ksV0FBVyxHQUNwQyxXQUFXLEdBQUdKLFdBQVcsQ0FBQ0ksV0FBVyxDQUFDQyxPQUFPLEVBQUUsR0FBRyxJQUFJLEdBQ3RELHFDQUFxQyxHQUFHSCxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQzFERixXQUFXLElBQUlBLFdBQVcsQ0FBQ00sd0JBQXdCLEdBQ2pELFdBQVcsR0FBR04sV0FBVyxDQUFDTSx3QkFBd0IsR0FBRyxJQUFJLEdBQ3pELGNBQWMsQ0FBQyxHQUNsQiw0QkFBNEIsR0FDNUJKLFFBQVEsR0FDUixJQUFJLEdBQ0osVUFBVSxHQUNWSCxLQUFLLEdBQ0wsMEVBQTBFLEdBQzFFLDREQUE0RCxDQUMzRCxDQUFDO0lBQ0osQ0FBQzs7SUFDRFEsYUFBYSxFQUFFLFVBQVVSLEtBQWEsRUFBRTtNQUN2QyxPQUFPLFNBQVMsR0FBR0EsS0FBSyxHQUFHLDJFQUEyRTtJQUN2RyxDQUFDO0lBQ0RTLGtCQUFrQixFQUFFLFVBQVVDLFVBQStCLEVBQUVDLFdBQW9CLEVBQUVDLFVBQTBCLEVBQUU7TUFDaEgsTUFBTUMsZ0JBQWdCLEdBQUdILFVBQVUsQ0FBQ0ksWUFBWTtNQUNoRCxJQUFJQyxvQkFBb0IsQ0FBQ0YsZ0JBQWdCLENBQUMsRUFBRTtRQUMzQyxPQUFP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