/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/buildingBlocks/BuildingBlockBase","sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor","sap/fe/core/CommonUtils","sap/fe/core/converters/annotations/DataField","sap/fe/core/converters/controls/Common/DataVisualization","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/macros/internal/helpers/TableTemplating","sap/ui/core/library","../CommonHelper","../internal/helpers/ActionHelper","../MacroAPI","./TableHelper"],function(e,t,i,n,a,o,r,l,u,s,c,b,d,p,m,g,f,h){"use strict";var y,v,w,P,D,C,$,A,T,x,z,M,S,I,E,O,B,F,k,R,V,_,L,N,j,U,H,q,W,G,Q,X,K,Y,J,Z,ee,te,ie,ne,ae,oe,re,le,ue,se,ce,be,de,pe,me,ge,fe,he,ye,ve,we,Pe,De,Ce,$e,Ae,Te,xe,ze,Me,Se,Ie,Ee,Oe,Be,Fe,ke,Re,Ve,_e,Le,Ne,je,Ue,He,qe,We,Ge,Qe,Xe,Ke,Ye,Je,Ze,et,tt,it,nt,at,ot,rt,lt,ut,st,ct,bt,dt,pt,mt,gt,ft,ht,yt,vt,wt,Pt,Dt,Ct,$t,At,Tt,xt,zt,Mt,St,It,Et,Ot,Bt,Ft,kt,Rt,Vt,_t,Lt;var Nt={};var jt=p.TitleLevel;var Ut=d.buildExpressionForHeaderVisible;var Ht=b.getContextRelativeTargetObjectPath;var qt=c.isSingleton;var Wt=s.generate;var Gt=u.getInvolvedDataModelObjects;var Qt=l.CreationMode;var Xt=r.getVisualizationsFromPresentationVariant;var Kt=r.getDataVisualizationConfiguration;var Yt=o.isDataFieldForAnnotation;var Jt=n.xml;var Zt=i.defineBuildingBlock;var ei=i.blockEvent;var ti=i.blockAttribute;var ii=i.blockAggregation;function ni(e,t,i,n){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function ai(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function oi(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;ri(e,t)}function ri(e,t){ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return ri(e,t)}function li(e,t,i,n,a){var o={};Object.keys(n).forEach(function(e){o[e]=n[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},o);if(a&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(a):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function ui(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}const si=function(e){var t;let i=null;const n=e;let a=[];const o=(t=n.getAttribute("key"))===null||t===void 0?void 0:t.replace("InlineXML_","");if(n.children.length&&n.localName==="ActionGroup"&&n.namespaceURI==="sap.fe.macros"){const e=Array.prototype.slice.apply(n.children);let t=0;i=e.reduce((e,i)=>{var n;const a=((n=i.getAttribute("key"))===null||n===void 0?void 0:n.replace("InlineXML_",""))||o+"_Menu_"+t;const r={key:a,text:i.getAttribute("text"),__noWrap:true,press:i.getAttribute("press"),requiresSelection:i.getAttribute("requiresSelection")==="true",enabled:i.getAttribute("enabled")===null?true:i.getAttribute("enabled")};e[r.key]=r;t++;return e},{});a=Object.values(i).slice(-n.children.length).map(function(e){return e.key})}return{key:o,text:n.getAttribute("text"),position:{placement:n.getAttribute("placement"),anchor:n.getAttribute("anchor")},__noWrap:true,press:n.getAttribute("press"),requiresSelection:n.getAttribute("requiresSelection")==="true",enabled:n.getAttribute("enabled")===null?true:n.getAttribute("enabled"),menu:a.length?a:null,menuContentActions:i}};const ci=function(e,t){var i,n;t.key=t.key.replace("InlineXML_","");e.setAttribute("key",t.key);return{key:t.key,type:"Slot",width:e.getAttribute("width"),importance:e.getAttribute("importance"),horizontalAlign:e.getAttribute("horizontalAlign"),availability:e.getAttribute("availability"),header:e.getAttribute("header"),template:((i=e.children[0])===null||i===void 0?void 0:i.outerHTML)||"",properties:e.getAttribute("properties")?(n=e.getAttribute("properties"))===null||n===void 0?void 0:n.split(","):undefined,position:{placement:e.getAttribute("placement")||e.getAttribute("positionPlacement"),anchor:e.getAttribute("anchor")||e.getAttribute("positionAnchor")}}};let bi=(y=Zt({name:"Table",namespace:"sap.fe.macros.internal",publicNamespace:"sap.fe.macros"}),v=ti({type:"sap.ui.model.Context",isPublic:true,required:true}),w=ti({type:"boolean",isPublic:true}),P=ti({type:"sap.ui.model.Context",isPublic:true}),D=ti({type:"boolean",isPublic:true}),C=ti({type:"boolean",isPublic:true}),$=ti({type:"boolean",isPublic:true}),A=ti({type:"string",isPublic:true}),T=ti({type:"string",isPublic:true}),x=ti({type:"sap.ui.core.TitleLevel",isPublic:true}),z=ti({type:"boolean",isPublic:true}),M=ti({type:"string",isPublic:true}),S=ti({type:"boolean",isPublic:true}),I=ti({type:"string|boolean",isPublic:true}),E=ti({type:"boolean",isPublic:true}),O=ti({type:"string",isPublic:true}),B=ti({type:"boolean",isPublic:true}),F=ti({type:"string",isPublic:true}),k=ti({type:"string",isPublic:true}),R=ti({type:"sap.ui.model.Context",isPublic:false,required:true,expectedTypes:["EntitySet","NavigationProperty","Singleton"]}),V=ti({type:"string"}),_=ti({type:"boolean"}),L=ti({type:"EntitySet|NavigationProperty"}),N=ti({type:"string"}),j=ti({type:"boolean"}),U=ti({type:"string"}),H=ti({type:"string"}),q=ti({type:"string"}),W=ti({type:"string"}),G=ti({type:"string"}),Q=ti({type:"string"}),X=ti({type:"boolean"}),K=ti({type:"boolean"}),Y=ti({type:"boolean"}),J=ti({type:"string"}),Z=ti({type:"string"}),ee=ti({type:"number"}),te=ti({type:"boolean"}),ie=ti({type:"boolean"}),ne=ti({type:"boolean"}),ae=ti({type:"string"}),oe=ti({type:"string"}),re=ti({type:"string"}),le=ti({type:"string"}),ue=ti({type:"string"}),se=ti({type:"string"}),ce=ti({type:"boolean"}),be=ti({type:"boolean"}),de=ti({type:"number"}),pe=ti({type:"string"}),me=ti({type:"object",isPublic:true}),ge=ti({type:"sap.ui.model.Context"}),fe=ti({type:"string"}),he=ti({type:"string"}),ye=ti({type:"boolean"}),ve=ii({type:"sap.fe.macros.internal.table.Action | sap.fe.macros.internal.table.ActionGroup",isPublic:true,processAggregations:si}),we=ii({type:"sap.fe.macros.internal.table.Column",isPublic:true,hasVirtualNode:true,processAggregations:ci}),Pe=ei(),De=ei(),Ce=ei(),$e=ei(),Ae=ei(),Te=ei(),xe=ei(),ze=ei(),y(Me=(Se=function(t){oi(i,t);function i(e,n,o){var r,l;var u;u=t.call(this,e)||this;ni(u,"metaPath",Ie,ai(u));ni(u,"busy",Ee,ai(u));ni(u,"contextPath",Oe,ai(u));ni(u,"enableFullScreen",Be,ai(u));ni(u,"enableExport",Fe,ai(u));ni(u,"enablePaste",ke,ai(u));ni(u,"filterBar",Re,ai(u));ni(u,"header",Ve,ai(u));ni(u,"headerLevel",_e,ai(u));ni(u,"headerVisible",Le,ai(u));ni(u,"id",Ne,ai(u));ni(u,"isSearchable",je,ai(u));ni(u,"personalization",Ue,ai(u));ni(u,"readOnly",He,ai(u));ni(u,"type",qe,ai(u));ni(u,"useCondensedLayout",We,ai(u));ni(u,"selectionMode",Ge,ai(u));ni(u,"variantManagement",Qe,ai(u));ni(u,"collection",Xe,ai(u));ni(u,"_apiId",Ke,ai(u));ni(u,"autoBindOnInit",Ye,ai(u));ni(u,"collectionEntity",Je,ai(u));ni(u,"columnEditMode",Ze,ai(u));ni(u,"createAtEnd",et,ai(u));ni(u,"createNewAction",tt,ai(u));ni(u,"creationMode",it,ai(u));ni(u,"createOutbound",nt,ai(u));ni(u,"createOutboundDetail",at,ai(u));ni(u,"customValidationFunction",ot,ai(u));ni(u,"dataStateIndicatorFilter",rt,ai(u));ni(u,"disableAddRowButtonForEmptyData",lt,ai(u));ni(u,"enableAutoColumnWidth",ut,ai(u));ni(u,"enableAutoScroll",st,ai(u));ni(u,"fieldMode",ct,ai(u));ni(u,"filterBarId",bt,ai(u));ni(u,"inlineCreationRowCount",dt,ai(u));ni(u,"isAlp",pt,ai(u));ni(u,"isCompactType",mt,ai(u));ni(u,"isOptimizedForSmallDevice",gt,ai(u));ni(u,"multiSelectMode",ft,ai(u));ni(u,"navigationPath",ht,ai(u));ni(u,"noDataText",yt,ai(u));ni(u,"rowAction",vt,ai(u));ni(u,"tableType",wt,ai(u));ni(u,"updatablePropertyPath",Pt,ai(u));ni(u,"useBasicSearch",Dt,ai(u));ni(u,"searchable",Ct,ai(u));ni(u,"selectionLimit",$t,ai(u));ni(u,"showCreate",At,ai(u));ni(u,"tableDefinition",Tt,ai(u));ni(u,"tableDefinitionContext",xt,ai(u));ni(u,"tableDelegate",zt,ai(u));ni(u,"tabTitle",Mt,ai(u));ni(u,"visible",St,ai(u));ni(u,"actions",It,ai(u));ni(u,"columns",Et,ai(u));ni(u,"rowPress",Ot,ai(u));ni(u,"onContextChange",Bt,ai(u));ni(u,"onChange",Ft,ai(u));ni(u,"onSegmentedButtonPressed",kt,ai(u));ni(u,"variantSaved",Rt,ai(u));ni(u,"stateChange",Vt,ai(u));ni(u,"selectionChange",_t,ai(u));ni(u,"variantSelected",Lt,ai(u));u.getTableType=()=>{const e=u.collection.getObject();switch(u.tableType){case"GridTable":return Jt`<mdcTable:GridTableType
                rowCountMode="${u.tableDefinition.control.rowCountMode}"
                rowCount="${u.tableDefinition.control.rowCount}"
                selectionLimit="${u.selectionLimit}"
            />`;case"TreeTable":return Jt`<mdcTable:TreeTableType
                rowCountMode="${u.tableDefinition.control.rowCountMode}"
                rowCount="${u.tableDefinition.control.rowCount}"
            />`;default:const t=e.$kind==="EntitySet"?"Scroll":undefined;return Jt`<mdcTable:ResponsiveTableType
                showDetailsButton="true"
                detailsButtonSetting="{=['Low', 'Medium', 'None']}"
                growingMode="${t}"
            />`}};u.getDependents=()=>{var e;let t=``;if(!u.readOnly&&(e=u.tableDefinition)!==null&&e!==void 0&&e.columns){for(const e of u.tableDefinition.columns){if(e.availability==="Default"&&"annotationPath"in e){t+=u.getValueHelp(e)}}}const i=u.tableDefinition.annotation.standardActions.actions;if(u.tableDefinition.annotation.standardActions.isInsertUpdateTemplated&&i.create.isTemplated==="true"){t+=Jt`<control:CommandExecution
                                execute="${h.pressEventForCreateButton(ai(u),true)}"
                                visible="${i.create.visible}"
                                enabled="${i.create.enabled}"
                                command="Create"
                            />`}if(i.delete.isTemplated==="true"){var n,a,o,r,l;const e=(n=((r=u.collectionEntity)===null||r===void 0?void 0:r.entityType)||((l=u.collectionEntity)===null||l===void 0?void 0:l.targetType))===null||n===void 0?void 0:(a=n.annotations)===null||a===void 0?void 0:(o=a.UI)===null||o===void 0?void 0:o.HeaderInfo;t+=Jt`<control:CommandExecution
                        execute="${h.pressEventForDeleteButton(ai(u),u.collectionEntity.name,e,u.contextObjectPath)}"
                        visible="${i.delete.visible}"
                        enabled="${i.delete.enabled}"
                        command="DeleteEntry"
                        />`}for(const e in u.tableDefinition.commandActions){const i=u.tableDefinition.commandActions[e];t+=`${u.getActionCommand(e,i)}`}t+=`<control:CommandExecution execute="TableRuntime.displayTableSettings" command="TableSettings" />`;if(u.variantManagement==="None"){t+=`\x3c!-- Persistence provider offers persisting personalization changes without variant management --\x3e\n\t\t\t<p13n:PersistenceProvider id="${Wt([u.id,"PersistenceProvider"])}" for="${u.id}" />`}return Jt`${t}`};u.getActions=()=>{let e="";if(u.onSegmentedButtonPressed){e=`<mdcat:ActionToolbarAction\n            layoutInformation="{\n                    aggregationName: 'end',\n                    alignment: 'End'\n                }"\n            visible="{= \${pageInternal>alpContentView} === 'Table' }"\n        >\n            <SegmentedButton\n                id="${Wt([u.id,"SegmentedButton","TemplateContentView"])}"\n                select="${u.onSegmentedButtonPressed}"\n                selectedKey="{pageInternal>alpContentView}"\n            >\n                <items>`;if(m.isDesktop()){e+=`<SegmentedButtonItem\n                            tooltip="{sap.fe.i18n>M_COMMON_HYBRID_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n\t\t\t\t\t\t\tkey = "Hybrid"\n\t\t\t\t\t\t\ticon = "sap-icon://chart-table-view"\n\t\t\t\t\t\t\t/>`}e+=`<SegmentedButtonItem\n                        tooltip="{sap.fe.i18n>M_COMMON_CHART_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n                        key="Chart"\n                        icon="sap-icon://bar-chart"\n                    />\n                    <SegmentedButtonItem\n                        tooltip="{sap.fe.i18n>M_COMMON_TABLE_SEGMENTED_BUTTON_ITEM_TOOLTIP}"\n                        key="Table"\n                        icon="sap-icon://table-view"\n                    />\n                </items>\n            </SegmentedButton>\n        </mdcat:ActionToolbarAction>`}e+=`<core:Fragment fragmentName="sap.fe.macros.table.Actions" type="XML" />`;return Jt`${e}`};const s=Gt(u.metaPath,u.contextPath);u.contextObjectPath=s;const c=o.bindingContexts.converterContext;u.pageTemplateType=c===null||c===void 0?void 0:c.getObject("/templateType");const b=i.setUpTableDefinition(ai(u),o);u.collection=o.models.metaModel.createBindingContext(b.annotation.collection);u.convertedMetaData=u.contextObjectPath.convertedTypes;u.collectionEntity=u.convertedMetaData.resolvePath(u.tableDefinition.annotation.collection).target;u.setUpId();u.selectionMode=u.tableDefinition.annotation.selectionMode;u.enableFullScreen=u.tableDefinition.control.enableFullScreen;u.enableExport=u.tableDefinition.control.enableExport;u.enablePaste=u.tableDefinition.annotation.standardActions.actions.paste.enabled;u.updatablePropertyPath=u.tableDefinition.annotation.standardActions.updatablePropertyPath;u.type=u.tableDefinition.control.type;u.disableAddRowButtonForEmptyData??=u.tableDefinition.control.disableAddRowButtonForEmptyData;u.customValidationFunction??=u.tableDefinition.control.customValidationFunction;u.headerVisible??=u.tableDefinition.control.headerVisible;u.searchable??=u.tableDefinition.annotation.searchable;u.inlineCreationRowCount??=u.tableDefinition.control.inlineCreationRowCount;u.header??=u.tableDefinition.annotation.title;u.selectionLimit??=u.tableDefinition.control.selectionLimit;u.isCompactType??=u.tableDefinition.control.isCompactType;u.creationMode??=u.tableDefinition.annotation.create.mode;u.createAtEnd??=u.tableDefinition.annotation.create.append;u.createOutbound??=u.tableDefinition.annotation.create.outbound;u.createNewAction??=u.tableDefinition.annotation.create.newAction;u.createOutboundDetail??=u.tableDefinition.annotation.create.outboundDetail;u.personalization??=u.tableDefinition.annotation.p13nMode;u.variantManagement??=u.tableDefinition.annotation.variantManagement;u.enableAutoColumnWidth??=true;u.dataStateIndicatorFilter??=u.tableDefinition.control.dataStateIndicatorFilter;u.isOptimizedForSmallDevice??=a.isSmallDevice();u.navigationPath=b.annotation.navigationPath;if(b.annotation.collection.startsWith("/")&&qt(s.startingEntitySet)){b.annotation.collection=u.navigationPath}u.convertedMetaData=u.contextObjectPath.convertedTypes;u.setReadOnly();if(u.rowPress){u.rowAction="Navigation"}u.rowPress??=(r=u.tableDefinition.annotation.row)===null||r===void 0?void 0:r.press;u.rowAction??=(l=u.tableDefinition.annotation.row)===null||l===void 0?void 0:l.action;if(u.personalization==="false"){u.personalization=undefined}else if(u.personalization==="true"){u.personalization="Sort,Column,Filter"}switch(u.personalization){case"false":u.personalization=undefined;break;case"true":u.personalization="Sort,Column,Filter";break;default:}if(u.isSearchable===false){u.searchable=false}else{u.searchable=u.tableDefinition.annotation.searchable}let d=false;if(!u.filterBar&&!u.filterBarId&&u.searchable){u.filterBarId=Wt([u.id,"StandardAction","BasicSearch"]);d=true}u.useBasicSearch=d;u.tableType=u.type;u.showCreate=u.tableDefinition.annotation.standardActions.actions.create.visible||true;u.autoBindOnInit=u.tableDefinition.annotation.autoBindOnInit;switch(u.readOnly){case true:u.columnEditMode="Display";break;case false:u.columnEditMode="Editable";break;default:u.columnEditMode=undefined}return u}Nt=i;i.getVisualizationPath=function t(i,n){const a=Ht(i);if(!a){e.error(`Missing meta path parameter for LineItem`);return`@${"com.sap.vocabularies.UI.v1.LineItem"}`}if(i.targetObject.term==="com.sap.vocabularies.UI.v1.LineItem"){return a}const o=n.getEntityTypeAnnotation(a);let r=[];switch(i.targetObject.term){case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":if(i.targetObject.PresentationVariant){r=Xt(i.targetObject.PresentationVariant,a,o.converterContext,true)}break;case"com.sap.vocabularies.UI.v1.PresentationVariant":r=Xt(i.targetObject,a,o.converterContext,true);break;default:e.error(`Bad metapath parameter for table : ${i.targetObject.term}`)}const l=r.find(e=>e.visualization.term==="com.sap.vocabularies.UI.v1.LineItem");if(l){return l.annotationPath}else{e.error(`Bad meta path parameter for LineItem: ${i.targetObject.term}`);return`@${"com.sap.vocabularies.UI.v1.LineItem"}`}};i.getPresentationPath=function e(t){var i;let n;switch((i=t.targetObject)===null||i===void 0?void 0:i.term){case"com.sap.vocabularies.UI.v1.PresentationVariant":n=Ht(t);break;case"com.sap.vocabularies.UI.v1.SelectionPresentationVariant":n=Ht(t)+"/PresentationVariant";break}return n};i.setUpTableDefinition=function e(t,n){let a=t.tableDefinition;if(!a){var o,r;const e=t.getConverterContext(t.contextObjectPath,(o=t.contextPath)===null||o===void 0?void 0:o.getPath(),n);const u=i.getVisualizationPath(t.contextObjectPath,e);const s=i.getPresentationPath(t.contextObjectPath);const c={};const b={enableExport:t.enableExport,enableFullScreen:t.enableFullScreen,enablePaste:t.enablePaste,selectionMode:t.selectionMode,type:t.type};if(t.actions){var l;(l=Object.values(t.actions))===null||l===void 0?void 0:l.forEach(e=>{t.actions={...t.actions,...e.menuContentActions};delete e.menuContentActions})}c[u]={actions:t.actions||{},columns:t.columns||{},tableSettings:b};const d=t.getConverterContext(t.contextObjectPath,(r=t.contextPath)===null||r===void 0?void 0:r.getPath(),n,c);const p=Kt(u,t.useCondensedLayout,d,undefined,undefined,s,true);a=p.visualizations[0];t.tableDefinition=a}t.tableDefinitionContext=f.createBindingContext(t.tableDefinition,n);return a};var n=i.prototype;n.setUpId=function e(){if(this.id){this._apiId=this.id;this.id=this.getContentId(this.id)}else{const e=this.tableDefinition;this.id??=e.annotation.id;this._apiId=Wt([e.annotation.id,"Table"])}};n.setReadOnly=function e(){if(this.readOnly===undefined&&this.tableDefinition.annotation.displayMode===true){this.readOnly=true}};n._getEntityType=function e(){var t,i;return((t=this.collectionEntity)===null||t===void 0?void 0:t.entityType)||((i=this.collectionEntity)===null||i===void 0?void 0:i.targetType)};n.getValueHelpTemplateFromPath=function e(t){return t?`<macros:ValueHelp\n        idPrefix="${Wt([this.id,"TableValueHelp"])}"\n        property="${t}/Value"\n    />`:""};n.getValueHelp=function e(t){const i=this.convertedMetaData.resolvePath(t.annotationPath).target;if(Yt(i)&&i.Target.$target.term==="com.sap.vocabularies.UI.v1.Chart"){return``}else if(Yt(i)&&i.Target.$target.term==="com.sap.vocabularies.UI.v1.FieldGroup"){let e=``;for(const n in i.Target.$target.Data){e+=this.getValueHelpTemplateFromPath(t.annotationPath+"/Target/$AnnotationPath/Data/"+n)}return Jt`${e}`}else{return Jt`${this.getValueHelpTemplateFromPath(t.annotationPath)}`}};n.getActionCommand=function e(t,i){var n,a,o,r,l;const u=i.annotationPath?this.convertedMetaData.resolvePath(i.annotationPath).target:undefined;const s=i.annotationPath?m.getActionContext(this.metaPath.getModel().createBindingContext(i.annotationPath+"/Action")):undefined;const c=u===null||u===void 0?void 0:(n=u.ActionTarget)===null||n===void 0?void 0:n.isBound;const b=(u===null||u===void 0?void 0:(a=u.ActionTarget)===null||a===void 0?void 0:(o=a.annotations)===null||o===void 0?void 0:(r=o.Core)===null||r===void 0?void 0:(l=r.OperationAvailable)===null||l===void 0?void 0:l.valueOf())!==false;const d=i.type==="ForAction"?c!==true||b:true;if(d){var p;return Jt`<internalMacro:ActionCommand
							action="{tableDefinition>commandActions/${t}}"
							onExecuteAction="${h.pressEventDataFieldForActionButton(this,u,this.collectionEntity.name,this.tableDefinition.operationAvailableMap,s,i.isNavigable,i.enableAutoScroll,i.defaultValuesExtensionFunction)}"
							onExecuteIBN="${m.getPressHandlerForDataFieldForIBN(u,"${internal>selectedContexts}",!this.tableDefinition.enableAnalytics)}"
							onExecuteManifest="${i.noWrap?i.press:m.buildActionWrapper(i,this)}"
							isIBNEnabled="${i.enabled??h.isDataFieldForIBNEnabled(this,u,!!u.RequiresContext,(p=u.NavigationAvailable)===null||p===void 0?void 0:p.valueOf())}"
							isActionEnabled="${i.enabled??h.isDataFieldForActionEnabled(this,u,!!c,s,i.enableOnSelect)}"
							/>`}return``};n.getCreationRow=function e(){if(this.creationMode==="CreationRow"){const e=this.tableDefinition.annotation.standardActions.actions.creationRow;if(e.isTemplated){return Jt`<mdc:creationRow>
							<mdcTable:CreationRow
								id="${Wt([this.id,"CreationRow"])}"
								visible="${e.visible}"
								apply="${h.pressEventForCreateButton(this,false)}"
								applyEnabled="${e.enabled}"
								macrodata:disableAddRowButtonForEmptyData="${this.disableAddRowButtonForEmptyData}"
								macrodata:customValidationFunction="${this.customValidationFunction}"
							/>
					   	   </mdc:creationRow>`}}return""};n.getRowSetting=function e(){var t,i;let n=`<mdcTable:RowSettings\n        navigated="${(t=this.tableDefinition.annotation.row)===null||t===void 0?void 0:t.rowNavigated}"\n        highlight="${(i=this.tableDefinition.annotation.row)===null||i===void 0?void 0:i.rowHighlighting}"\n        >`;if(this.rowAction==="Navigation"){var a;n+=`<mdcTable:rowActions>\n                <mdcTable:RowActionItem\n                    type = "${this.rowAction}"\n                    press = "${this.tableType==="ResponsiveTable"?"":this.rowPress}"\n                    visible = "${(a=this.tableDefinition.annotation.row)===null||a===void 0?void 0:a.visible}"\n                    />\n                </mdcTable:rowActions>`}n+=`</mdcTable:RowSettings>`;return Jt`${n}`};n.getVariantManagement=function e(){if(this.variantManagement==="Control"){return Jt`<mdc:variant>
                        <variant:VariantManagement
                            id="${Wt([this.id,"VM"])}"
                            for="{this>id}"
                            showSetAsDefault="true"
                            select="{this>variantSelected}"
                            headerLevel="${this.headerLevel}"
                            save="${this.variantSaved}"
                        />
                    </mdc:variant>`}return""};n.getQuickFilter=function e(){var t;if((t=this.tableDefinition.control.filters)!==null&&t!==void 0&&t.quickFilters){var i;const e=this.tableDefinition.control.filters.quickFilters;return Jt`<template:with path="tableDefinition>control/filters/quickFilters" var="quickFilters">
                        <mdc:quickFilter>
                            <macroTable:QuickFilterContainer
                                id="${Wt([this.id,"QuickFilterContainer"])}"
                                entitySet="${m.getContextPath(null,{context:this.collection})}"
                                parentEntityType="{contextPath>$Type}"
                                showCounts="${e.showCounts===true}"
                                macrodata:filters="${h.formatHiddenFilters((i=this.tableDefinition.control.filters)===null||i===void 0?void 0:i.quickFilters)}"
                                batchGroupId="$auto.Workers"
                            />
                        </mdc:quickFilter>
                    </template:with>`}return""};n.getEmptyRowsEnabled=function e(){return this.creationMode===Qt.InlineCreationRows?this.tableDefinition.annotation.standardActions.actions.create.enabled:undefined};n.getTemplate=function e(){var t,i,n,a,o,r,l,u,s,c;const b=Ut(this);if(this.rowPress){this.rowAction="Navigation"}this.rowPress??=(t=this.tableDefinition.annotation.row)===null||t===void 0?void 0:t.press;const d=(i=this.collectionEntity.annotations.Capabilities)===null||i===void 0?void 0:(n=i.DeleteRestrictions)===null||n===void 0?void 0:(a=n.Deletable)===null||a===void 0?void 0:a.path;const p=h.getUiLineItemObject(this.metaPath,this.convertedMetaData);const f=(o=h.getDelegate)===null||o===void 0?void 0:o.call(h,this.tableDefinition,(r=this.isAlp)===null||r===void 0?void 0:r.toString(),this.tableDefinition.annotation.entityName);const y=`TableRuntime.setContexts(\${$source>/}, '${d}', '${(l=this.collectionEntity.annotations.Common)===null||l===void 0?void 0:l.DraftRoot}', '${this.tableDefinition.operationAvailableMap}', '${h.getNavigationAvailableMap(p)}', '${g.getMultiSelectDisabledActions(p)}', '${this.updatablePropertyPath}')`;const v=this._getEntityType();return Jt`
            <macroTable:TableAPI
                xmlns="sap.m"
                xmlns:mdc="sap.ui.mdc"
                xmlns:plugins="sap.m.plugins"
                xmlns:mdcTable="sap.ui.mdc.table"
                xmlns:macroTable="sap.fe.macros.table"
                xmlns:mdcat="sap.ui.mdc.actiontoolbar"
                xmlns:core="sap.ui.core"
                xmlns:control="sap.fe.core.controls"
                xmlns:dt="sap.ui.dt"
                xmlns:fl="sap.ui.fl"
                xmlns:variant="sap.ui.fl.variants"
                xmlns:p13n="sap.ui.mdc.p13n"
                xmlns:internalMacro="sap.fe.macros.internal"
                xmlns:unittest="http://schemas.sap.com/sapui5/preprocessorextension/sap.fe.unittesting/1"
                xmlns:macrodata="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
                id="${this._apiId}"
                tableDefinition="{_pageModel>${this.tableDefinitionContext.getPath()}}"
                entityTypeFullyQualifiedName="${v===null||v===void 0?void 0:v.fullyQualifiedName}"
                metaPath="${(u=this.metaPath)===null||u===void 0?void 0:u.getPath()}"
                contextPath="${(s=this.contextPath)===null||s===void 0?void 0:s.getPath()}"
                stateChange="${this.stateChange}"
                selectionChange="${this.selectionChange}"
                readOnly="${this.readOnly}"
                filterBar="${this.filterBar}"
                macrodata:tableAPILocalId="${this._apiId}"
                emptyRowsEnabled="${this.getEmptyRowsEnabled()}"
                enableAutoColumnWidth="${this.enableAutoColumnWidth}"
                isOptimizedForSmallDevice="${this.isOptimizedForSmallDevice}"
            >
				<template:with path="collection>${m.getTargetCollectionPath(this.collection)}" var="targetCollection">
                <macroTable:layoutData>
                    <FlexItemData maxWidth="100%" />
                </macroTable:layoutData>
                <!-- macrodata has to be an expression binding if it needs to be set as attribute via change handler during templating -->
                    <mdc:Table
                        binding="{internal>controls/${this.id}}"
                        unittest:id="TableMacroFragment"
                        core:require="{TableRuntime: 'sap/fe/macros/table/TableRuntime', API: 'sap/fe/macros/table/TableAPI'}"
                        fl:flexibility="{this>fl:flexibility}"
                        sortConditions="${this.tableDefinition.annotation.sortConditions}"
                        groupConditions="${m.stringifyObject(this.tableDefinition.annotation.groupConditions)}"
                        aggregateConditions="${m.stringifyObject(this.tableDefinition.annotation.aggregateConditions)}"
                        dt:designtime="${this.variantManagement==="None"?"not-adaptable":undefined}"
                        macrodata:kind="${this.collectionEntity._type}"
                        macrodata:navigationPath="${this.navigationPath}"
                        id="${this.id}"
                        busy="${this.busy}"
                        busyIndicatorDelay="0"
                        enableExport="${this.enableExport}"
                        delegate="${f}"
                        rowPress="${this.rowPress}"
                        height="100%"
                        autoBindOnInit="${this.autoBindOnInit&&!this.filterBar}"
                        selectionMode="${this.selectionMode||"None"}"
                        selectionChange="${y}"
                        showRowCount="${this.tableDefinition.control.showRowCount}"
                        ${this.attr("header",this.header)}
                        headerVisible="${b}"
                        headerLevel="${this.headerLevel}"
                        threshold="${this.tableDefinition.annotation.threshold}"
                        noData="${this.noDataText}"
                        p13nMode="${this.personalization}"
                        filter="${this.filterBarId}"
                        paste="API.onPaste($event, $controller)"
                        beforeExport="API.onBeforeExport($event)"
                        class="${this.tableDefinition.control.useCondensedTableLayout===true?"sapUiSizeCondensed":undefined}"
                        multiSelectMode="${this.tableDefinition.control.multiSelectMode}"
                        showPasteButton="${this.tableDefinition.annotation.standardActions.actions.paste.visible}"
                        enablePaste="${this.tableDefinition.annotation.standardActions.actions.paste.enabled}"
                        macrodata:rowsBindingInfo="${h.getRowsBindingInfo(this)}"
                        macrodata:enableAnalytics="${this.tableDefinition.enableAnalytics}"
                        macrodata:creationMode="${this.creationMode}"
                        macrodata:inlineCreationRowCount="${this.inlineCreationRowCount}"
                        macrodata:showCreate="${this.showCreate}"
                        macrodata:createAtEnd="${this.createAtEnd}"
                        macrodata:enableAutoScroll="${this.enableAutoScroll}"
                        macrodata:displayModePropertyBinding="${this.readOnly}"
                        macrodata:tableType="${this.tableType}"
                        macrodata:targetCollectionPath="${m.getContextPath(null,{context:this.collection})}"
                        macrodata:entityType="${m.getContextPath(null,{context:this.collection})+"/"}"
                        macrodata:metaPath="${m.getContextPath(null,{context:this.collection})}"
                        macrodata:onChange="${this.onChange}"
                        macrodata:hiddenFilters="${h.formatHiddenFilters((c=this.tableDefinition.control.filters)===null||c===void 0?void 0:c.hiddenFilters)}"
                        macrodata:requestGroupId="$auto.Workers"
                        macrodata:segmentedButtonId="${Wt([this.id,"SegmentedButton","TemplateContentView"])}"
                        macrodata:enablePaste="${this.enablePaste}"
                        macrodata:operationAvailableMap="${m.stringifyCustomData(this.tableDefinition.operationAvailableMap)}"
                        visible="${this.visible}"
                    >
                        <mdc:dataStateIndicator>
                            <plugins:DataStateIndicator
                                filter="${this.dataStateIndicatorFilter}"
                                enableFiltering="true"
                                dataStateChange="API.onDataStateChange"
                            />
                        </mdc:dataStateIndicator>
                        <mdc:type>
                            ${this.getTableType()}
                        </mdc:type>
                        <mdc:dependents>
                            ${this.getDependents()}
                        </mdc:dependents>
                        <mdc:actions>
                            ${this.getActions()}
                        </mdc:actions>
                        <mdc:rowSettings>
                        ${this.getRowSetting()}
                        </mdc:rowSettings>
                        <mdc:columns>
                            <core:Fragment fragmentName="sap.fe.macros.table.Columns" type="XML" />
                        </mdc:columns>
                        ${this.getCreationRow()}
                        ${this.getVariantManagement()}
                        ${this.getQuickFilter()}
                    </mdc:Table>
				</template:with>
            </macroTable:TableAPI>
        `};return i}(t),Ie=li(Se.prototype,"metaPath",[v],{configurable:true,enumerable:true,writable:true,initializer:null}),Ee=li(Se.prototype,"busy",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),Oe=li(Se.prototype,"contextPath",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),Be=li(Se.prototype,"enableFullScreen",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),Fe=li(Se.prototype,"enableExport",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),ke=li(Se.prototype,"enablePaste",[$],{configurable:true,enumerable:true,writable:true,initializer:null}),Re=li(Se.prototype,"filterBar",[A],{configurable:true,enumerable:true,writable:true,initializer:null}),Ve=li(Se.prototype,"header",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),_e=li(Se.prototype,"headerLevel",[x],{configurable:true,enumerable:true,writable:true,initializer:function(){return jt.Auto}}),Le=li(Se.prototype,"headerVisible",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),Ne=li(Se.prototype,"id",[M],{configurable:true,enumerable:true,writable:true,initializer:null}),je=li(Se.prototype,"isSearchable",[S],{configurable:true,enumerable:true,writable:true,initializer:null}),Ue=li(Se.prototype,"personalization",[I],{configurable:true,enumerable:true,writable:true,initializer:null}),He=li(Se.prototype,"readOnly",[E],{configurable:true,enumerable:true,writable:true,initializer:null}),qe=li(Se.prototype,"type",[O],{configurable:true,enumerable:true,writable:true,initializer:null}),We=li(Se.prototype,"useCondensedLayout",[B],{configurable:true,enumerable:true,writable:true,initializer:null}),Ge=li(Se.prototype,"selectionMode",[F],{configurable:true,enumerable:true,writable:true,initializer:null}),Qe=li(Se.prototype,"variantManagement",[k],{configurable:true,enumerable:true,writable:true,initializer:null}),Xe=li(Se.prototype,"collection",[R],{configurable:true,enumerable:true,writable:true,initializer:null}),Ke=li(Se.prototype,"_apiId",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),Ye=li(Se.prototype,"autoBindOnInit",[_],{configurable:true,enumerable:true,writable:true,initializer:null}),Je=li(Se.prototype,"collectionEntity",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),Ze=li(Se.prototype,"columnEditMode",[N],{configurable:true,enumerable:true,writable:true,initializer:null}),et=li(Se.prototype,"createAtEnd",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),tt=li(Se.prototype,"createNewAction",[U],{configurable:true,enumerable:true,writable:true,initializer:null}),it=li(Se.prototype,"creationMode",[H],{configurable:true,enumerable:true,writable:true,initializer:null}),nt=li(Se.prototype,"createOutbound",[q],{configurable:true,enumerable:true,writable:true,initializer:null}),at=li(Se.prototype,"createOutboundDetail",[W],{configurable:true,enumerable:true,writable:true,initializer:null}),ot=li(Se.prototype,"customValidationFunction",[G],{configurable:true,enumerable:true,writable:true,initializer:null}),rt=li(Se.prototype,"dataStateIndicatorFilter",[Q],{configurable:true,enumerable:true,writable:true,initializer:null}),lt=li(Se.prototype,"disableAddRowButtonForEmptyData",[X],{configurable:true,enumerable:true,writable:true,initializer:null}),ut=li(Se.prototype,"enableAutoColumnWidth",[K],{configurable:true,enumerable:true,writable:true,initializer:null}),st=li(Se.prototype,"enableAutoScroll",[Y],{configurable:true,enumerable:true,writable:true,initializer:null}),ct=li(Se.prototype,"fieldMode",[J],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),bt=li(Se.prototype,"filterBarId",[Z],{configurable:true,enumerable:true,writable:true,initializer:null}),dt=li(Se.prototype,"inlineCreationRowCount",[ee],{configurable:true,enumerable:true,writable:true,initializer:null}),pt=li(Se.prototype,"isAlp",[te],{configurable:true,enumerable:true,writable:true,initializer:function(){return false}}),mt=li(Se.prototype,"isCompactType",[ie],{configurable:true,enumerable:true,writable:true,initializer:null}),gt=li(Se.prototype,"isOptimizedForSmallDevice",[ne],{configurable:true,enumerable:true,writable:true,initializer:null}),ft=li(Se.prototype,"multiSelectMode",[ae],{configurable:true,enumerable:true,writable:true,initializer:null}),ht=li(Se.prototype,"navigationPath",[oe],{configurable:true,enumerable:true,writable:true,initializer:null}),yt=li(Se.prototype,"noDataText",[re],{configurable:true,enumerable:true,writable:true,initializer:null}),vt=li(Se.prototype,"rowAction",[le],{configurable:true,enumerable:true,writable:true,initializer:function(){return undefined}}),wt=li(Se.prototype,"tableType",[ue],{configurable:true,enumerable:true,writable:true,initializer:null}),Pt=li(Se.prototype,"updatablePropertyPath",[se],{configurable:true,enumerable:true,writable:true,initializer:null}),Dt=li(Se.prototype,"useBasicSearch",[ce],{configurable:true,enumerable:true,writable:true,initializer:null}),Ct=li(Se.prototype,"searchable",[be],{configurable:true,enumerable:true,writable:true,initializer:null}),$t=li(Se.prototype,"selectionLimit",[de],{configurable:true,enumerable:true,writable:true,initializer:null}),At=li(Se.prototype,"showCreate",[pe],{configurable:true,enumerable:true,writable:true,initializer:null}),Tt=li(Se.prototype,"tableDefinition",[me],{configurable:true,enumerable:true,writable:true,initializer:null}),xt=li(Se.prototype,"tableDefinitionContext",[ge],{configurable:true,enumerable:true,writable:true,initializer:null}),zt=li(Se.prototype,"tableDelegate",[fe],{configurable:true,enumerable:true,writable:true,initializer:null}),Mt=li(Se.prototype,"tabTitle",[he],{configurable:true,enumerable:true,writable:true,initializer:function(){return""}}),St=li(Se.prototype,"visible",[ye],{configurable:true,enumerable:true,writable:true,initializer:null}),It=li(Se.prototype,"actions",[ve],{configurable:true,enumerable:true,writable:true,initializer:null}),Et=li(Se.prototype,"columns",[we],{configurable:true,enumerable:true,writable:true,initializer:null}),Ot=li(Se.prototype,"rowPress",[Pe],{configurable:true,enumerable:true,writable:true,initializer:null}),Bt=li(Se.prototype,"onContextChange",[De],{configurable:true,enumerable:true,writable:true,initializer:null}),Ft=li(Se.prototype,"onChange",[Ce],{configurable:true,enumerable:true,writable:true,initializer:null}),kt=li(Se.prototype,"onSegmentedButtonPressed",[$e],{configurable:true,enumerable:true,writable:true,initializer:null}),Rt=li(Se.prototype,"variantSaved",[Ae],{configurable:true,enumerable:true,writable:true,initializer:null}),Vt=li(Se.prototype,"stateChange",[Te],{configurable:true,enumerable:true,writable:true,initializer:null}),_t=li(Se.prototype,"selectionChange",[xe],{configurable:true,enumerable:true,writable:true,initializer:null}),Lt=li(Se.prototype,"variantSelected",[ze],{configurable:true,enumerable:true,writable:true,initializer:null}),Se))||Me);Nt=bi;return Nt},false);