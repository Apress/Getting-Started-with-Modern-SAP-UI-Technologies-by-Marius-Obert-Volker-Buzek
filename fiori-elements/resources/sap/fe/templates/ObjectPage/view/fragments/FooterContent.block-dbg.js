/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/RuntimeBuildingBlock","sap/fe/core/controls/CommandExecution","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/MetaModelConverter","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/macros/actions/CustomAction.block","sap/fe/macros/actions/DataFieldForAction.block","sap/fe/macros/messages/MessageButton","sap/m/Button","sap/m/DraftIndicator","sap/m/Menu","sap/m/MenuButton","sap/m/MenuItem","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/ToolbarSpacer","sap/ui/core/InvisibleText","../../ObjectPageTemplating","sap/fe/core/jsx-runtime/jsx","sap/fe/core/jsx-runtime/jsxs"],function(t,e,i,n,a,r,o,s,l,u,c,d,p,f,g,h,v,b,A,m,y,_,M,E){"use strict";var C,P,D,O,T,B,x,S,I;var w={};var F=l.generate;var V=o.resolveBindingString;var R=o.pathInModel;var j=o.or;var k=o.not;var z=o.ifElse;var N=o.constant;var G=o.and;var J=r.getInvolvedDataModelObjects;var L=a.ActionType;var H=n.UI;var U=n.Draft;var q=t.defineBuildingBlock;var Y=t.blockAttribute;function X(t,e,i,n){if(!i)return;Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function K(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function Q(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;W(t,e)}function W(t,e){W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function t(e,i){e.__proto__=i;return e};return W(t,e)}function Z(t,e,i,n,a){var r={};Object.keys(n).forEach(function(t){r[t]=n[t]});r.enumerable=!!r.enumerable;r.configurable=!!r.configurable;if("value"in r||r.initializer){r.writable=true}r=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},r);if(a&&r.initializer!==void 0){r.value=r.initializer?r.initializer.call(a):void 0;r.initializer=undefined}if(r.initializer===void 0){Object.defineProperty(t,e,r);r=null}return r}function $(t,e){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let tt=(C=q({name:"FooterContent",namespace:"sap.fe.templates.ObjectPage.view.fragments"}),P=Y({type:"string",required:true}),D=Y({type:"array",required:true}),O=Y({type:"sap.ui.model.Context"}),C(T=(B=function(t){Q(e,t);function e(e){var i,n;var a;for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++){o[l-1]=arguments[l]}a=t.call(this,e,...o)||this;X(a,"id",x,K(a));X(a,"actions",S,K(a));X(a,"contextPath",I,K(a));a.isDraftValidation=false;a.oDataMetaModel=a.contextPath.getModel();a.dataViewModelPath=J(a.contextPath);const u=a.dataViewModelPath.startingEntitySet;a.isDraftValidation=!!((i=s.getDraftRoot(u))!==null&&i!==void 0&&i.PreparationAction&&u!==null&&u!==void 0&&(n=u.entityType.annotations.Common)!==null&&n!==void 0&&n.Messages);return a}w=e;var n=e.prototype;n.getActionModelPath=function t(e){const i=e.annotationPath;if(i){const t=this.oDataMetaModel.getContext(i);return J(t)}return undefined};n.getVisibility=function t(){const e=t=>{if(t.length){return t.map(t=>V(t.visible??true,"boolean"))}return[N(false)]};const i=this.actions.filter(t=>t.type===L.DataFieldForAction);const n=e(this.actions.filter(t=>_.isManifestAction(t)));const a=e(i);const r=!!i.find(t=>{var e,i,n;const a=this.getActionModelPath(t);return!(a!==null&&a!==void 0&&(e=a.targetObject)!==null&&e!==void 0&&(i=e.annotations)!==null&&i!==void 0&&(n=i.UI)!==null&&n!==void 0&&n.Hidden)});return j(r,j(...n),G(j(H.IsEditable,j(...a)),k(R("isCreateDialogOpen","internal"))))};n.getDraftIndicator=function t(){var e;const i=this.dataViewModelPath.targetEntitySet||this.dataViewModelPath.startingEntitySet;const n=(e=i.annotations)===null||e===void 0?void 0:e.Common;if(n!==null&&n!==void 0&&n.DraftRoot||n!==null&&n!==void 0&&n.DraftNode){return M(f,{state:"{ui>/draftStatus}",visible:"{ui>/isEditable}"})}return undefined};n.getApplyButton=function t(e,i){const n=e.getController();const a=e.getViewData();if(this.isDraftValidation&&!a.isDesktop&&!a.fclEnabled){return M(h,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}",defaultAction:()=>n._applyDocument(e.getBindingContext()),useDefaultActionOnly:"true",buttonMode:"Split",type:i,visible:H.IsEditable,children:M(g,{children:M(v,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}",press:()=>n._validateDocument()})})})}return M(p,{id:this.createId("StandardAction::Apply"),text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_APPLY_DRAFT}",type:i,enabled:true,press:()=>n._applyDocument(e.getBindingContext()),visible:"{ui>/isEditable}"})};n.getPrimary=function t(e,n){const a=e.getViewData();const r=e.getController();if(this.isDraftValidation&&!a.isDesktop){return M(h,{text:this.getTextSaveButton(),defaultAction:i.executeCommand("Save"),useDefaultActionOnly:"true",buttonMode:"Split",type:n,visible:H.IsEditable,children:M(g,{children:M(v,{text:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_VALIDATE_DRAFT}",press:()=>r._validateDocument()})})})}return M(p,{id:this.createId("StandardAction::Save"),text:this.getTextSaveButton(),type:n,visible:H.IsEditable,enabled:true,press:i.executeCommand("Save")})};n.getTextSaveButton=function t(){var e;const i=this.getTranslatedText("T_OP_OBJECT_PAGE_SAVE");const n=this.getTranslatedText("T_OP_OBJECT_PAGE_CREATE");return z(z(((e=this.dataViewModelPath.startingEntitySet.annotations.Session)===null||e===void 0?void 0:e.StickySessionSupported)!==undefined,H.IsCreateMode,U.IsNewObject),n,i)};n.getCancelButton=function t(){return M(p,{id:this.createId("StandardAction::Cancel"),text:s.isDraftRoot(this.dataViewModelPath.targetEntitySet)?"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_DISCARD_DRAFT}":"{sap.fe.i18n>C_COMMON_OBJECT_PAGE_CANCEL}",press:i.executeCommand("Cancel"),visible:H.IsEditable,ariaHasPopup:"Dialog",enabled:true,layoutData:M(A,{priority:"NeverOverflow"})})};n.getDataFieldForActionButton=function t(e){if(e.annotationPath){return M(c,{id:F([this.id,this.getActionModelPath(e)]),action:e,contextPath:this.contextPath})}};n.getManifestButton=function t(e){if(_.isManifestAction(e)){return M(u,{id:F(["fe","FooterBar",e.id]),action:e})}};n.getActionControls=function t(e){const i=_.buildEmphasizedButtonExpression(this.dataViewModelPath);return this.actions.map(t=>{switch(t.type){case L.DefaultApply:return this.getApplyButton(e,i);case L.DataFieldForAction:return this.getDataFieldForActionButton(t);case L.Primary:return this.getPrimary(e,i);case L.Secondary:return this.getCancelButton();default:return this.getManifestButton(t)}}).filter(t=>!!t)};n.getContent=function t(e){const i=e.getController();return E(b,{id:this.id,asyncMode:true,visible:this.getVisibility(),children:[M(y,{id:this.createId("MessageButton::AriaText"),text:"{sap.fe.i18n>C_COMMON_SAPFE_ERROR_MESSAGES_PAGE_BUTTON_ARIA_TEXT}"}),M(d,{id:this.createId("MessageButton"),messageChange:()=>i._getFooterVisibility(),ariaLabelledBy:[this.createId("MessageButton::AriaText")],type:"Emphasized",ariaHasPopup:"Dialog"}),M(m,{}),this.getDraftIndicator(),this.getActionControls(e)]})};return e}(e),x=Z(B.prototype,"id",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),S=Z(B.prototype,"actions",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),I=Z(B.prototype,"contextPath",[O],{configurable:true,enumerable:true,writable:true,initializer:null}),B))||T);w=tt;return w},false);