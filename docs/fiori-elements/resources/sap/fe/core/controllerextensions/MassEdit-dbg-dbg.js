/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log", "sap/fe/core/helpers/ClassSupport", "sap/fe/core/helpers/MassEditHelper", "sap/fe/core/helpers/ModelHelper", "sap/m/MessageBox", "sap/ui/core/mvc/ControllerExtension", "sap/ui/core/mvc/OverrideExecution", "../CommonUtils"], function (Log, ClassSupport, MassEditHelper, ModelHelper, MessageBox, ControllerExtension, OverrideExecution, CommonUtils) {
  "use strict";

  var _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _class, _class2;
  var publicExtension = ClassSupport.publicExtension;
  var privateExtension = ClassSupport.privateExtension;
  var finalExtension = ClassSupport.finalExtension;
  var extensible = ClassSupport.extensible;
  var defineUI5Class = ClassSupport.defineUI5Class;
  function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }
  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }
  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }
  /**
   * @class Controller extension providing hooks for the mass edit in a table
   * @name sap.fe.core.controllerextensions.MassEdit
   * @hideconstructor
   * @private
   */
  let MassEdit = (_dec = defineUI5Class("sap.fe.core.controllerextensions.MassEdit"), _dec2 = publicExtension(), _dec3 = finalExtension(), _dec4 = publicExtension(), _dec5 = finalExtension(), _dec6 = privateExtension(), _dec7 = extensible(OverrideExecution.After), _dec(_class = (_class2 = /*#__PURE__*/function (_ControllerExtension) {
    _inheritsLoose(MassEdit, _ControllerExtension);
    function MassEdit() {
      return _ControllerExtension.apply(this, arguments) || this;
    }
    var _proto = MassEdit.prototype;
    _proto.getMessageDetailForNonEditable = function getMessageDetailForNonEditable(oResourceBundle, typeName, typeNamePlural) {
      const sHeader = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_MESSAGE_DETAIL_HEADER"),
        sReasonGroup = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_MESSAGE_DETAIL_REASON", [typeNamePlural]),
        sReasonDraft = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_MESSAGE_DETAIL_REASON_DRAFT", [typeName]),
        sReasonNonEditable = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_MESSAGE_DETAIL_REASON_NON_EDITABLE", [typeName]);
      return `<p><strong>${sHeader}</strong></p>\n` + (!!sReasonGroup && `<p>${sReasonGroup}</p>\n` + `<ul>` + (!!sReasonDraft && `<li>${sReasonDraft}</li>`) + (!!sReasonNonEditable && `<li>${sReasonNonEditable}</li>`) + `</ul>`);
    };
    _proto.getResourceText = function getResourceText(exp, control) {
      const resolvedText = exp && CommonUtils.getTranslatedTextFromExpBindingString(exp, control);
      return resolvedText && resolvedText.toLocaleLowerCase();
    };
    _proto._openConfirmDialog = function _openConfirmDialog(oTable, aContexts, iSelectedContexts) {
      const iUpdatableContexts = (aContexts || []).length;
      const view = this.getView();
      return new Promise(resolve => {
        view.getModel("sap.fe.i18n").getResourceBundle().then(oResourceBundle => {
          const sEditButton = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_BUTTON_TEXT"),
            sCancelButton = oResourceBundle.getText("C_COMMON_OBJECT_PAGE_CANCEL"),
            iNonEditable = iSelectedContexts - iUpdatableContexts,
            entityTypePath = oTable.data("entityType"),
            metaModel = oTable.getModel().getMetaModel(),
            headerInfoAnno = metaModel.getObject(`${entityTypePath}@com.sap.vocabularies.UI.v1.HeaderInfo`),
            typeName = headerInfoAnno && this.getResourceText(headerInfoAnno.TypeName, view) || oResourceBundle.getText("C_MASS_EDIT_DIALOG_DEFAULT_TYPENAME"),
            typeNamePlural = headerInfoAnno && this.getResourceText(headerInfoAnno.TypeNamePlural, view) || oResourceBundle.getText("C_MASS_EDIT_DIALOG_DEFAULT_TYPENAME_PLURAL"),
            sMessage = oResourceBundle.getText("C_MASS_EDIT_CONFIRM_MESSAGE", [iNonEditable, iSelectedContexts, iUpdatableContexts, typeNamePlural]),
            sPath = oTable.data("targetCollectionPath"),
            oMetaModel = oTable.getModel().getMetaModel(),
            bIsDraft = ModelHelper.isDraftSupported(oMetaModel, sPath),
            bDisplayMode = oTable.data("displayModePropertyBinding") === "true",
            sMessageDetail = bIsDraft && bDisplayMode && this.getMessageDetailForNonEditable(oResourceBundle, typeName, typeNamePlural);
          MessageBox.warning(sMessage, {
            details: sMessageDetail,
            actions: [sEditButton, sCancelButton],
            emphasizedAction: sEditButton,
            contentWidth: "100px",
            onClose: function (sSelection) {
              let aContextsForEdit = [];
              if (sSelection === sEditButton) {
                Log.info("Mass Edit: Confirmed to edit ", iUpdatableContexts.toString(), " selections.");
                aContextsForEdit = aContexts;
              } else if (sSelection === sCancelButton) {
                Log.info("Mass Edit: Cancelled.");
              }
              resolve(aContextsForEdit);
            }
          });
        }).catch(function (error) {
          Log.error(error);
        });
      });
    };
    _proto._confirmContexts = function _confirmContexts(oTable, aContexts) {
      const oInternalModelContext = oTable.getBindingContext("internal"),
        iSelectedContexts = +oInternalModelContext.getProperty("numberOfSelectedContexts") || 0;
      aContexts = aContexts || [];
      if (aContexts.length && aContexts.length !== iSelectedContexts) {
        return this._openConfirmDialog(oTable, aContexts, iSelectedContexts);
      }
      return Promise.resolve(aContexts);
    }

    /**
     * The following operations are performed by method openMassEditDialog:
     * => Opens the mass edit dialog.
     * => Implements the save and cancel functionality.
     * => Sets the runtime model to the dialog.
     * => Sets the static model's context to the dialog.
     *
     * @param oTable Instance of the table
     * @returns A promise that resolves on open of the mass edit dialog.
     * @private
     */;
    _proto.openMassEditDialog = function openMassEditDialog(oTable) {
      const oController = this.getView().getController(),
        pContextsForEdit = this.fetchContextsForEdit(oTable);
      return pContextsForEdit.then(this._confirmContexts.bind(this, oTable)).then(function (aContexts) {
        return aContexts && aContexts.length > 0 ? MassEditHelper.createDialog(oTable, aContexts, oController) : Promise.resolve();
      }).then(function (oDialog) {
        if (oDialog) {
          oTable.addDependent(oDialog);
          oDialog.open();
        }
      }).catch(function (oError) {
        Log.error("Mass Edit: Something went wrong in mass edit dialog creation.", oError);
      });
    }

    /**
     * Returns a promise that resolves to the contexts for mass edit.
     *
     * @function
     * @param oTable Table for mass edit.
     * @alias sap.fe.core.contrllerextensions.MassEdit#fetchContextsForEdit
     * @returns A promise to be resolved with an array of context(s) which should be considered for mass edit.
     * @private
     */;
    _proto.fetchContextsForEdit = function fetchContextsForEdit(oTable) {
      //To be overridden by the application
      const oInternalModelContext = oTable.getBindingContext("internal"),
        aSelectedContexts = oInternalModelContext.getProperty("updatableContexts") || [];
      return Promise.resolve(aSelectedContexts);
    };
    return MassEdit;
  }(ControllerExtension), (_applyDecoratedDescriptor(_class2.prototype, "getMessageDetailForNonEditable", [_dec2, _dec3], Object.getOwnPropertyDescriptor(_class2.prototype, "getMessageDetailForNonEditable"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "openMassEditDialog", [_dec4, _dec5], Object.getOwnPropertyDescriptor(_class2.prototype, "openMassEditDialog"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, "fetchContextsForEdit", [_dec6, _dec7], Object.getOwnPropertyDescriptor(_class2.prototype, "fetchContextsForEdit"), _class2.prototype)), _class2)) || _class);
  return MassEdit;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNYXNzRWRpdCIsImRlZmluZVVJNUNsYXNzIiwicHVibGljRXh0ZW5zaW9uIiwiZmluYWxFeHRlbnNpb24iLCJwcml2YXRlRXh0ZW5zaW9uIiwiZXh0ZW5zaWJsZSIsIk92ZXJyaWRlRXhlY3V0aW9uIiwiQWZ0ZXIiLCJnZXRNZXNzYWdlRGV0YWlsRm9yTm9uRWRpdGFibGUiLCJvUmVzb3VyY2VCdW5kbGUiLCJ0eXBlTmFtZSIsInR5cGVOYW1lUGx1cmFsIiwic0hlYWRlciIsImdldFRleHQiLCJzUmVhc29uR3JvdXAiLCJzUmVhc29uRHJhZnQiLCJzUmVhc29uTm9uRWRpdGFibGUiLCJnZXRSZXNvdXJjZVRleHQiLCJleHAiLCJjb250cm9sIiwicmVzb2x2ZWRUZXh0IiwiQ29tbW9uVXRpbHMiLCJnZXRUcmFuc2xhdGVkVGV4dEZyb21FeHBCaW5kaW5nU3RyaW5nIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJfb3BlbkNvbmZpcm1EaWFsb2ciLCJvVGFibGUiLCJhQ29udGV4dHMiLCJpU2VsZWN0ZWRDb250ZXh0cyIsImlVcGRhdGFibGVDb250ZXh0cyIsImxlbmd0aCIsInZpZXciLCJnZXRWaWV3IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRNb2RlbCIsImdldFJlc291cmNlQnVuZGxlIiwidGhlbiIsInNFZGl0QnV0dG9uIiwic0NhbmNlbEJ1dHRvbiIsImlOb25FZGl0YWJsZSIsImVudGl0eVR5cGVQYXRoIiwiZGF0YSIsIm1ldGFNb2RlbCIsImdldE1ldGFNb2RlbCIsImhlYWRlckluZm9Bbm5vIiwiZ2V0T2JqZWN0IiwiVHlwZU5hbWUiLCJUeXBlTmFtZVBsdXJhbCIsInNNZXNzYWdlIiwic1BhdGgiLCJvTWV0YU1vZGVsIiwiYklzRHJhZnQiLCJNb2RlbEhlbHBlciIsImlzRHJhZnRTdXBwb3J0ZWQiLCJiRGlzcGxheU1vZGUiLCJzTWVzc2FnZURldGFpbCIsIk1lc3NhZ2VCb3giLCJ3YXJuaW5nIiwiZGV0YWlscyIsImFjdGlvbnMiLCJlbXBoYXNpemVkQWN0aW9uIiwiY29udGVudFdpZHRoIiwib25DbG9zZSIsInNTZWxlY3Rpb24iLCJhQ29udGV4dHNGb3JFZGl0IiwiTG9nIiwiaW5mbyIsInRvU3RyaW5nIiwiY2F0Y2giLCJlcnJvciIsIl9jb25maXJtQ29udGV4dHMiLCJvSW50ZXJuYWxNb2RlbENvbnRleHQiLCJnZXRCaW5kaW5nQ29udGV4dCIsImdldFByb3BlcnR5Iiwib3Blbk1hc3NFZGl0RGlhbG9nIiwib0NvbnRyb2xsZXIiLCJnZXRDb250cm9sbGVyIiwicENvbnRleHRzRm9yRWRpdCIsImZldGNoQ29udGV4dHNGb3JFZGl0IiwiYmluZCIsIk1hc3NFZGl0SGVscGVyIiwiY3JlYXRlRGlhbG9nIiwib0RpYWxvZyIsImFkZERlcGVuZGVudCIsIm9wZW4iLCJvRXJyb3IiLCJhU2VsZWN0ZWRDb250ZXh0cyIsIkNvbnRyb2xsZXJFeHRlbnNpb24iXSwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIk1hc3NFZGl0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIFJlc291cmNlQnVuZGxlIGZyb20gXCJzYXAvYmFzZS9pMThuL1Jlc291cmNlQnVuZGxlXCI7XG5pbXBvcnQgTG9nIGZyb20gXCJzYXAvYmFzZS9Mb2dcIjtcbmltcG9ydCB7IGRlZmluZVVJNUNsYXNzLCBleHRlbnNpYmxlLCBmaW5hbEV4dGVuc2lvbiwgcHJpdmF0ZUV4dGVuc2lvbiwgcHVibGljRXh0ZW5zaW9uIH0gZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvQ2xhc3NTdXBwb3J0XCI7XG5pbXBvcnQgTWFzc0VkaXRIZWxwZXIgZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvTWFzc0VkaXRIZWxwZXJcIjtcbmltcG9ydCB0eXBlIHsgSW50ZXJuYWxNb2RlbENvbnRleHQgfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9Nb2RlbEhlbHBlclwiO1xuaW1wb3J0IE1vZGVsSGVscGVyIGZyb20gXCJzYXAvZmUvY29yZS9oZWxwZXJzL01vZGVsSGVscGVyXCI7XG5pbXBvcnQgdHlwZSBQYWdlQ29udHJvbGxlciBmcm9tIFwic2FwL2ZlL2NvcmUvUGFnZUNvbnRyb2xsZXJcIjtcbmltcG9ydCBNZXNzYWdlQm94IGZyb20gXCJzYXAvbS9NZXNzYWdlQm94XCI7XG5pbXBvcnQgdHlwZSBDb250cm9sIGZyb20gXCJzYXAvdWkvY29yZS9Db250cm9sXCI7XG5pbXBvcnQgQ29udHJvbGxlckV4dGVuc2lvbiBmcm9tIFwic2FwL3VpL2NvcmUvbXZjL0NvbnRyb2xsZXJFeHRlbnNpb25cIjtcbmltcG9ydCBPdmVycmlkZUV4ZWN1dGlvbiBmcm9tIFwic2FwL3VpL2NvcmUvbXZjL092ZXJyaWRlRXhlY3V0aW9uXCI7XG5pbXBvcnQgdHlwZSBUYWJsZSBmcm9tIFwic2FwL3VpL21kYy9UYWJsZVwiO1xuaW1wb3J0IHR5cGUgQ29udGV4dCBmcm9tIFwic2FwL3VpL21vZGVsL0NvbnRleHRcIjtcbmltcG9ydCBPRGF0YU1ldGFNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L09EYXRhTWV0YU1vZGVsXCI7XG5pbXBvcnQgdHlwZSBSZXNvdXJjZU1vZGVsIGZyb20gXCJzYXAvdWkvbW9kZWwvcmVzb3VyY2UvUmVzb3VyY2VNb2RlbFwiO1xuaW1wb3J0IENvbW1vblV0aWxzIGZyb20gXCIuLi9Db21tb25VdGlsc1wiO1xuXG4vKipcbiAqIEBjbGFzcyBDb250cm9sbGVyIGV4dGVuc2lvbiBwcm92aWRpbmcgaG9va3MgZm9yIHRoZSBtYXNzIGVkaXQgaW4gYSB0YWJsZVxuICogQG5hbWUgc2FwLmZlLmNvcmUuY29udHJvbGxlcmV4dGVuc2lvbnMuTWFzc0VkaXRcbiAqIEBoaWRlY29uc3RydWN0b3JcbiAqIEBwcml2YXRlXG4gKi9cbkBkZWZpbmVVSTVDbGFzcyhcInNhcC5mZS5jb3JlLmNvbnRyb2xsZXJleHRlbnNpb25zLk1hc3NFZGl0XCIpXG5jbGFzcyBNYXNzRWRpdCBleHRlbmRzIENvbnRyb2xsZXJFeHRlbnNpb24ge1xuXHRAcHVibGljRXh0ZW5zaW9uKClcblx0QGZpbmFsRXh0ZW5zaW9uKClcblx0Z2V0TWVzc2FnZURldGFpbEZvck5vbkVkaXRhYmxlKG9SZXNvdXJjZUJ1bmRsZTogUmVzb3VyY2VCdW5kbGUsIHR5cGVOYW1lOiBzdHJpbmcsIHR5cGVOYW1lUGx1cmFsOiBzdHJpbmcpIHtcblx0XHRjb25zdCBzSGVhZGVyID0gb1Jlc291cmNlQnVuZGxlLmdldFRleHQoXCJDX01BU1NfRURJVF9DT05GSVJNX01FU1NBR0VfREVUQUlMX0hFQURFUlwiKSxcblx0XHRcdHNSZWFzb25Hcm91cCA9IG9SZXNvdXJjZUJ1bmRsZS5nZXRUZXh0KFwiQ19NQVNTX0VESVRfQ09ORklSTV9NRVNTQUdFX0RFVEFJTF9SRUFTT05cIiwgW3R5cGVOYW1lUGx1cmFsXSksXG5cdFx0XHRzUmVhc29uRHJhZnQgPSBvUmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChcIkNfTUFTU19FRElUX0NPTkZJUk1fTUVTU0FHRV9ERVRBSUxfUkVBU09OX0RSQUZUXCIsIFt0eXBlTmFtZV0pLFxuXHRcdFx0c1JlYXNvbk5vbkVkaXRhYmxlID0gb1Jlc291cmNlQnVuZGxlLmdldFRleHQoXCJDX01BU1NfRURJVF9DT05GSVJNX01FU1NBR0VfREVUQUlMX1JFQVNPTl9OT05fRURJVEFCTEVcIiwgW3R5cGVOYW1lXSk7XG5cblx0XHRyZXR1cm4gKFxuXHRcdFx0YDxwPjxzdHJvbmc+JHtzSGVhZGVyfTwvc3Ryb25nPjwvcD5cXG5gICtcblx0XHRcdCghIXNSZWFzb25Hcm91cCAmJlxuXHRcdFx0XHRgPHA+JHtzUmVhc29uR3JvdXB9PC9wPlxcbmAgK1xuXHRcdFx0XHRcdGA8dWw+YCArXG5cdFx0XHRcdFx0KCEhc1JlYXNvbkRyYWZ0ICYmIGA8bGk+JHtzUmVhc29uRHJhZnR9PC9saT5gKSArXG5cdFx0XHRcdFx0KCEhc1JlYXNvbk5vbkVkaXRhYmxlICYmIGA8bGk+JHtzUmVhc29uTm9uRWRpdGFibGV9PC9saT5gKSArXG5cdFx0XHRcdFx0YDwvdWw+YClcblx0XHQpO1xuXHR9XG5cblx0Z2V0UmVzb3VyY2VUZXh0KGV4cDogc3RyaW5nLCBjb250cm9sOiBDb250cm9sKSB7XG5cdFx0Y29uc3QgcmVzb2x2ZWRUZXh0ID0gZXhwICYmIENvbW1vblV0aWxzLmdldFRyYW5zbGF0ZWRUZXh0RnJvbUV4cEJpbmRpbmdTdHJpbmcoZXhwLCBjb250cm9sKTtcblx0XHRyZXR1cm4gcmVzb2x2ZWRUZXh0ICYmIHJlc29sdmVkVGV4dC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xuXHR9XG5cblx0X29wZW5Db25maXJtRGlhbG9nKG9UYWJsZTogVGFibGUsIGFDb250ZXh0czogQ29udGV4dFtdLCBpU2VsZWN0ZWRDb250ZXh0czogbnVtYmVyKSB7XG5cdFx0Y29uc3QgaVVwZGF0YWJsZUNvbnRleHRzID0gKGFDb250ZXh0cyB8fCBbXSkubGVuZ3RoO1xuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcblxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuXHRcdFx0KCh2aWV3LmdldE1vZGVsKFwic2FwLmZlLmkxOG5cIikgYXMgUmVzb3VyY2VNb2RlbCkuZ2V0UmVzb3VyY2VCdW5kbGUoKSBhcyBQcm9taXNlPFJlc291cmNlQnVuZGxlPilcblx0XHRcdFx0LnRoZW4oKG9SZXNvdXJjZUJ1bmRsZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNFZGl0QnV0dG9uID0gb1Jlc291cmNlQnVuZGxlLmdldFRleHQoXCJDX01BU1NfRURJVF9DT05GSVJNX0JVVFRPTl9URVhUXCIpLFxuXHRcdFx0XHRcdFx0c0NhbmNlbEJ1dHRvbiA9IG9SZXNvdXJjZUJ1bmRsZS5nZXRUZXh0KFwiQ19DT01NT05fT0JKRUNUX1BBR0VfQ0FOQ0VMXCIpLFxuXHRcdFx0XHRcdFx0aU5vbkVkaXRhYmxlID0gaVNlbGVjdGVkQ29udGV4dHMgLSBpVXBkYXRhYmxlQ29udGV4dHMsXG5cdFx0XHRcdFx0XHRlbnRpdHlUeXBlUGF0aCA9IG9UYWJsZS5kYXRhKFwiZW50aXR5VHlwZVwiKSxcblx0XHRcdFx0XHRcdG1ldGFNb2RlbCA9IG9UYWJsZS5nZXRNb2RlbCgpLmdldE1ldGFNb2RlbCgpIGFzIE9EYXRhTWV0YU1vZGVsLFxuXHRcdFx0XHRcdFx0aGVhZGVySW5mb0Fubm8gPSBtZXRhTW9kZWwuZ2V0T2JqZWN0KGAke2VudGl0eVR5cGVQYXRofUBjb20uc2FwLnZvY2FidWxhcmllcy5VSS52MS5IZWFkZXJJbmZvYCksXG5cdFx0XHRcdFx0XHR0eXBlTmFtZSA9XG5cdFx0XHRcdFx0XHRcdChoZWFkZXJJbmZvQW5ubyAmJiB0aGlzLmdldFJlc291cmNlVGV4dChoZWFkZXJJbmZvQW5uby5UeXBlTmFtZSwgdmlldykpIHx8XG5cdFx0XHRcdFx0XHRcdG9SZXNvdXJjZUJ1bmRsZS5nZXRUZXh0KFwiQ19NQVNTX0VESVRfRElBTE9HX0RFRkFVTFRfVFlQRU5BTUVcIiksXG5cdFx0XHRcdFx0XHR0eXBlTmFtZVBsdXJhbCA9XG5cdFx0XHRcdFx0XHRcdChoZWFkZXJJbmZvQW5ubyAmJiB0aGlzLmdldFJlc291cmNlVGV4dChoZWFkZXJJbmZvQW5uby5UeXBlTmFtZVBsdXJhbCwgdmlldykpIHx8XG5cdFx0XHRcdFx0XHRcdG9SZXNvdXJjZUJ1bmRsZS5nZXRUZXh0KFwiQ19NQVNTX0VESVRfRElBTE9HX0RFRkFVTFRfVFlQRU5BTUVfUExVUkFMXCIpLFxuXHRcdFx0XHRcdFx0c01lc3NhZ2UgPSBvUmVzb3VyY2VCdW5kbGUuZ2V0VGV4dChcIkNfTUFTU19FRElUX0NPTkZJUk1fTUVTU0FHRVwiLCBbXG5cdFx0XHRcdFx0XHRcdGlOb25FZGl0YWJsZSxcblx0XHRcdFx0XHRcdFx0aVNlbGVjdGVkQ29udGV4dHMsXG5cdFx0XHRcdFx0XHRcdGlVcGRhdGFibGVDb250ZXh0cyxcblx0XHRcdFx0XHRcdFx0dHlwZU5hbWVQbHVyYWxcblx0XHRcdFx0XHRcdF0pLFxuXHRcdFx0XHRcdFx0c1BhdGggPSBvVGFibGUuZGF0YShcInRhcmdldENvbGxlY3Rpb25QYXRoXCIpLFxuXHRcdFx0XHRcdFx0b01ldGFNb2RlbCA9IG9UYWJsZS5nZXRNb2RlbCgpLmdldE1ldGFNb2RlbCgpIGFzIE9EYXRhTWV0YU1vZGVsLFxuXHRcdFx0XHRcdFx0YklzRHJhZnQgPSBNb2RlbEhlbHBlci5pc0RyYWZ0U3VwcG9ydGVkKG9NZXRhTW9kZWwsIHNQYXRoKSxcblx0XHRcdFx0XHRcdGJEaXNwbGF5TW9kZSA9IG9UYWJsZS5kYXRhKFwiZGlzcGxheU1vZGVQcm9wZXJ0eUJpbmRpbmdcIikgPT09IFwidHJ1ZVwiLFxuXHRcdFx0XHRcdFx0c01lc3NhZ2VEZXRhaWwgPVxuXHRcdFx0XHRcdFx0XHRiSXNEcmFmdCAmJiBiRGlzcGxheU1vZGUgJiYgdGhpcy5nZXRNZXNzYWdlRGV0YWlsRm9yTm9uRWRpdGFibGUob1Jlc291cmNlQnVuZGxlLCB0eXBlTmFtZSwgdHlwZU5hbWVQbHVyYWwpO1xuXG5cdFx0XHRcdFx0TWVzc2FnZUJveC53YXJuaW5nKHNNZXNzYWdlLCB7XG5cdFx0XHRcdFx0XHRkZXRhaWxzOiBzTWVzc2FnZURldGFpbCxcblx0XHRcdFx0XHRcdGFjdGlvbnM6IFtzRWRpdEJ1dHRvbiwgc0NhbmNlbEJ1dHRvbl0sXG5cdFx0XHRcdFx0XHRlbXBoYXNpemVkQWN0aW9uOiBzRWRpdEJ1dHRvbixcblx0XHRcdFx0XHRcdGNvbnRlbnRXaWR0aDogXCIxMDBweFwiLFxuXHRcdFx0XHRcdFx0b25DbG9zZTogZnVuY3Rpb24gKHNTZWxlY3Rpb246IHN0cmluZykge1xuXHRcdFx0XHRcdFx0XHRsZXQgYUNvbnRleHRzRm9yRWRpdDogYW55W10gPSBbXTtcblx0XHRcdFx0XHRcdFx0aWYgKHNTZWxlY3Rpb24gPT09IHNFZGl0QnV0dG9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0TG9nLmluZm8oXCJNYXNzIEVkaXQ6IENvbmZpcm1lZCB0byBlZGl0IFwiLCBpVXBkYXRhYmxlQ29udGV4dHMudG9TdHJpbmcoKSwgXCIgc2VsZWN0aW9ucy5cIik7XG5cdFx0XHRcdFx0XHRcdFx0YUNvbnRleHRzRm9yRWRpdCA9IGFDb250ZXh0cztcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChzU2VsZWN0aW9uID09PSBzQ2FuY2VsQnV0dG9uKSB7XG5cdFx0XHRcdFx0XHRcdFx0TG9nLmluZm8oXCJNYXNzIEVkaXQ6IENhbmNlbGxlZC5cIik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShhQ29udGV4dHNGb3JFZGl0KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGFzIGFueSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRcdFx0XHRMb2cuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdF9jb25maXJtQ29udGV4dHMob1RhYmxlOiBUYWJsZSwgYUNvbnRleHRzOiBDb250ZXh0W10pIHtcblx0XHRjb25zdCBvSW50ZXJuYWxNb2RlbENvbnRleHQgPSBvVGFibGUuZ2V0QmluZGluZ0NvbnRleHQoXCJpbnRlcm5hbFwiKSBhcyBJbnRlcm5hbE1vZGVsQ29udGV4dCxcblx0XHRcdGlTZWxlY3RlZENvbnRleHRzID0gK29JbnRlcm5hbE1vZGVsQ29udGV4dC5nZXRQcm9wZXJ0eShcIm51bWJlck9mU2VsZWN0ZWRDb250ZXh0c1wiKSB8fCAwO1xuXG5cdFx0YUNvbnRleHRzID0gYUNvbnRleHRzIHx8IFtdO1xuXG5cdFx0aWYgKGFDb250ZXh0cy5sZW5ndGggJiYgYUNvbnRleHRzLmxlbmd0aCAhPT0gaVNlbGVjdGVkQ29udGV4dHMpIHtcblx0XHRcdHJldHVybiB0aGlzLl9vcGVuQ29uZmlybURpYWxvZyhvVGFibGUsIGFDb250ZXh0cywgaVNlbGVjdGVkQ29udGV4dHMpO1xuXHRcdH1cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFDb250ZXh0cyk7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGZvbGxvd2luZyBvcGVyYXRpb25zIGFyZSBwZXJmb3JtZWQgYnkgbWV0aG9kIG9wZW5NYXNzRWRpdERpYWxvZzpcblx0ICogPT4gT3BlbnMgdGhlIG1hc3MgZWRpdCBkaWFsb2cuXG5cdCAqID0+IEltcGxlbWVudHMgdGhlIHNhdmUgYW5kIGNhbmNlbCBmdW5jdGlvbmFsaXR5LlxuXHQgKiA9PiBTZXRzIHRoZSBydW50aW1lIG1vZGVsIHRvIHRoZSBkaWFsb2cuXG5cdCAqID0+IFNldHMgdGhlIHN0YXRpYyBtb2RlbCdzIGNvbnRleHQgdG8gdGhlIGRpYWxvZy5cblx0ICpcblx0ICogQHBhcmFtIG9UYWJsZSBJbnN0YW5jZSBvZiB0aGUgdGFibGVcblx0ICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgb24gb3BlbiBvZiB0aGUgbWFzcyBlZGl0IGRpYWxvZy5cblx0ICogQHByaXZhdGVcblx0ICovXG5cdEBwdWJsaWNFeHRlbnNpb24oKVxuXHRAZmluYWxFeHRlbnNpb24oKVxuXHRvcGVuTWFzc0VkaXREaWFsb2cob1RhYmxlOiBUYWJsZSkge1xuXHRcdGNvbnN0IG9Db250cm9sbGVyID0gdGhpcy5nZXRWaWV3KCkuZ2V0Q29udHJvbGxlcigpIGFzIFBhZ2VDb250cm9sbGVyLFxuXHRcdFx0cENvbnRleHRzRm9yRWRpdCA9IHRoaXMuZmV0Y2hDb250ZXh0c0ZvckVkaXQob1RhYmxlKTtcblxuXHRcdHJldHVybiBwQ29udGV4dHNGb3JFZGl0XG5cdFx0XHQudGhlbih0aGlzLl9jb25maXJtQ29udGV4dHMuYmluZCh0aGlzLCBvVGFibGUpKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKGFDb250ZXh0czogYW55KSB7XG5cdFx0XHRcdHJldHVybiBhQ29udGV4dHMgJiYgYUNvbnRleHRzLmxlbmd0aCA+IDAgPyBNYXNzRWRpdEhlbHBlci5jcmVhdGVEaWFsb2cob1RhYmxlLCBhQ29udGV4dHMsIG9Db250cm9sbGVyKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0fSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChvRGlhbG9nPzogYW55KSB7XG5cdFx0XHRcdGlmIChvRGlhbG9nKSB7XG5cdFx0XHRcdFx0b1RhYmxlLmFkZERlcGVuZGVudChvRGlhbG9nKTtcblx0XHRcdFx0XHRvRGlhbG9nLm9wZW4oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbiAob0Vycm9yOiBhbnkpIHtcblx0XHRcdFx0TG9nLmVycm9yKFwiTWFzcyBFZGl0OiBTb21ldGhpbmcgd2VudCB3cm9uZyBpbiBtYXNzIGVkaXQgZGlhbG9nIGNyZWF0aW9uLlwiLCBvRXJyb3IpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogUmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgY29udGV4dHMgZm9yIG1hc3MgZWRpdC5cblx0ICpcblx0ICogQGZ1bmN0aW9uXG5cdCAqIEBwYXJhbSBvVGFibGUgVGFibGUgZm9yIG1hc3MgZWRpdC5cblx0ICogQGFsaWFzIHNhcC5mZS5jb3JlLmNvbnRybGxlcmV4dGVuc2lvbnMuTWFzc0VkaXQjZmV0Y2hDb250ZXh0c0ZvckVkaXRcblx0ICogQHJldHVybnMgQSBwcm9taXNlIHRvIGJlIHJlc29sdmVkIHdpdGggYW4gYXJyYXkgb2YgY29udGV4dChzKSB3aGljaCBzaG91bGQgYmUgY29uc2lkZXJlZCBmb3IgbWFzcyBlZGl0LlxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0QHByaXZhdGVFeHRlbnNpb24oKVxuXHRAZXh0ZW5zaWJsZShPdmVycmlkZUV4ZWN1dGlvbi5BZnRlcilcblx0ZmV0Y2hDb250ZXh0c0ZvckVkaXQob1RhYmxlOiBUYWJsZSkge1xuXHRcdC8vVG8gYmUgb3ZlcnJpZGRlbiBieSB0aGUgYXBwbGljYXRpb25cblx0XHRjb25zdCBvSW50ZXJuYWxNb2RlbENvbnRleHQgPSBvVGFibGUuZ2V0QmluZGluZ0NvbnRleHQoXCJpbnRlcm5hbFwiKSBhcyBJbnRlcm5hbE1vZGVsQ29udGV4dCxcblx0XHRcdGFTZWxlY3RlZENvbnRleHRzID0gb0ludGVybmFsTW9kZWxDb250ZXh0LmdldFByb3BlcnR5KFwidXBkYXRhYmxlQ29udGV4dHNcIikgfHwgW107XG5cblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFTZWxlY3RlZENvbnRleHRzKTtcblx0fVxufVxuXG5leHBvcnQgZGVmYXVsdCBNYXNzRWRpdDtcbiJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7OztFQWlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFMQSxJQU9NQSxRQUFRLFdBRGJDLGNBQWMsQ0FBQywyQ0FBMkMsQ0FBQyxVQUUxREMsZUFBZSxFQUFFLFVBQ2pCQyxjQUFjLEVBQUUsVUFxR2hCRCxlQUFlLEVBQUUsVUFDakJDLGNBQWMsRUFBRSxVQThCaEJDLGdCQUFnQixFQUFFLFVBQ2xCQyxVQUFVLENBQUNDLGlCQUFpQixDQUFDQyxLQUFLLENBQUM7SUFBQTtJQUFBO01BQUE7SUFBQTtJQUFBO0lBQUEsT0FwSXBDQyw4QkFBOEIsR0FGOUIsd0NBRStCQyxlQUErQixFQUFFQyxRQUFnQixFQUFFQyxjQUFzQixFQUFFO01BQ3pHLE1BQU1DLE9BQU8sR0FBR0gsZUFBZSxDQUFDSSxPQUFPLENBQUMsMkNBQTJDLENBQUM7UUFDbkZDLFlBQVksR0FBR0wsZUFBZSxDQUFDSSxPQUFPLENBQUMsMkNBQTJDLEVBQUUsQ0FBQ0YsY0FBYyxDQUFDLENBQUM7UUFDckdJLFlBQVksR0FBR04sZUFBZSxDQUFDSSxPQUFPLENBQUMsaURBQWlELEVBQUUsQ0FBQ0gsUUFBUSxDQUFDLENBQUM7UUFDckdNLGtCQUFrQixHQUFHUCxlQUFlLENBQUNJLE9BQU8sQ0FBQyx3REFBd0QsRUFBRSxDQUFDSCxRQUFRLENBQUMsQ0FBQztNQUVuSCxPQUNFLGNBQWFFLE9BQVEsaUJBQWdCLElBQ3JDLENBQUMsQ0FBQ0UsWUFBWSxJQUNiLE1BQUtBLFlBQWEsUUFBTyxHQUN4QixNQUFLLElBQ0wsQ0FBQyxDQUFDQyxZQUFZLElBQUssT0FBTUEsWUFBYSxPQUFNLENBQUMsSUFDN0MsQ0FBQyxDQUFDQyxrQkFBa0IsSUFBSyxPQUFNQSxrQkFBbUIsT0FBTSxDQUFDLEdBQ3pELE9BQU0sQ0FBQztJQUVaLENBQUM7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