/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/controllerextensions/collaboration/CollaborationCommon", "sap/fe/core/converters/MetaModelConverter", "sap/fe/core/helpers/TypeGuards", "sap/m/MessageToast", "sap/ui/core/Core", "sap/ui/core/Fragment", "sap/ui/core/library"], function (CollaborationCommon, MetaModelConverter, TypeGuards, MessageToast, Core, Fragment, coreLibrary) {
  "use strict";

  var _exports = {};
  var isPathAnnotationExpression = TypeGuards.isPathAnnotationExpression;
  var UserStatus = CollaborationCommon.UserStatus;
  var UserEditingState = CollaborationCommon.UserEditingState;
  var shareObject = CollaborationCommon.shareObject;
  var getText = CollaborationCommon.getText;
  var CollaborationUtils = CollaborationCommon.CollaborationUtils;
  const ValueState = coreLibrary.ValueState;
  const openManageDialog = async function (view) {
    let dialog = byId("dialog");
    if (!dialog) {
      dialog = await createManageCollaborationDialog(view);
    }
    await readInvitedUsers(view);
    dialog.open();
  };
  _exports.openManageDialog = openManageDialog;
  async function createManageCollaborationDialog(view) {
    const pDialog = view.getController().getExtensionAPI().loadFragment({
      name: "sap.fe.core.controllerextensions.collaboration.ManageDialog",
      id: "manageCollaborationDraft",
      controller: {
        share: share,
        addUser: addUser,
        removeUser: removeUser,
        close: closeDialog,
        addUserChanged: addUserChanged,
        formatUserStatus: formatUserStatus,
        formatUserStatusColor: formatUserStatusColor
      }
    });
    return pDialog.then(function (dialog) {
      view.addDependent(dialog);
      return dialog;
    }).catch(function () {
      throw "not this time";
    });
  }
  async function readInvitedUsers(view) {
    const model = view.getModel();
    // TODO: inform model colleagues on missing TS definition
    const parameters = {
      $select: "UserID,UserDescription,UserEditingState"
    };
    const invitedUserList = model.bindList("DraftAdministrativeData/DraftAdministrativeUser", view.getBindingContext(), [], [], parameters);
    const internalModelContext = view.getBindingContext("internal");
    // TODO: limit?
    return invitedUserList.requestContexts(0, 100).then(function (aContexts) {
      const invitedUsers = [];
      const activeUsers = view.getModel("internal").getProperty("/collaboration/activeUsers") || [];
      const me = CollaborationUtils.getMe(view);
      let userStatus;
      if ((aContexts === null || aContexts === void 0 ? void 0 : aContexts.length) > 0) {
        aContexts.forEach(function (oContext) {
          const userData = oContext.getObject();
          const isMe = (me === null || me === void 0 ? void 0 : me.id) === userData.UserID;
          const isActive = activeUsers.find(u => u.id === userData.UserID);
          let userDescription = userData.UserDescription || userData.UserID;
          const initials = CollaborationUtils.formatInitials(userDescription);
          userDescription += isMe ? ` (${CollaborationUtils.getText("C_COLLABORATIONDRAFT_YOU")})` : "";
          switch (userData.UserEditingState) {
            case UserEditingState.NoChanges:
              userStatus = isActive ? UserStatus.CurrentlyEditing : UserStatus.NoChangesMade;
              break;
            case UserEditingState.InProgress:
              userStatus = isActive ? UserStatus.CurrentlyEditing : UserStatus.ChangesMade;
              break;
            default:
              userStatus = UserStatus.NotYetInvited;
          }
          const user = {
            id: userData.UserID,
            name: userDescription,
            status: userStatus,
            color: CollaborationUtils.getUserColor(userData.UserID, activeUsers, invitedUsers),
            initials: initials,
            me: isMe
          };
          invitedUsers.push(user);
        });
      } else {
        //not yet shared, just add me
        invitedUsers.push(me);
      }
      internalModelContext.setProperty("collaboration/UserID", "");
      internalModelContext.setProperty("collaboration/UserDescription", "");
      internalModelContext.setProperty("collaboration/invitedUsers", invitedUsers);
    }).catch(function () {
      // TODO: handle this case, close dialog?
    });
  }
  _exports.readInvitedUsers = readInvitedUsers;
  function addUser(event) {
    const addButton = event.getSource();
    const internalModelContext = addButton.getBindingContext("internal");
    const invitedUsers = internalModelContext.getProperty("invitedUsers") || [];
    const activeUsers = addButton.getModel("internal").getProperty("/collaboration/activeUsers");
    const newUser = {
      id: internalModelContext === null || internalModelContext === void 0 ? void 0 : internalModelContext.getProperty("UserID"),
      name: internalModelContext === null || internalModelContext === void 0 ? void 0 : internalModelContext.getProperty("UserDescription")
    };
    if (!(invitedUsers.findIndex(user => user.id === newUser.id) > -1 || newUser.id === newUser.name && newUser.id === "")) {
      newUser.name = newUser.name || newUser.id;
      newUser.initials = CollaborationUtils.formatInitials(newUser.name);
      newUser.color = CollaborationUtils.getUserColor(newUser.id, activeUsers, invitedUsers);
      newUser.transient = true;
      newUser.status = UserStatus.NotYetInvited;
      invitedUsers.unshift(newUser);
      internalModelContext.setProperty("invitedUsers", invitedUsers);
      internalModelContext.setProperty("UserID", "");
      internalModelContext.setProperty("UserDescription", "");
    }
  }
  function addUserChanged(event) {
    const userInput = event.getSource();
    event.getParameter("promise").then(function (newUserId) {
      const internalModelContext = userInput.getBindingContext("internal");
      const invitedUsers = internalModelContext.getProperty("invitedUsers") || [];
      if (invitedUsers.findIndex(user => user.id === newUserId) > -1) {
        userInput.setValueState("Error");
        userInput.setValueStateText(getText("C_COLLABORATIONDRAFT_INVITATION_USER_ERROR"));
      } else {
        userInput.setValueState("None");
        userInput.setValueStateText("");
      }
    }).catch(function () {
      throw "User couldn't be determined at all";
    });
  }
  function removeUser(event) {
    removeUserFromList(event.getSource());
  }
  function removeUserFromList(item) {
    const internalModelContext = item.getBindingContext("pageInternal");
    const deleteUserID = item.getBindingContext("internal").getProperty("id");
    let invitedUsers = internalModelContext.getProperty("collaboration/invitedUsers");
    invitedUsers = invitedUsers.filter(user => user.id !== deleteUserID);
    internalModelContext.setProperty("collaboration/invitedUsers", invitedUsers);
  }
  function byId(id) {
    return Core.byId(`manageCollaborationDraft--${id}`);
  }
  function closeDialog() {
    byId("dialog").close();
  }
  function getSharedItemName(bindingContext) {
    var _dataModel$targetObje, _dataModel$targetObje2;
    const model = bindingContext.getModel();
    const metaModel = model.getMetaModel();
    const entityPath = metaModel.getMetaPath(bindingContext.getPath());
    const dataModel = MetaModelConverter.getInvolvedDataModelObjects(metaModel.getContext(entityPath));
    const headerInfo = (_dataModel$targetObje = dataModel.targetObject.entityType.annotations) === null || _dataModel$targetObje === void 0 ? void 0 : (_dataModel$targetObje2 = _dataModel$targetObje.UI) === null || _dataModel$targetObje2 === void 0 ? void 0 : _dataModel$targetObje2.HeaderInfo;
    let sharedItemName = "";
    const title = headerInfo === null || headerInfo === void 0 ? void 0 : headerInfo.Title;
    if (title) {
      sharedItemName = isPathAnnotationExpression(title.Value) ? bindingContext.getProperty(title.Value.path) : title.Value;
    }
    return sharedItemName || (headerInfo === null || headerInfo === void 0 ? void 0 : headerInfo.TypeName) || "";
  }
  _exports.getSharedItemName = getSharedItemName;
  async function share(event) {
    const users = [];
    const source = event.getSource();
    const bindingContext = source.getBindingContext();
    const contexts = byId("userList").getBinding("items").getContexts();
    let numberOfNewInvitedUsers = 0;
    contexts.forEach(function (context) {
      users.push({
        UserID: context.getProperty("id"),
        UserAccessRole: "O" // For now according to UX every user retrieves the owner role
      });

      if (context.getObject().status === 0) {
        numberOfNewInvitedUsers++;
      }
    });
    try {
      await shareObject(bindingContext, users);
      MessageToast.show(getText("C_COLLABORATIONDRAFT_INVITATION_SUCCESS_TOAST", numberOfNewInvitedUsers.toString(), getSharedItemName(bindingContext)));
    } catch {
      MessageToast.show(getText("C_COLLABORATIONDRAFT_INVITATION_FAILED_TOAST"));
    }
    closeDialog();
  }
  _exports.share = share;
  async function showUserDetails(event, view) {
    const source = event.getSource();
    let popover = byId("userDetails");
    if (!popover) {
      popover = await createUserDetailsPopover(view);
    }
    popover.setBindingContext(source.getBindingContext("internal"), "internal");
    popover.openBy(source, false);
  }
  _exports.showUserDetails = showUserDetails;
  async function createUserDetailsPopover(view) {
    const popoverPromise = Fragment.load({
      id: "manageCollaborationDraft",
      // todo should be view id
      name: "sap.fe.core.controllerextensions.collaboration.UserDetails"
    });
    return popoverPromise.then(function (popover) {
      view.addDependent(popover);
      return popover;
    }).catch(function () {
      throw "not this time";
    });
  }
  function formatUserStatus(userStatus) {
    switch (userStatus) {
      case UserStatus.CurrentlyEditing:
        return getText("C_COLLABORATIONDRAFT_USER_CURRENTLY_EDITING");
      case UserStatus.ChangesMade:
        return getText("C_COLLABORATIONDRAFT_USER_CHANGES_MADE");
      case UserStatus.NoChangesMade:
        return getText("C_COLLABORATIONDRAFT_USER_NO_CHANGES_MADE");
      case UserStatus.NotYetInvited:
      default:
        return getText("C_COLLABORATIONDRAFT_USER_NOT_YET_INVITED");
    }
  }
  function formatUserStatusColor(userStatus) {
    switch (userStatus) {
      case UserStatus.CurrentlyEditing:
        return ValueState.Success;
      case UserStatus.ChangesMade:
        return ValueState.Warning;
      case UserStatus.NoChangesMade:
      case UserStatus.NotYetInvited:
      default:
        return ValueState.Information;
    }
  }
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWx1ZVN0YXRlIiwiY29yZUxpYnJhcnkiLCJvcGVuTWFuYWdlRGlhbG9nIiwidmlldyIsImRpYWxvZyIsImJ5SWQiLCJjcmVhdGVNYW5hZ2VDb2xsYWJvcmF0aW9uRGlhbG9nIiwicmVhZEludml0ZWRVc2VycyIsIm9wZW4iLCJwRGlhbG9nIiwiZ2V0Q29udHJvbGxlciIsImdldEV4dGVuc2lvbkFQSSIsImxvYWRGcmFnbWVudCIsIm5hbWUiLCJpZCIsImNvbnRyb2xsZXIiLCJzaGFyZSIsImFkZFVzZXIiLCJyZW1vdmVVc2VyIiwiY2xvc2UiLCJjbG9zZURpYWxvZyIsImFkZFVzZXJDaGFuZ2VkIiwiZm9ybWF0VXNlclN0YXR1cyIsImZvcm1hdFVzZXJTdGF0dXNDb2xvciIsInRoZW4iLCJhZGREZXBlbmRlbnQiLCJjYXRjaCIsIm1vZGVsIiwiZ2V0TW9kZWwiLCJwYXJhbWV0ZXJzIiwiJHNlbGVjdCIsImludml0ZWRVc2VyTGlzdCIsImJpbmRMaXN0IiwiZ2V0QmluZGluZ0NvbnRleHQiLCJpbnRlcm5hbE1vZGVsQ29udGV4dCIsInJlcXVlc3RDb250ZXh0cyIsImFDb250ZXh0cyIsImludml0ZWRVc2VycyIsImFjdGl2ZVVzZXJzIiwiZ2V0UHJvcGVydHkiLCJtZSIsIkNvbGxhYm9yYXRpb25VdGlscyIsImdldE1lIiwidXNlclN0YXR1cyIsImxlbmd0aCIsImZvckVhY2giLCJvQ29udGV4dCIsInVzZXJEYXRhIiwiZ2V0T2JqZWN0IiwiaXNNZSIsIlVzZXJJRCIsImlzQWN0aXZlIiwiZmluZCIsInUiLCJ1c2VyRGVzY3JpcHRpb24iLCJVc2VyRGVzY3JpcHRpb24iLCJpbml0aWFscyIsImZvcm1hdEluaXRpYWxzIiwiZ2V0VGV4dCIsIlVzZXJFZGl0aW5nU3RhdGUiLCJOb0NoYW5nZXMiLCJVc2VyU3RhdHVzIiwiQ3VycmVudGx5RWRpdGluZyIsIk5vQ2hhbmdlc01hZGUiLCJJblByb2dyZXNzIiwiQ2hhbmdlc01hZGUiLCJOb3RZZXRJbnZpdGVkIiwidXNlciIsInN0YXR1cyIsImNvbG9yIiwiZ2V0VXNlckNvbG9yIiwicHVzaCIsInNldFByb3BlcnR5IiwiZXZlbnQiLCJhZGRCdXR0b24iLCJnZXRTb3VyY2UiLCJuZXdVc2VyIiwiZmluZEluZGV4IiwidHJhbnNpZW50IiwidW5zaGlmdCIsInVzZXJJbnB1dCIsImdldFBhcmFtZXRlciIsIm5ld1VzZXJJZCIsInNldFZhbHVlU3RhdGUiLCJzZXRWYWx1ZVN0YXRlVGV4dCIsInJlbW92ZVVzZXJGcm9tTGlzdCIsIml0ZW0iLCJkZWxldGVVc2VySUQiLCJmaWx0ZXIiLCJDb3JlIiwiZ2V0U2hhcmVkSXRlbU5hbWUiLCJiaW5kaW5nQ29udGV4dCIsIm1ldGFNb2RlbCIsImdldE1ldGFNb2RlbCIsImVudGl0eVBhdGgiLCJnZXRNZXRhUGF0aCIsImdldFBhdGgiLCJkYXRhTW9kZWwiLCJNZXRhTW9kZWxDb252ZXJ0ZXIiLCJnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHMiLCJnZXRDb250ZXh0IiwiaGVhZGVySW5mbyIsInRhcmdldE9iamVjdCIsImVudGl0eVR5cGUiLCJhbm5vdGF0aW9ucyIsIlVJIiwiSGVhZGVySW5mbyIsInNoYXJlZEl0ZW1OYW1lIiwidGl0bGUiLCJUaXRsZSIsImlzUGF0aEFubm90YXRpb25FeHByZXNzaW9uIiwiVmFsdWUiLCJwYXRoIiwiVHlwZU5hbWUiLCJ1c2VycyIsInNvdXJjZSIsImNvbnRleHRzIiwiZ2V0QmluZGluZyIsImdldENvbnRleHRzIiwibnVtYmVyT2ZOZXdJbnZpdGVkVXNlcnMiLCJjb250ZXh0IiwiVXNlckFjY2Vzc1JvbGUiLCJzaGFyZU9iamVjdCIsIk1lc3NhZ2VUb2FzdCIsInNob3ciLCJ0b1N0cmluZyIsInNob3dVc2VyRGV0YWlscyIsInBvcG92ZXIiLCJjcmVhdGVVc2VyRGV0YWlsc1BvcG92ZXIiLCJzZXRCaW5kaW5nQ29udGV4dCIsIm9wZW5CeSIsInBvcG92ZXJQcm9taXNlIiwiRnJhZ21lbnQiLCJsb2FkIiwiU3VjY2VzcyIsIldhcm5pbmciLCJJbmZvcm1hdGlvbiJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiTWFuYWdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQmFja2VuZFVzZXIsIFVzZXIgfSBmcm9tIFwic2FwL2ZlL2NvcmUvY29udHJvbGxlcmV4dGVuc2lvbnMvY29sbGFib3JhdGlvbi9Db2xsYWJvcmF0aW9uQ29tbW9uXCI7XG5pbXBvcnQge1xuXHRDb2xsYWJvcmF0aW9uVXRpbHMsXG5cdGdldFRleHQsXG5cdHNoYXJlT2JqZWN0LFxuXHRVc2VyRWRpdGluZ1N0YXRlLFxuXHRVc2VyU3RhdHVzXG59IGZyb20gXCJzYXAvZmUvY29yZS9jb250cm9sbGVyZXh0ZW5zaW9ucy9jb2xsYWJvcmF0aW9uL0NvbGxhYm9yYXRpb25Db21tb25cIjtcbmltcG9ydCAqIGFzIE1ldGFNb2RlbENvbnZlcnRlciBmcm9tIFwic2FwL2ZlL2NvcmUvY29udmVydGVycy9NZXRhTW9kZWxDb252ZXJ0ZXJcIjtcbmltcG9ydCB0eXBlIHsgSW50ZXJuYWxNb2RlbENvbnRleHQgfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9Nb2RlbEhlbHBlclwiO1xuaW1wb3J0IHsgaXNQYXRoQW5ub3RhdGlvbkV4cHJlc3Npb24gfSBmcm9tIFwic2FwL2ZlL2NvcmUvaGVscGVycy9UeXBlR3VhcmRzXCI7XG5pbXBvcnQgdHlwZSBCdXR0b24gZnJvbSBcInNhcC9tL0J1dHRvblwiO1xuaW1wb3J0IHR5cGUgRGlhbG9nIGZyb20gXCJzYXAvbS9EaWFsb2dcIjtcbmltcG9ydCB0eXBlIElucHV0IGZyb20gXCJzYXAvbS9JbnB1dFwiO1xuaW1wb3J0IE1lc3NhZ2VUb2FzdCBmcm9tIFwic2FwL20vTWVzc2FnZVRvYXN0XCI7XG5pbXBvcnQgdHlwZSBQb3BvdmVyIGZyb20gXCJzYXAvbS9Qb3BvdmVyXCI7XG5pbXBvcnQgdHlwZSBUYWJsZSBmcm9tIFwic2FwL20vVGFibGVcIjtcbmltcG9ydCB0eXBlIEV2ZW50IGZyb20gXCJzYXAvdWkvYmFzZS9FdmVudFwiO1xuaW1wb3J0IHR5cGUgQ29udHJvbCBmcm9tIFwic2FwL3VpL2NvcmUvQ29udHJvbFwiO1xuaW1wb3J0IENvcmUgZnJvbSBcInNhcC91aS9jb3JlL0NvcmVcIjtcbmltcG9ydCBGcmFnbWVudCBmcm9tIFwic2FwL3VpL2NvcmUvRnJhZ21lbnRcIjtcbmltcG9ydCBjb3JlTGlicmFyeSBmcm9tIFwic2FwL3VpL2NvcmUvbGlicmFyeVwiO1xuaW1wb3J0IHR5cGUgVmlldyBmcm9tIFwic2FwL3VpL2NvcmUvbXZjL1ZpZXdcIjtcbmltcG9ydCB0eXBlIENvbnRleHQgZnJvbSBcInNhcC91aS9tb2RlbC9vZGF0YS92NC9Db250ZXh0XCI7XG5pbXBvcnQgdHlwZSBPRGF0YUxpc3RCaW5kaW5nIGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvT0RhdGFMaXN0QmluZGluZ1wiO1xuaW1wb3J0IHR5cGUgT0RhdGFNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L09EYXRhTW9kZWxcIjtcbmNvbnN0IFZhbHVlU3RhdGUgPSBjb3JlTGlicmFyeS5WYWx1ZVN0YXRlO1xuXG5leHBvcnQgY29uc3Qgb3Blbk1hbmFnZURpYWxvZyA9IGFzeW5jIGZ1bmN0aW9uICh2aWV3OiBWaWV3KSB7XG5cdGxldCBkaWFsb2c6IGFueSA9IGJ5SWQoXCJkaWFsb2dcIik7XG5cblx0aWYgKCFkaWFsb2cpIHtcblx0XHRkaWFsb2cgPSBhd2FpdCBjcmVhdGVNYW5hZ2VDb2xsYWJvcmF0aW9uRGlhbG9nKHZpZXcpO1xuXHR9XG5cblx0YXdhaXQgcmVhZEludml0ZWRVc2Vycyh2aWV3KTtcblx0ZGlhbG9nLm9wZW4oKTtcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU1hbmFnZUNvbGxhYm9yYXRpb25EaWFsb2codmlldzogVmlldykge1xuXHRjb25zdCBwRGlhbG9nOiBQcm9taXNlPGFueT4gPSAodmlldy5nZXRDb250cm9sbGVyKCkgYXMgYW55KS5nZXRFeHRlbnNpb25BUEkoKS5sb2FkRnJhZ21lbnQoe1xuXHRcdG5hbWU6IFwic2FwLmZlLmNvcmUuY29udHJvbGxlcmV4dGVuc2lvbnMuY29sbGFib3JhdGlvbi5NYW5hZ2VEaWFsb2dcIixcblx0XHRpZDogXCJtYW5hZ2VDb2xsYWJvcmF0aW9uRHJhZnRcIixcblx0XHRjb250cm9sbGVyOiB7XG5cdFx0XHRzaGFyZTogc2hhcmUsXG5cdFx0XHRhZGRVc2VyOiBhZGRVc2VyLFxuXHRcdFx0cmVtb3ZlVXNlcjogcmVtb3ZlVXNlcixcblx0XHRcdGNsb3NlOiBjbG9zZURpYWxvZyxcblx0XHRcdGFkZFVzZXJDaGFuZ2VkOiBhZGRVc2VyQ2hhbmdlZCxcblx0XHRcdGZvcm1hdFVzZXJTdGF0dXM6IGZvcm1hdFVzZXJTdGF0dXMsXG5cdFx0XHRmb3JtYXRVc2VyU3RhdHVzQ29sb3I6IGZvcm1hdFVzZXJTdGF0dXNDb2xvclxuXHRcdH1cblx0fSk7XG5cdHJldHVybiBwRGlhbG9nXG5cdFx0LnRoZW4oZnVuY3Rpb24gKGRpYWxvZzogYW55KSB7XG5cdFx0XHR2aWV3LmFkZERlcGVuZGVudChkaWFsb2cpO1xuXHRcdFx0cmV0dXJuIGRpYWxvZztcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aHJvdyBcIm5vdCB0aGlzIHRpbWVcIjtcblx0XHR9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRJbnZpdGVkVXNlcnModmlldzogVmlldykge1xuXHRjb25zdCBtb2RlbCA9IHZpZXcuZ2V0TW9kZWwoKSBhcyBPRGF0YU1vZGVsO1xuXHQvLyBUT0RPOiBpbmZvcm0gbW9kZWwgY29sbGVhZ3VlcyBvbiBtaXNzaW5nIFRTIGRlZmluaXRpb25cblx0Y29uc3QgcGFyYW1ldGVyczogYW55ID0ge1xuXHRcdCRzZWxlY3Q6IFwiVXNlcklELFVzZXJEZXNjcmlwdGlvbixVc2VyRWRpdGluZ1N0YXRlXCJcblx0fTtcblx0Y29uc3QgaW52aXRlZFVzZXJMaXN0ID0gbW9kZWwuYmluZExpc3QoXG5cdFx0XCJEcmFmdEFkbWluaXN0cmF0aXZlRGF0YS9EcmFmdEFkbWluaXN0cmF0aXZlVXNlclwiLFxuXHRcdHZpZXcuZ2V0QmluZGluZ0NvbnRleHQoKSBhcyBDb250ZXh0LFxuXHRcdFtdLFxuXHRcdFtdLFxuXHRcdHBhcmFtZXRlcnNcblx0KTtcblx0Y29uc3QgaW50ZXJuYWxNb2RlbENvbnRleHQgPSB2aWV3LmdldEJpbmRpbmdDb250ZXh0KFwiaW50ZXJuYWxcIikgYXMgSW50ZXJuYWxNb2RlbENvbnRleHQ7XG5cdC8vIFRPRE86IGxpbWl0P1xuXHRyZXR1cm4gaW52aXRlZFVzZXJMaXN0XG5cdFx0LnJlcXVlc3RDb250ZXh0cygwLCAxMDApXG5cdFx0LnRoZW4oZnVuY3Rpb24gKGFDb250ZXh0cykge1xuXHRcdFx0Y29uc3QgaW52aXRlZFVzZXJzOiBVc2VyW10gPSBbXTtcblx0XHRcdGNvbnN0IGFjdGl2ZVVzZXJzID0gdmlldy5nZXRNb2RlbChcImludGVybmFsXCIpLmdldFByb3BlcnR5KFwiL2NvbGxhYm9yYXRpb24vYWN0aXZlVXNlcnNcIikgfHwgW107XG5cdFx0XHRjb25zdCBtZSA9IENvbGxhYm9yYXRpb25VdGlscy5nZXRNZSh2aWV3KTtcblx0XHRcdGxldCB1c2VyU3RhdHVzOiBVc2VyU3RhdHVzO1xuXHRcdFx0aWYgKGFDb250ZXh0cz8ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRhQ29udGV4dHMuZm9yRWFjaChmdW5jdGlvbiAob0NvbnRleHQpIHtcblx0XHRcdFx0XHRjb25zdCB1c2VyRGF0YSA9IG9Db250ZXh0LmdldE9iamVjdCgpIGFzIEJhY2tlbmRVc2VyO1xuXHRcdFx0XHRcdGNvbnN0IGlzTWU6IGJvb2xlYW4gPSBtZT8uaWQgPT09IHVzZXJEYXRhLlVzZXJJRDtcblx0XHRcdFx0XHRjb25zdCBpc0FjdGl2ZSA9IGFjdGl2ZVVzZXJzLmZpbmQoKHU6IFVzZXIpID0+IHUuaWQgPT09IHVzZXJEYXRhLlVzZXJJRCk7XG5cdFx0XHRcdFx0bGV0IHVzZXJEZXNjcmlwdGlvbiA9IHVzZXJEYXRhLlVzZXJEZXNjcmlwdGlvbiB8fCB1c2VyRGF0YS5Vc2VySUQ7XG5cdFx0XHRcdFx0Y29uc3QgaW5pdGlhbHMgPSBDb2xsYWJvcmF0aW9uVXRpbHMuZm9ybWF0SW5pdGlhbHModXNlckRlc2NyaXB0aW9uKTtcblx0XHRcdFx0XHR1c2VyRGVzY3JpcHRpb24gKz0gaXNNZSA/IGAgKCR7Q29sbGFib3JhdGlvblV0aWxzLmdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9ZT1VcIil9KWAgOiBcIlwiO1xuXHRcdFx0XHRcdHN3aXRjaCAodXNlckRhdGEuVXNlckVkaXRpbmdTdGF0ZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBVc2VyRWRpdGluZ1N0YXRlLk5vQ2hhbmdlczpcblx0XHRcdFx0XHRcdFx0dXNlclN0YXR1cyA9IGlzQWN0aXZlID8gVXNlclN0YXR1cy5DdXJyZW50bHlFZGl0aW5nIDogVXNlclN0YXR1cy5Ob0NoYW5nZXNNYWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgVXNlckVkaXRpbmdTdGF0ZS5JblByb2dyZXNzOlxuXHRcdFx0XHRcdFx0XHR1c2VyU3RhdHVzID0gaXNBY3RpdmUgPyBVc2VyU3RhdHVzLkN1cnJlbnRseUVkaXRpbmcgOiBVc2VyU3RhdHVzLkNoYW5nZXNNYWRlO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdHVzZXJTdGF0dXMgPSBVc2VyU3RhdHVzLk5vdFlldEludml0ZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvbnN0IHVzZXI6IFVzZXIgPSB7XG5cdFx0XHRcdFx0XHRpZDogdXNlckRhdGEuVXNlcklELFxuXHRcdFx0XHRcdFx0bmFtZTogdXNlckRlc2NyaXB0aW9uLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiB1c2VyU3RhdHVzLFxuXHRcdFx0XHRcdFx0Y29sb3I6IENvbGxhYm9yYXRpb25VdGlscy5nZXRVc2VyQ29sb3IodXNlckRhdGEuVXNlcklELCBhY3RpdmVVc2VycywgaW52aXRlZFVzZXJzKSxcblx0XHRcdFx0XHRcdGluaXRpYWxzOiBpbml0aWFscyxcblx0XHRcdFx0XHRcdG1lOiBpc01lXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRpbnZpdGVkVXNlcnMucHVzaCh1c2VyKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvL25vdCB5ZXQgc2hhcmVkLCBqdXN0IGFkZCBtZVxuXHRcdFx0XHRpbnZpdGVkVXNlcnMucHVzaChtZSk7XG5cdFx0XHR9XG5cdFx0XHRpbnRlcm5hbE1vZGVsQ29udGV4dC5zZXRQcm9wZXJ0eShcImNvbGxhYm9yYXRpb24vVXNlcklEXCIsIFwiXCIpO1xuXHRcdFx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJjb2xsYWJvcmF0aW9uL1VzZXJEZXNjcmlwdGlvblwiLCBcIlwiKTtcblx0XHRcdGludGVybmFsTW9kZWxDb250ZXh0LnNldFByb3BlcnR5KFwiY29sbGFib3JhdGlvbi9pbnZpdGVkVXNlcnNcIiwgaW52aXRlZFVzZXJzKTtcblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyBUT0RPOiBoYW5kbGUgdGhpcyBjYXNlLCBjbG9zZSBkaWFsb2c/XG5cdFx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFVzZXIoZXZlbnQ6IEV2ZW50KSB7XG5cdGNvbnN0IGFkZEJ1dHRvbiA9IGV2ZW50LmdldFNvdXJjZSgpIGFzIEJ1dHRvbjtcblx0Y29uc3QgaW50ZXJuYWxNb2RlbENvbnRleHQgPSBhZGRCdXR0b24uZ2V0QmluZGluZ0NvbnRleHQoXCJpbnRlcm5hbFwiKSBhcyBJbnRlcm5hbE1vZGVsQ29udGV4dDtcblx0Y29uc3QgaW52aXRlZFVzZXJzOiBVc2VyW10gPSBpbnRlcm5hbE1vZGVsQ29udGV4dC5nZXRQcm9wZXJ0eShcImludml0ZWRVc2Vyc1wiKSB8fCBbXTtcblx0Y29uc3QgYWN0aXZlVXNlcnMgPSBhZGRCdXR0b24uZ2V0TW9kZWwoXCJpbnRlcm5hbFwiKS5nZXRQcm9wZXJ0eShcIi9jb2xsYWJvcmF0aW9uL2FjdGl2ZVVzZXJzXCIpO1xuXHRjb25zdCBuZXdVc2VyOiBVc2VyID0ge1xuXHRcdGlkOiBpbnRlcm5hbE1vZGVsQ29udGV4dD8uZ2V0UHJvcGVydHkoXCJVc2VySURcIiksXG5cdFx0bmFtZTogaW50ZXJuYWxNb2RlbENvbnRleHQ/LmdldFByb3BlcnR5KFwiVXNlckRlc2NyaXB0aW9uXCIpXG5cdH07XG5cblx0aWYgKCEoaW52aXRlZFVzZXJzLmZpbmRJbmRleCgodXNlcikgPT4gdXNlci5pZCA9PT0gbmV3VXNlci5pZCkgPiAtMSB8fCAobmV3VXNlci5pZCA9PT0gbmV3VXNlci5uYW1lICYmIG5ld1VzZXIuaWQgPT09IFwiXCIpKSkge1xuXHRcdG5ld1VzZXIubmFtZSA9IG5ld1VzZXIubmFtZSB8fCBuZXdVc2VyLmlkO1xuXHRcdG5ld1VzZXIuaW5pdGlhbHMgPSBDb2xsYWJvcmF0aW9uVXRpbHMuZm9ybWF0SW5pdGlhbHMobmV3VXNlci5uYW1lKTtcblx0XHRuZXdVc2VyLmNvbG9yID0gQ29sbGFib3JhdGlvblV0aWxzLmdldFVzZXJDb2xvcihuZXdVc2VyLmlkLCBhY3RpdmVVc2VycywgaW52aXRlZFVzZXJzKTtcblx0XHRuZXdVc2VyLnRyYW5zaWVudCA9IHRydWU7XG5cdFx0bmV3VXNlci5zdGF0dXMgPSBVc2VyU3RhdHVzLk5vdFlldEludml0ZWQ7XG5cdFx0aW52aXRlZFVzZXJzLnVuc2hpZnQobmV3VXNlcik7XG5cdFx0aW50ZXJuYWxNb2RlbENvbnRleHQuc2V0UHJvcGVydHkoXCJpbnZpdGVkVXNlcnNcIiwgaW52aXRlZFVzZXJzKTtcblx0XHRpbnRlcm5hbE1vZGVsQ29udGV4dC5zZXRQcm9wZXJ0eShcIlVzZXJJRFwiLCBcIlwiKTtcblx0XHRpbnRlcm5hbE1vZGVsQ29udGV4dC5zZXRQcm9wZXJ0eShcIlVzZXJEZXNjcmlwdGlvblwiLCBcIlwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiBhZGRVc2VyQ2hhbmdlZChldmVudDogRXZlbnQpIHtcblx0Y29uc3QgdXNlcklucHV0ID0gZXZlbnQuZ2V0U291cmNlKCkgYXMgSW5wdXQ7XG5cdGV2ZW50XG5cdFx0LmdldFBhcmFtZXRlcihcInByb21pc2VcIilcblx0XHQudGhlbihmdW5jdGlvbiAobmV3VXNlcklkOiBzdHJpbmcpIHtcblx0XHRcdGNvbnN0IGludGVybmFsTW9kZWxDb250ZXh0ID0gdXNlcklucHV0LmdldEJpbmRpbmdDb250ZXh0KFwiaW50ZXJuYWxcIikgYXMgSW50ZXJuYWxNb2RlbENvbnRleHQ7XG5cdFx0XHRjb25zdCBpbnZpdGVkVXNlcnM6IFVzZXJbXSA9IGludGVybmFsTW9kZWxDb250ZXh0LmdldFByb3BlcnR5KFwiaW52aXRlZFVzZXJzXCIpIHx8IFtdO1xuXHRcdFx0aWYgKGludml0ZWRVc2Vycy5maW5kSW5kZXgoKHVzZXIpID0+IHVzZXIuaWQgPT09IG5ld1VzZXJJZCkgPiAtMSkge1xuXHRcdFx0XHR1c2VySW5wdXQuc2V0VmFsdWVTdGF0ZShcIkVycm9yXCIpO1xuXHRcdFx0XHR1c2VySW5wdXQuc2V0VmFsdWVTdGF0ZVRleHQoZ2V0VGV4dChcIkNfQ09MTEFCT1JBVElPTkRSQUZUX0lOVklUQVRJT05fVVNFUl9FUlJPUlwiKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR1c2VySW5wdXQuc2V0VmFsdWVTdGF0ZShcIk5vbmVcIik7XG5cdFx0XHRcdHVzZXJJbnB1dC5zZXRWYWx1ZVN0YXRlVGV4dChcIlwiKTtcblx0XHRcdH1cblx0XHR9KVxuXHRcdC5jYXRjaChmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aHJvdyBcIlVzZXIgY291bGRuJ3QgYmUgZGV0ZXJtaW5lZCBhdCBhbGxcIjtcblx0XHR9KTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVXNlcihldmVudDogRXZlbnQpIHtcblx0cmVtb3ZlVXNlckZyb21MaXN0KGV2ZW50LmdldFNvdXJjZSgpKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVXNlckZyb21MaXN0KGl0ZW06IGFueSkge1xuXHRjb25zdCBpbnRlcm5hbE1vZGVsQ29udGV4dCA9IGl0ZW0uZ2V0QmluZGluZ0NvbnRleHQoXCJwYWdlSW50ZXJuYWxcIik7XG5cdGNvbnN0IGRlbGV0ZVVzZXJJRCA9IGl0ZW0uZ2V0QmluZGluZ0NvbnRleHQoXCJpbnRlcm5hbFwiKS5nZXRQcm9wZXJ0eShcImlkXCIpO1xuXHRsZXQgaW52aXRlZFVzZXJzOiBVc2VyW10gPSBpbnRlcm5hbE1vZGVsQ29udGV4dC5nZXRQcm9wZXJ0eShcImNvbGxhYm9yYXRpb24vaW52aXRlZFVzZXJzXCIpO1xuXHRpbnZpdGVkVXNlcnMgPSBpbnZpdGVkVXNlcnMuZmlsdGVyKCh1c2VyKSA9PiB1c2VyLmlkICE9PSBkZWxldGVVc2VySUQpO1xuXHRpbnRlcm5hbE1vZGVsQ29udGV4dC5zZXRQcm9wZXJ0eShcImNvbGxhYm9yYXRpb24vaW52aXRlZFVzZXJzXCIsIGludml0ZWRVc2Vycyk7XG59XG5cbmZ1bmN0aW9uIGJ5SWQoaWQ6IHN0cmluZyk6IGFueSB7XG5cdHJldHVybiBDb3JlLmJ5SWQoYG1hbmFnZUNvbGxhYm9yYXRpb25EcmFmdC0tJHtpZH1gKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VEaWFsb2coKSB7XG5cdChieUlkKFwiZGlhbG9nXCIpIGFzIERpYWxvZykuY2xvc2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNoYXJlZEl0ZW1OYW1lKGJpbmRpbmdDb250ZXh0OiBDb250ZXh0KTogc3RyaW5nIHtcblx0Y29uc3QgbW9kZWwgPSBiaW5kaW5nQ29udGV4dC5nZXRNb2RlbCgpO1xuXHRjb25zdCBtZXRhTW9kZWwgPSBtb2RlbC5nZXRNZXRhTW9kZWwoKTtcblx0Y29uc3QgZW50aXR5UGF0aCA9IG1ldGFNb2RlbC5nZXRNZXRhUGF0aChiaW5kaW5nQ29udGV4dC5nZXRQYXRoKCkpO1xuXHRjb25zdCBkYXRhTW9kZWwgPSBNZXRhTW9kZWxDb252ZXJ0ZXIuZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzKG1ldGFNb2RlbC5nZXRDb250ZXh0KGVudGl0eVBhdGgpKTtcblx0Y29uc3QgaGVhZGVySW5mbyA9IGRhdGFNb2RlbC50YXJnZXRPYmplY3QuZW50aXR5VHlwZS5hbm5vdGF0aW9ucz8uVUk/LkhlYWRlckluZm87XG5cdGxldCBzaGFyZWRJdGVtTmFtZSA9IFwiXCI7XG5cdGNvbnN0IHRpdGxlID0gaGVhZGVySW5mbz8uVGl0bGU7XG5cdGlmICh0aXRsZSkge1xuXHRcdHNoYXJlZEl0ZW1OYW1lID0gaXNQYXRoQW5ub3RhdGlvbkV4cHJlc3Npb24odGl0bGUuVmFsdWUpID8gYmluZGluZ0NvbnRleHQuZ2V0UHJvcGVydHkodGl0bGUuVmFsdWUucGF0aCkgOiB0aXRsZS5WYWx1ZTtcblx0fVxuXHRyZXR1cm4gc2hhcmVkSXRlbU5hbWUgfHwgaGVhZGVySW5mbz8uVHlwZU5hbWUgfHwgXCJcIjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNoYXJlKGV2ZW50OiBFdmVudCkge1xuXHRjb25zdCB1c2VyczogQmFja2VuZFVzZXJbXSA9IFtdO1xuXHRjb25zdCBzb3VyY2UgPSBldmVudC5nZXRTb3VyY2UoKSBhcyBDb250cm9sO1xuXHRjb25zdCBiaW5kaW5nQ29udGV4dCA9IHNvdXJjZS5nZXRCaW5kaW5nQ29udGV4dCgpIGFzIENvbnRleHQ7XG5cdGNvbnN0IGNvbnRleHRzID0gKChieUlkKFwidXNlckxpc3RcIikgYXMgVGFibGUpLmdldEJpbmRpbmcoXCJpdGVtc1wiKSBhcyBPRGF0YUxpc3RCaW5kaW5nKS5nZXRDb250ZXh0cygpO1xuXHRsZXQgbnVtYmVyT2ZOZXdJbnZpdGVkVXNlcnMgPSAwO1xuXHRjb250ZXh0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdFx0dXNlcnMucHVzaCh7XG5cdFx0XHRVc2VySUQ6IGNvbnRleHQuZ2V0UHJvcGVydHkoXCJpZFwiKSxcblx0XHRcdFVzZXJBY2Nlc3NSb2xlOiBcIk9cIiAvLyBGb3Igbm93IGFjY29yZGluZyB0byBVWCBldmVyeSB1c2VyIHJldHJpZXZlcyB0aGUgb3duZXIgcm9sZVxuXHRcdH0pO1xuXHRcdGlmIChjb250ZXh0LmdldE9iamVjdCgpLnN0YXR1cyA9PT0gMCkge1xuXHRcdFx0bnVtYmVyT2ZOZXdJbnZpdGVkVXNlcnMrKztcblx0XHR9XG5cdH0pO1xuXG5cdHRyeSB7XG5cdFx0YXdhaXQgc2hhcmVPYmplY3QoYmluZGluZ0NvbnRleHQsIHVzZXJzKTtcblx0XHRNZXNzYWdlVG9hc3Quc2hvdyhcblx0XHRcdGdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9JTlZJVEFUSU9OX1NVQ0NFU1NfVE9BU1RcIiwgbnVtYmVyT2ZOZXdJbnZpdGVkVXNlcnMudG9TdHJpbmcoKSwgZ2V0U2hhcmVkSXRlbU5hbWUoYmluZGluZ0NvbnRleHQpKVxuXHRcdCk7XG5cdH0gY2F0Y2gge1xuXHRcdE1lc3NhZ2VUb2FzdC5zaG93KGdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9JTlZJVEFUSU9OX0ZBSUxFRF9UT0FTVFwiKSk7XG5cdH1cblx0Y2xvc2VEaWFsb2coKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3dVc2VyRGV0YWlscyhldmVudDogRXZlbnQsIHZpZXc6IFZpZXcpIHtcblx0Y29uc3Qgc291cmNlID0gZXZlbnQuZ2V0U291cmNlKCkgYXMgQ29udHJvbDtcblx0bGV0IHBvcG92ZXIgPSBieUlkKFwidXNlckRldGFpbHNcIikgYXMgUG9wb3Zlcjtcblx0aWYgKCFwb3BvdmVyKSB7XG5cdFx0cG9wb3ZlciA9IGF3YWl0IGNyZWF0ZVVzZXJEZXRhaWxzUG9wb3Zlcih2aWV3KTtcblx0fVxuXG5cdHBvcG92ZXIuc2V0QmluZGluZ0NvbnRleHQoc291cmNlLmdldEJpbmRpbmdDb250ZXh0KFwiaW50ZXJuYWxcIikgYXMgSW50ZXJuYWxNb2RlbENvbnRleHQsIFwiaW50ZXJuYWxcIik7XG5cblx0cG9wb3Zlci5vcGVuQnkoc291cmNlLCBmYWxzZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJEZXRhaWxzUG9wb3Zlcih2aWV3OiBWaWV3KSB7XG5cdGNvbnN0IHBvcG92ZXJQcm9taXNlOiBQcm9taXNlPGFueT4gPSBGcmFnbWVudC5sb2FkKHtcblx0XHRpZDogXCJtYW5hZ2VDb2xsYWJvcmF0aW9uRHJhZnRcIiwgLy8gdG9kbyBzaG91bGQgYmUgdmlldyBpZFxuXHRcdG5hbWU6IFwic2FwLmZlLmNvcmUuY29udHJvbGxlcmV4dGVuc2lvbnMuY29sbGFib3JhdGlvbi5Vc2VyRGV0YWlsc1wiXG5cdH0pO1xuXHRyZXR1cm4gcG9wb3ZlclByb21pc2Vcblx0XHQudGhlbihmdW5jdGlvbiAocG9wb3ZlcjogYW55KSB7XG5cdFx0XHR2aWV3LmFkZERlcGVuZGVudChwb3BvdmVyKTtcblx0XHRcdHJldHVybiBwb3BvdmVyO1xuXHRcdH0pXG5cdFx0LmNhdGNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdHRocm93IFwibm90IHRoaXMgdGltZVwiO1xuXHRcdH0pO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRVc2VyU3RhdHVzKHVzZXJTdGF0dXM6IFVzZXJTdGF0dXMpIHtcblx0c3dpdGNoICh1c2VyU3RhdHVzKSB7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLkN1cnJlbnRseUVkaXRpbmc6XG5cdFx0XHRyZXR1cm4gZ2V0VGV4dChcIkNfQ09MTEFCT1JBVElPTkRSQUZUX1VTRVJfQ1VSUkVOVExZX0VESVRJTkdcIik7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLkNoYW5nZXNNYWRlOlxuXHRcdFx0cmV0dXJuIGdldFRleHQoXCJDX0NPTExBQk9SQVRJT05EUkFGVF9VU0VSX0NIQU5HRVNfTUFERVwiKTtcblx0XHRjYXNlIFVzZXJTdGF0dXMuTm9DaGFuZ2VzTWFkZTpcblx0XHRcdHJldHVybiBnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfVVNFUl9OT19DSEFOR0VTX01BREVcIik7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLk5vdFlldEludml0ZWQ6XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfVVNFUl9OT1RfWUVUX0lOVklURURcIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gZm9ybWF0VXNlclN0YXR1c0NvbG9yKHVzZXJTdGF0dXM6IFVzZXJTdGF0dXMpIHtcblx0c3dpdGNoICh1c2VyU3RhdHVzKSB7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLkN1cnJlbnRseUVkaXRpbmc6XG5cdFx0XHRyZXR1cm4gVmFsdWVTdGF0ZS5TdWNjZXNzO1xuXHRcdGNhc2UgVXNlclN0YXR1cy5DaGFuZ2VzTWFkZTpcblx0XHRcdHJldHVybiBWYWx1ZVN0YXRlLldhcm5pbmc7XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLk5vQ2hhbmdlc01hZGU6XG5cdFx0Y2FzZSBVc2VyU3RhdHVzLk5vdFlldEludml0ZWQ6XG5cdFx0ZGVmYXVsdDpcblx0XHRcdHJldHVybiBWYWx1ZVN0YXRlLkluZm9ybWF0aW9uO1xuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBO0FBQUE7Ozs7Ozs7Ozs7O0VBMEJBLE1BQU1BLFVBQVUsR0FBR0MsV0FBVyxDQUFDRCxVQUFVO0VBRWxDLE1BQU1FLGdCQUFnQixHQUFHLGdCQUFnQkMsSUFBVSxFQUFFO0lBQzNELElBQUlDLE1BQVcsR0FBR0MsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUVoQyxJQUFJLENBQUNELE1BQU0sRUFBRTtNQUNaQSxNQUFNLEdBQUcsTUFBTUUsK0JBQStCLENBQUNILElBQUksQ0FBQztJQUNyRDtJQUVBLE1BQU1JLGdCQUFnQixDQUFDSixJQUFJLENBQUM7SUFDNUJDLE1BQU0sQ0FBQ0ksSUFBSSxFQUFFO0VBQ2QsQ0FBQztFQUFDO0VBRUYsZUFBZUYsK0JBQStCLENBQUNILElBQVUsRUFBRTtJQUMxRCxNQUFNTSxPQUFxQixHQUFJTixJQUFJLENBQUNPLGFBQWEsRUFBRSxDQUFTQyxlQUFlLEVBQUUsQ0FBQ0MsWUFBWSxDQUFDO01BQzFGQyxJQUFJLEVBQUUsNkRBQTZEO01BQ25FQyxFQUFFLEVBQUUsMEJBQTBCO01BQzlCQyxVQUFVLEVBQUU7UUFDWEMsS0FBSyxFQUFFQSxLQUFL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