/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/helpers/BindingToolkit", "sap/fe/macros/CommonHelper", "sap/ui/core/Component", "sap/ui/core/Core", "../../formatters/CollaborationFormatter"], function (BindingToolkit, CommonHelper, Component, Core, collaborationFormatter) {
  "use strict";

  var _exports = {};
  var getExpressionFromAnnotation = BindingToolkit.getExpressionFromAnnotation;
  var formatResult = BindingToolkit.formatResult;
  var constant = BindingToolkit.constant;
  var compileExpression = BindingToolkit.compileExpression;
  let UserStatus;
  (function (UserStatus) {
    UserStatus[UserStatus["NotYetInvited"] = 0] = "NotYetInvited";
    UserStatus[UserStatus["NoChangesMade"] = 1] = "NoChangesMade";
    UserStatus[UserStatus["ChangesMade"] = 2] = "ChangesMade";
    UserStatus[UserStatus["CurrentlyEditing"] = 3] = "CurrentlyEditing";
  })(UserStatus || (UserStatus = {}));
  _exports.UserStatus = UserStatus;
  let UserEditingState;
  (function (UserEditingState) {
    UserEditingState["NoChanges"] = "N";
    UserEditingState["InProgress"] = "P";
  })(UserEditingState || (UserEditingState = {}));
  _exports.UserEditingState = UserEditingState;
  let Activity;
  (function (Activity) {
    Activity["Join"] = "JOIN";
    Activity["JoinEcho"] = "JOINECHO";
    Activity["Leave"] = "LEAVE";
    Activity["Change"] = "CHANGE";
    Activity["Create"] = "CREATE";
    Activity["Delete"] = "DELETE";
    Activity["Action"] = "ACTION";
    Activity["LiveChange"] = "LIVECHANGE";
    Activity["Activate"] = "ACTIVATE";
    Activity["Discard"] = "DISCARD";
    Activity["Undo"] = "UNDO";
  })(Activity || (Activity = {}));
  _exports.Activity = Activity;
  const USERS_PARAMETERS = "Users";
  const USER_ID_PARAMETER = "UserID";
  function formatInitials(fullName) {
    // remove titles - those are the ones from S/4 to be checked if there are others
    const academicTitles = ["Dr.", "Prof.", "Prof. Dr.", "B.A.", "MBA", "Ph.D."];
    academicTitles.forEach(function (academicTitle) {
      fullName = fullName.replace(academicTitle, "");
    });
    let initials;
    const parts = fullName.trimStart().split(" ");
    if (parts.length > 1) {
      var _parts$shift, _parts$pop;
      initials = ((parts === null || parts === void 0 ? void 0 : (_parts$shift = parts.shift()) === null || _parts$shift === void 0 ? void 0 : _parts$shift.charAt(0)) || "") + ((_parts$pop = parts.pop()) === null || _parts$pop === void 0 ? void 0 : _parts$pop.charAt(0));
    } else {
      initials = fullName.substring(0, 2);
    }
    return initials.toUpperCase();
  }
  function getUserColor(UserID, activeUsers, invitedUsers) {
    // search if user is known
    const user = activeUsers.find(u => u.id === UserID);
    if (user) {
      return user.color;
    } else {
      // search for next free color
      for (let i = 1; i <= 10; i++) {
        if (activeUsers.findIndex(u => u.color === i) === -1 && invitedUsers.findIndex(u => u.color === i) === -1) {
          return i;
        }
      }
      // this seems to be a popular object :) for now just return 10 for all.
      // for invited we should start from 1 again so the colors are different
      return 10;
    }
  }
  function getValueHelpDelegate(contextPath) {
    // The non null assertion is safe here, because the action is only available if the annotation is present
    const actionName = contextPath.targetEntitySet.annotations.Common.DraftRoot.ShareAction.toString();
    // We are also sure that the action exist
    const action = contextPath.targetEntityType.resolvePath(actionName);
    // By definition the action has a parameter with the name "Users"
    const userParameters = action.parameters.find(param => param.name === USERS_PARAMETERS);
    const delegateConfiguration = {
      name: CommonHelper.addSingleQuotes("sap/fe/macros/valuehelp/ValueHelpDelegate"),
      payload: {
        propertyPath: CommonHelper.addSingleQuotes(`/${userParameters.type}/${USER_ID_PARAMETER}`),
        qualifiers: {},
        valueHelpQualifier: CommonHelper.addSingleQuotes(""),
        isActionParameterDialog: true
      }
    };
    return CommonHelper.objectToString(delegateConfiguration);
  }

  // copied from CommonUtils. Due to a cycle dependency I can't use CommonUtils here.
  // That's to be fixed. the discard popover thingy shouldn't be in the common utils at all
  _exports.getValueHelpDelegate = getValueHelpDelegate;
  function getAppComponent(oControl) {
    if (oControl.isA("sap.fe.core.AppComponent")) {
      return oControl;
    }
    const oOwner = Component.getOwnerComponentFor(oControl);
    if (!oOwner) {
      return oControl;
    } else {
      return getAppComponent(oOwner);
    }
  }
  function getMe(view) {
    const shellServiceHelper = getAppComponent(view).getShellServices();
    if (!shellServiceHelper || !shellServiceHelper.hasUShell()) {
      throw "No Shell... No User";
    }
    return {
      initials: shellServiceHelper.getUser().getInitials(),
      id: shellServiceHelper.getUser().getId(),
      name: `${shellServiceHelper.getUser().getFullName()} (${getText("C_COLLABORATIONDRAFT_YOU")})`,
      initialName: shellServiceHelper.getUser().getFullName(),
      color: 6,
      //  same color as FLP...
      me: true,
      status: UserStatus.CurrentlyEditing
    };
  }
  function getText(textId) {
    const oResourceModel = Core.getLibraryResourceBundle("sap.fe.core");
    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }
    return oResourceModel.getText(textId, args);
  }

  /**
   * Generate the expression binding of the Invitation dialog.
   *
   * @param dataModelPath The DataModelObjectPath
   * @returns The dialog title binding expression
   */
  _exports.getText = getText;
  function getInvitationDialogTitleExpBinding(dataModelPath) {
    var _headerInfo$Title;
    const headerInfo = dataModelPath.targetObject;
    const title = getExpressionFromAnnotation((_headerInfo$Title = headerInfo.Title) === null || _headerInfo$Title === void 0 ? void 0 : _headerInfo$Title.Value, [], "");
    const params = ["C_COLLABORATIONDRAFT_INVITATION_DIALOG", constant(headerInfo.TypeName), title];
    const titleExpression = formatResult(params, collaborationFormatter.getFormattedText);
    return compileExpression(titleExpression);
  }
  _exports.getInvitationDialogTitleExpBinding = getInvitationDialogTitleExpBinding;
  const CollaborationUtils = {
    formatInitials: formatInitials,
    getUserColor: getUserColor,
    getMe: getMe,
    getAppComponent: getAppComponent,
    getText: getText,
    getInvitationDialogTitleExpBinding: getInvitationDialogTitleExpBinding
  };
  _exports.CollaborationUtils = CollaborationUtils;
  function shareObject(bindingContext) {
    let users = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
    const model = bindingContext.getModel();
    const metaModel = model.getMetaModel();
    const entitySet = metaModel.getMetaPath(bindingContext);
    const shareActionName = metaModel.getObject(`${entitySet}@com.sap.vocabularies.Common.v1.DraftRoot/ShareAction`);
    const shareAction = model.bindContext(`${shareActionName}(...)`, bindingContext);
    shareAction.setParameter("Users", users);
    shareAction.setParameter("ShareAll", true);
    return shareAction.execute();
  }
  _exports.shareObject = shareObject;
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2VyU3RhdHVzIiwiVXNlckVkaXRpbmdTdGF0ZSIsIkFjdGl2aXR5IiwiVVNFUlNfUEFSQU1FVEVSUyIsIlVTRVJfSURfUEFSQU1FVEVSIiwiZm9ybWF0SW5pdGlhbHMiLCJmdWxsTmFtZSIsImFjYWRlbWljVGl0bGVzIiwiZm9yRWFjaCIsImFjYWRlbWljVGl0bGUiLCJyZXBsYWNlIiwiaW5pdGlhbHMiLCJwYXJ0cyIsInRyaW1TdGFydCIsInNwbGl0IiwibGVuZ3RoIiwic2hpZnQiLCJjaGFyQXQiLCJwb3AiLCJzdWJzdHJpbmciLCJ0b1VwcGVyQ2FzZSIsImdldFVzZXJDb2xvciIsIlVzZXJJRCIsImFjdGl2ZVVzZXJzIiwiaW52aXRlZFVzZXJzIiwidXNlciIsImZpbmQiLCJ1IiwiaWQiLCJjb2xvciIsImkiLCJmaW5kSW5kZXgiLCJnZXRWYWx1ZUhlbHBEZWxlZ2F0ZSIsImNvbnRleHRQYXRoIiwiYWN0aW9uTmFtZSIsInRhcmdldEVudGl0eVNldCIsImFubm90YXRpb25zIiwiQ29tbW9uIiwiRHJhZnRSb290IiwiU2hhcmVBY3Rpb24iLCJ0b1N0cmluZyIsImFjdGlvbiIsInRhcmdldEVudGl0eVR5cGUiLCJyZXNvbHZlUGF0aCIsInVzZXJQYXJhbWV0ZXJzIiwicGFyYW1ldGVycyIsInBhcmFtIiwibmFtZSIsImRlbGVnYXRlQ29uZmlndXJhdGlvbiIsIkNvbW1vbkhlbHBlciIsImFkZFNpbmdsZVF1b3RlcyIsInBheWxvYWQiLCJwcm9wZXJ0eVBhdGgiLCJ0eXBlIiwicXVhbGlmaWVycyIsInZhbHVlSGVscFF1YWxpZmllciIsImlzQWN0aW9uUGFyYW1ldGVyRGlhbG9nIiwib2JqZWN0VG9TdHJpbmciLCJnZXRBcHBDb21wb25lbnQiLCJvQ29udHJvbCIsImlzQSIsIm9Pd25lciIsIkNvbXBvbmVudCIsImdldE93bmVyQ29tcG9uZW50Rm9yIiwiZ2V0TWUiLCJ2aWV3Iiwic2hlbGxTZXJ2aWNlSGVscGVyIiwiZ2V0U2hlbGxTZXJ2aWNlcyIsImhhc1VTaGVsbCIsImdldFVzZXIiLCJnZXRJbml0aWFscyIsImdldElkIiwiZ2V0RnVsbE5hbWUiLCJnZXRUZXh0IiwiaW5pdGlhbE5hbWUiLCJtZSIsInN0YXR1cyIsIkN1cnJlbnRseUVkaXRpbmciLCJ0ZXh0SWQiLCJvUmVzb3VyY2VNb2RlbCIsIkNvcmUiLCJnZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUiLCJhcmdzIiwiZ2V0SW52aXRhdGlvbkRpYWxvZ1RpdGxlRXhwQmluZGluZyIsImRhdGFNb2RlbFBhdGgiLCJoZWFkZXJJbmZvIiwidGFyZ2V0T2JqZWN0IiwidGl0bGUiLCJnZXRFeHByZXNzaW9uRnJvbUFubm90YXRpb24iLCJUaXRsZSIsIlZhbHVlIiwicGFyYW1zIiwiY29uc3RhbnQiLCJUeXBlTmFtZSIsInRpdGxlRXhwcmVzc2lvbiIsImZvcm1hdFJlc3VsdCIsImNvbGxhYm9yYXRpb25Gb3JtYXR0ZXIiLCJnZXRGb3JtYXR0ZWRUZXh0IiwiY29tcGlsZUV4cHJlc3Npb24iLCJDb2xsYWJvcmF0aW9uVXRpbHMiLCJzaGFyZU9iamVjdCIsImJpbmRpbmdDb250ZXh0IiwidXNlcnMiLCJtb2RlbCIsImdldE1vZGVsIiwibWV0YU1vZGVsIiwiZ2V0TWV0YU1vZGVsIiwiZW50aXR5U2V0IiwiZ2V0TWV0YVBhdGgiLCJzaGFyZUFjdGlvbk5hbWUiLCJnZXRPYmplY3QiLCJzaGFyZUFjdGlvbiIsImJpbmRDb250ZXh0Iiwic2V0UGFyYW1ldGVyIiwiZXhlY3V0ZSJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiQ29sbGFib3JhdGlvbkNvbW1vbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBY3Rpb24gYXMgVm9jYWJ1bGFyeUFjdGlvbiB9IGZyb20gXCJAc2FwLXV4L3ZvY2FidWxhcmllcy10eXBlc1wiO1xuaW1wb3J0IHsgRW50aXR5U2V0QW5ub3RhdGlvbnNfQ29tbW9uIH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL3ZvY2FidWxhcmllcy9Db21tb25fRWRtXCI7XG5pbXBvcnQgeyBEYXRhRmllbGQsIEhlYWRlckluZm8gfSBmcm9tIFwiQHNhcC11eC92b2NhYnVsYXJpZXMtdHlwZXMvdm9jYWJ1bGFyaWVzL1VJXCI7XG5pbXBvcnQgdHlwZSBBcHBDb21wb25lbnQgZnJvbSBcInNhcC9mZS9jb3JlL0FwcENvbXBvbmVudFwiO1xuaW1wb3J0IHR5cGUgeyBDb21waWxlZEJpbmRpbmdUb29sa2l0RXhwcmVzc2lvbiB9IGZyb20gXCJzYXAvZmUvY29yZS9oZWxwZXJzL0JpbmRpbmdUb29sa2l0XCI7XG5pbXBvcnQgeyBjb21waWxlRXhwcmVzc2lvbiwgY29uc3RhbnQsIGZvcm1hdFJlc3VsdCwgZ2V0RXhwcmVzc2lvbkZyb21Bbm5vdGF0aW9uIH0gZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvQmluZGluZ1Rvb2xraXRcIjtcbmltcG9ydCBDb21tb25IZWxwZXIgZnJvbSBcInNhcC9mZS9tYWNyb3MvQ29tbW9uSGVscGVyXCI7XG5pbXBvcnQgeyB0eXBlIFZhbHVlSGVscFBheWxvYWQgfSBmcm9tIFwic2FwL2ZlL21hY3Jvcy9pbnRlcm5hbC92YWx1ZWhlbHAvVmFsdWVMaXN0SGVscGVyXCI7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gXCJzYXAvdWkvY29yZS9Db21wb25lbnRcIjtcbmltcG9ydCBDb3JlIGZyb20gXCJzYXAvdWkvY29yZS9Db3JlXCI7XG5pbXBvcnQgdHlwZSBWaWV3IGZyb20gXCJzYXAvdWkvY29yZS9tdmMvVmlld1wiO1xuaW1wb3J0IENvbnRleHQgZnJvbSBcInNhcC91aS9tb2RlbC9vZGF0YS92NC9Db250ZXh0XCI7XG5pbXBvcnQgY29sbGFib3JhdGlvbkZvcm1hdHRlciBmcm9tIFwiLi4vLi4vZm9ybWF0dGVycy9Db2xsYWJvcmF0aW9uRm9ybWF0dGVyXCI7XG5pbXBvcnQgeyBEYXRhTW9kZWxPYmplY3RQYXRoIH0gZnJvbSBcIi4uLy4uL3RlbXBsYXRpbmcvRGF0YU1vZGVsUGF0aEhlbHBlclwiO1xuXG5leHBvcnQgZW51bSBVc2VyU3RhdHVzIHtcblx0Tm90WWV0SW52aXRlZCA9IDAsXG5cdE5vQ2hhbmdlc01hZGUgPSAxLFxuXHRDaGFuZ2VzTWFkZSA9IDIsXG5cdEN1cnJlbnRseUVkaXRpbmcgPSAzXG59XG5cbmV4cG9ydCBlbnVtIFVzZXJFZGl0aW5nU3RhdGUge1xuXHROb0NoYW5nZXMgPSBcIk5cIixcblx0SW5Qcm9ncmVzcyA9IFwiUFwiXG59XG5cbmV4cG9ydCB0eXBlIFVzZXIgPSB7XG5cdGlkOiBzdHJpbmc7XG5cdGluaXRpYWxzPzogc3RyaW5nO1xuXHRuYW1lOiBzdHJpbmc7XG5cdGNvbG9yPzogbnVtYmVyO1xuXHR0cmFuc2llbnQ/OiBib29sZWFuO1xuXHRzdGF0dXM/OiBVc2VyU3RhdHVzO1xuXHRtZT86IGJvb2xlYW47XG5cdGluaXRpYWxOYW1lPzogc3RyaW5nO1xufTtcblxuLy8gYmFja2VuZCByZXByZXNlbnRhdGlvbiBvZiBhIHVzZXIgYWNjb3JkaW5nIHRvIGNvbGxhYm9yYXRpb24gZHJhZnQgc3BlY1xuZXhwb3J0IHR5cGUgQmFja2VuZFVzZXIgPSB7XG5cdFVzZXJJRDogc3RyaW5nO1xuXHRVc2VyQWNjZXNzUm9sZTogc3RyaW5nO1xuXHRVc2VyRWRpdGluZ1N0YXRlPzogVXNlckVkaXRpbmdTdGF0ZTtcblx0VXNlckRlc2NyaXB0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgVXNlckFjdGl2aXR5ID0gVXNlciAmIHtcblx0a2V5Pzogc3RyaW5nO1xufTtcblxuZXhwb3J0IGVudW0gQWN0aXZpdHkge1xuXHRKb2luID0gXCJKT0lOXCIsXG5cdEpvaW5FY2hvID0gXCJKT0lORUNIT1wiLFxuXHRMZWF2ZSA9IFwiTEVBVkVcIixcblx0Q2hhbmdlID0gXCJDSEFOR0VcIixcblx0Q3JlYXRlID0gXCJDUkVBVEVcIixcblx0RGVsZXRlID0gXCJERUxFVEVcIixcblx0QWN0aW9uID0gXCJBQ1RJT05cIixcblx0TGl2ZUNoYW5nZSA9IFwiTElWRUNIQU5HRVwiLFxuXHRBY3RpdmF0ZSA9IFwiQUNUSVZBVEVcIixcblx0RGlzY2FyZCA9IFwiRElTQ0FSRFwiLFxuXHRVbmRvID0gXCJVTkRPXCJcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZSA9IHtcblx0dXNlckRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cdHVzZXJJRDogc3RyaW5nO1xuXHR1c2VyQWN0aW9uOiBzdHJpbmc7XG5cdGNsaWVudEFjdGlvbjogc3RyaW5nO1xuXHRjbGllbnRUcmlnZ2VyZWRBY3Rpb25OYW1lPzogc3RyaW5nO1xuXHRjbGllbnRSZWZyZXNoTGlzdEJpbmRpbmc/OiBzdHJpbmc7XG5cdGNsaWVudFJlcXVlc3RlZFByb3BlcnRpZXM/OiBzdHJpbmc7XG5cdGNsaWVudENvbnRlbnQ6IHN0cmluZztcbn07XG5cbmNvbnN0IFVTRVJTX1BBUkFNRVRFUlMgPSBcIlVzZXJzXCI7XG5jb25zdCBVU0VSX0lEX1BBUkFNRVRFUiA9IFwiVXNlcklEXCI7XG5cbmZ1bmN0aW9uIGZvcm1hdEluaXRpYWxzKGZ1bGxOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuXHQvLyByZW1vdmUgdGl0bGVzIC0gdGhvc2UgYXJlIHRoZSBvbmVzIGZyb20gUy80IHRvIGJlIGNoZWNrZWQgaWYgdGhlcmUgYXJlIG90aGVyc1xuXHRjb25zdCBhY2FkZW1pY1RpdGxlcyA9IFtcIkRyLlwiLCBcIlByb2YuXCIsIFwiUHJvZi4gRHIuXCIsIFwiQi5BLlwiLCBcIk1CQVwiLCBcIlBoLkQuXCJdO1xuXHRhY2FkZW1pY1RpdGxlcy5mb3JFYWNoKGZ1bmN0aW9uIChhY2FkZW1pY1RpdGxlKSB7XG5cdFx0ZnVsbE5hbWUgPSBmdWxsTmFtZS5yZXBsYWNlKGFjYWRlbWljVGl0bGUsIFwiXCIpO1xuXHR9KTtcblxuXHRsZXQgaW5pdGlhbHM6IHN0cmluZztcblx0Y29uc3QgcGFydHMgPSBmdWxsTmFtZS50cmltU3RhcnQoKS5zcGxpdChcIiBcIik7XG5cblx0aWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcblx0XHRpbml0aWFscyA9IChwYXJ0cz8uc2hpZnQoKT8uY2hhckF0KDApIHx8IFwiXCIpICsgcGFydHMucG9wKCk/LmNoYXJBdCgwKTtcblx0fSBlbHNlIHtcblx0XHRpbml0aWFscyA9IGZ1bGxOYW1lLnN1YnN0cmluZygwLCAyKTtcblx0fVxuXG5cdHJldHVybiBpbml0aWFscy50b1VwcGVyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBnZXRVc2VyQ29sb3IoVXNlcklEOiBzdHJpbmcsIGFjdGl2ZVVzZXJzOiBVc2VyW10sIGludml0ZWRVc2VyczogVXNlcltdKSB7XG5cdC8vIHNlYXJjaCBpZiB1c2VyIGlzIGtub3duXG5cdGNvbnN0IHVzZXIgPSBhY3RpdmVVc2Vycy5maW5kKCh1KSA9PiB1LmlkID09PSBVc2VySUQpO1xuXHRpZiAodXNlcikge1xuXHRcdHJldHVybiB1c2VyLmNvbG9yO1xuXHR9IGVsc2Uge1xuXHRcdC8vIHNlYXJjaCBmb3IgbmV4dCBmcmVlIGNvbG9yXG5cdFx0Zm9yIChsZXQgaSA9IDE7IGkgPD0gMTA7IGkrKykge1xuXHRcdFx0aWYgKGFjdGl2ZVVzZXJzLmZpbmRJbmRleCgodSkgPT4gdS5jb2xvciA9PT0gaSkgPT09IC0xICYmIGludml0ZWRVc2Vycy5maW5kSW5kZXgoKHUpID0+IHUuY29sb3IgPT09IGkpID09PSAtMSkge1xuXHRcdFx0XHRyZXR1cm4gaTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gdGhpcyBzZWVtcyB0byBiZSBhIHBvcHVsYXIgb2JqZWN0IDopIGZvciBub3cganVzdCByZXR1cm4gMTAgZm9yIGFsbC5cblx0XHQvLyBmb3IgaW52aXRlZCB3ZSBzaG91bGQgc3RhcnQgZnJvbSAxIGFnYWluIHNvIHRoZSBjb2xvcnMgYXJlIGRpZmZlcmVudFxuXHRcdHJldHVybiAxMDtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVIZWxwRGVsZWdhdGUoY29udGV4dFBhdGg6IERhdGFNb2RlbE9iamVjdFBhdGgpIHtcblx0Ly8gVGhlIG5vbiBudWxsIGFzc2VydGlvbiBpcyBzYWZlIGhlcmUsIGJlY2F1c2UgdGhlIGFjdGlvbiBpcyBvbmx5IGF2YWlsYWJsZSBpZiB0aGUgYW5ub3RhdGlvbiBpcyBwcmVzZW50XG5cdGNvbnN0IGFjdGlvbk5hbWUgPSAoY29udGV4dFBhdGgudGFyZ2V0RW50aXR5U2V0IS5hbm5vdGF0aW9ucy5Db21tb24gYXMgRW50aXR5U2V0QW5ub3RhdGlvbnNfQ29tbW9uKS5EcmFmdFJvb3QhLlNoYXJlQWN0aW9uIS50b1N0cmluZygpO1xuXHQvLyBXZSBhcmUgYWxzbyBzdXJlIHRoYXQgdGhlIGFjdGlvbiBleGlzdFxuXHRjb25zdCBhY3Rpb24gPSBjb250ZXh0UGF0aC50YXJnZXRFbnRpdHlUeXBlLnJlc29sdmVQYXRoKGFjdGlvbk5hbWUpIGFzIFZvY2FidWxhcnlBY3Rpb247XG5cdC8vIEJ5IGRlZmluaXRpb24gdGhlIGFjdGlvbiBoYXMgYSBwYXJhbWV0ZXIgd2l0aCB0aGUgbmFtZSBcIlVzZXJzXCJcblx0Y29uc3QgdXNlclBhcmFtZXRlcnMgPSBhY3Rpb24ucGFyYW1ldGVycy5maW5kKChwYXJhbSkgPT4gcGFyYW0ubmFtZSA9PT0gVVNFUlNfUEFSQU1FVEVSUykhO1xuXG5cdGNvbnN0IGRlbGVnYXRlQ29uZmlndXJhdGlvbjogeyBuYW1lOiBzdHJpbmc7IHBheWxvYWQ6IFZhbHVlSGVscFBheWxvYWQgfSA9IHtcblx0XHRuYW1lOiBDb21tb25IZWxwZXIuYWRkU2luZ2xlUXVvdGVzKFwic2FwL2ZlL21hY3Jvcy92YWx1ZWhlbHAvVmFsdWVIZWxwRGVsZWdhdGVcIiksXG5cdFx0cGF5bG9hZDoge1xuXHRcdFx0cHJvcGVydHlQYXRoOiBDb21tb25IZWxwZXIuYWRkU2luZ2xlUXVvdGVzKGAvJHt1c2VyUGFyYW1ldGVycy50eXBlfS8ke1VTRVJfSURfUEFSQU1FVEVSfWApLFxuXHRcdFx0cXVhbGlmaWVyczoge30sXG5cdFx0XHR2YWx1ZUhlbHBRdWFsaWZpZXI6IENvbW1vbkhlbHBlci5hZGRTaW5nbGVRdW90ZXMoXCJcIiksXG5cdFx0XHRpc0FjdGlvblBhcmFtZXRlckRpYWxvZzogdHJ1ZVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIENvbW1vbkhlbHBlci5vYmplY3RUb1N0cmluZyhkZWxlZ2F0ZUNvbmZpZ3VyYXRpb24pO1xufVxuXG4vLyBjb3BpZWQgZnJvbSBDb21tb25VdGlscy4gRHVlIHRvIGEgY3ljbGUgZGVwZW5kZW5jeSBJIGNhbid0IHVzZSBDb21tb25VdGlscyBoZXJlLlxuLy8gVGhhdCdzIHRvIGJlIGZpeGVkLiB0aGUgZGlzY2FyZCBwb3BvdmVyIHRoaW5neSBzaG91bGRuJ3QgYmUgaW4gdGhlIGNvbW1vbiB1dGlscyBhdCBhbGxcbmZ1bmN0aW9uIGdldEFwcENvbXBvbmVudChvQ29udHJvbDogYW55KTogQXBwQ29tcG9uZW50IHtcblx0aWYgKG9Db250cm9sLmlzQShcInNhcC5mZS5jb3JlLkFwcENvbXBvbmVudFwiKSkge1xuXHRcdHJldHVybiBvQ29udHJvbDtcblx0fVxuXHRjb25zdCBvT3duZXIgPSBDb21wb25lbnQuZ2V0T3duZXJDb21wb25lbnRGb3Iob0NvbnRyb2wpO1xuXHRpZiAoIW9Pd25lcikge1xuXHRcdHJldHVybiBvQ29udHJvbDtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gZ2V0QXBwQ29tcG9uZW50KG9Pd25lcik7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0TWUodmlldzogVmlldyk6IFVzZXIge1xuXHRjb25zdCBzaGVsbFNlcnZpY2VIZWxwZXIgPSBnZXRBcHBDb21wb25lbnQodmlldykuZ2V0U2hlbGxTZXJ2aWNlcygpO1xuXHRpZiAoIXNoZWxsU2VydmljZUhlbHBlciB8fCAhc2hlbGxTZXJ2aWNlSGVscGVyLmhhc1VTaGVsbCgpKSB7XG5cdFx0dGhyb3cgXCJObyBTaGVsbC4uLiBObyBVc2VyXCI7XG5cdH1cblx0cmV0dXJuIHtcblx0XHRpbml0aWFsczogc2hlbGxTZXJ2aWNlSGVscGVyLmdldFVzZXIoKS5nZXRJbml0aWFscygpLFxuXHRcdGlkOiBzaGVsbFNlcnZpY2VIZWxwZXIuZ2V0VXNlcigpLmdldElkKCksXG5cdFx0bmFtZTogYCR7c2hlbGxTZXJ2aWNlSGVscGVyLmdldFVzZXIoKS5nZXRGdWxsTmFtZSgpfSAoJHtnZXRUZXh0KFwiQ19DT0xMQUJPUkFUSU9ORFJBRlRfWU9VXCIpfSlgLFxuXHRcdGluaXRpYWxOYW1lOiBzaGVsbFNlcnZpY2VIZWxwZXIuZ2V0VXNlcigpLmdldEZ1bGxOYW1lKCksXG5cdFx0Y29sb3I6IDYsIC8vICBzYW1lIGNvbG9yIGFzIEZMUC4uLlxuXHRcdG1lOiB0cnVlLFxuXHRcdHN0YXR1czogVXNlclN0YXR1cy5DdXJyZW50bHlFZGl0aW5nXG5cdH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0KHRleHRJZDogc3RyaW5nLCAuLi5hcmdzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG5cdGNvbnN0IG9SZXNvdXJjZU1vZGVsID0gQ29yZS5nZXRMaWJyYXJ5UmVzb3VyY2VCdW5kbGUoXCJzYXAuZmUuY29yZVwiKTtcblx0cmV0dXJuIG9SZXNvdXJjZU1vZGVsLmdldFRleHQodGV4dElkLCBhcmdzKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgZXhwcmVzc2lvbiBiaW5kaW5nIG9mIHRoZSBJbnZpdGF0aW9uIGRpYWxvZy5cbiAqXG4gKiBAcGFyYW0gZGF0YU1vZGVsUGF0aCBUaGUgRGF0YU1vZGVsT2JqZWN0UGF0aFxuICogQHJldHVybnMgVGhlIGRpYWxvZyB0aXRsZSBiaW5kaW5nIGV4cHJlc3Npb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludml0YXRpb25EaWFsb2dUaXRsZUV4cEJpbmRpbmcoZGF0YU1vZGVsUGF0aDogRGF0YU1vZGVsT2JqZWN0UGF0aCk6IENvbXBpbGVkQmluZGluZ1Rvb2xraXRFeHByZXNzaW9uIHtcblx0Y29uc3QgaGVhZGVySW5mbyA9IGRhdGFNb2RlbFBhdGgudGFyZ2V0T2JqZWN0IGFzIEhlYWRlckluZm87XG5cdGNvbnN0IHRpdGxlID0gZ2V0RXhwcmVzc2lvbkZyb21Bbm5vdGF0aW9uKChoZWFkZXJJbmZvLlRpdGxlIGFzIERhdGFGaWVsZCB8IHVuZGVmaW5lZCk/LlZhbHVlLCBbXSwgXCJcIik7XG5cdGNvbnN0IHBhcmFtcyA9IFtcIkNfQ09MTEFCT1JBVElPTkRSQUZUX0lOVklUQVRJT05fRElBTE9HXCIsIGNvbnN0YW50KGhlYWRlckluZm8uVHlwZU5hbWUpLCB0aXRsZV07XG5cdGNvbnN0IHRpdGxlRXhwcmVzc2lvbiA9IGZvcm1hdFJlc3VsdChwYXJhbXMsIGNvbGxhYm9yYXRpb25Gb3JtYXR0ZXIuZ2V0Rm9ybWF0dGVkVGV4dCk7XG5cdHJldHVybiBjb21waWxlRXhwcmVzc2lvbih0aXRsZUV4cHJlc3Npb24pO1xufVxuXG5leHBvcnQgY29uc3QgQ29sbGFib3JhdGlvblV0aWxzID0ge1xuXHRmb3JtYXRJbml0aWFsczogZm9ybWF0SW5pdGlhbHMsXG5cdGdldFVzZXJDb2xvcjogZ2V0VXNlckNvbG9yLFxuXHRnZXRNZTogZ2V0TWUsXG5cdGdldEFwcENvbXBvbmVudDogZ2V0QXBwQ29tcG9uZW50LFxuXHRnZXRUZXh0OiBnZXRUZXh0LFxuXHRnZXRJbnZpdGF0aW9uRGlhbG9nVGl0bGVFeHBCaW5kaW5nOiBnZXRJbnZpdGF0aW9uRGlhbG9nVGl0bGVFeHBCaW5kaW5nXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2hhcmVPYmplY3QoYmluZGluZ0NvbnRleHQ6IENvbnRleHQsIHVzZXJzOiBCYWNrZW5kVXNlcltdID0gW10pOiBQcm9taXNlPHZvaWQ+IHtcblx0Y29uc3QgbW9kZWwgPSBiaW5kaW5nQ29udGV4dC5nZXRNb2RlbCgpO1xuXHRjb25zdCBtZXRhTW9kZWwgPSBtb2RlbC5nZXRNZXRhTW9kZWwoKTtcblx0Y29uc3QgZW50aXR5U2V0ID0gbWV0YU1vZGVsLmdldE1ldGFQYXRoKGJpbmRpbmdDb250ZXh0IGFzIGFueSk7XG5cdGNvbnN0IHNoYXJlQWN0aW9uTmFtZSA9IG1ldGFNb2RlbC5nZXRPYmplY3QoYCR7ZW50aXR5U2V0fUBjb20uc2FwLnZvY2FidWxhcmllcy5Db21tb24udjEuRHJhZnRSb290L1NoYXJlQWN0aW9uYCk7XG5cdGNvbnN0IHNoYXJlQWN0aW9uID0gbW9kZWwuYmluZENvbnRleHQoYCR7c2hhcmVBY3Rpb25OYW1lfSguLi4pYCwgYmluZGluZ0NvbnRleHQpO1xuXHRzaGFyZUFjdGlvbi5zZXRQYXJhbWV0ZXIoXCJVc2Vyc1wiLCB1c2Vycyk7XG5cdHNoYXJlQWN0aW9uLnNldFBhcmFtZXRlcihcIlNoYXJlQWxsXCIsIHRydWUpO1xuXHRyZXR1cm4gc2hhcmVBY3Rpb24uZXhlY3V0ZSgpO1xufVxuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7Ozs7Ozs7TUFlWUEsVUFBVTtFQUFBLFdBQVZBLFVBQVU7SUFBVkEsVUFBVSxDQUFWQSxVQUFVO0lBQVZBLFVBQVUsQ0FBVkEsVUFBVTtJQUFWQSxVQUFVLENBQVZBLFVBQVU7SUFBVkEsVUFBVSxDQUFWQSxVQUFVO0VBQUEsR0FBVkEsVUFBVSxLQUFWQSxVQUFVO0VBQUE7RUFBQSxJQU9WQyxnQkFBZ0I7RUFBQSxXQUFoQkEsZ0JBQWdCO0lBQWhCQSxnQkFBZ0I7SUFBaEJBLGdCQUFnQjtFQUFBLEdBQWhCQSxnQkFBZ0IsS0FBaEJBLGdCQUFnQjtFQUFBO0VBQUEsSUE0QmhCQyxRQUFRO0VBQUEsV0FBUkEsUUFBUTtJQUFSQSxRQUFRO0lBQVJBLFFBQVE7SUFBUkEsUUFBUTtJQUFSQSxRQUFRO0lBQVJBLFFBQVE7SUFBUkEsUUFBUTtJQUFSQSxRQUFRO0lBQVJBLFFBQVE7SUFBUkEsUUFBUTtJQUFSQSxRQUFRO0lBQVJBLFFBQVE7RUFBQSxHQUFSQSxRQUFRLEtBQVJBLFFBQVE7RUFBQTtFQXlCcEIsTUFBTUMsZ0JBQWdCLEdBQUcsT0FBTztFQUNoQyxNQUFNQyxpQkFBaUIsR0FBRyxRQUFRO0VBRWxDLFNBQVNDLGNBQWMsQ0FBQ0MsUUFBZ0IsRUFBVTtJQUNqRDtJQUNBLE1BQU1DLGNBQWMsR0FBRyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDO0lBQzVFQSxjQUFjLENBQUNDLE9BQU8sQ0FB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