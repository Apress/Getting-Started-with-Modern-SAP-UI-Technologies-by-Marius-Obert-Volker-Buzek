/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log", "sap/ui/core/Fragment", "sap/ui/core/util/XMLPreprocessor", "sap/ui/core/XMLTemplateProcessor", "sap/ui/model/json/JSONModel"], function (Log, Fragment, XMLPreprocessor, XMLTemplateProcessor, JSONModel) {
  "use strict";

  var _exports = {};
  var DraftDataLossOptions;
  (function (DraftDataLossOptions) {
    DraftDataLossOptions["Save"] = "draftDataLossOptionSave";
    DraftDataLossOptions["Keep"] = "draftDataLossOptionKeep";
    DraftDataLossOptions["Discard"] = "draftDataLossOptionDiscard";
  })(DraftDataLossOptions || (DraftDataLossOptions = {}));
  let onDataLossConfirmedFollowUpFunction;
  let onDataLossCancelFollowUpFunction;
  function fnDataLossConfirmation(fnOnDataLossOk, fnOnDataLossCancel, controller, skipBindingToView) {
    // Open the data loss popup and after processing the selected function finally call
    // onDataLossConfirmed which resolves the promise and leads to processing of the originally
    // triggered action like e.g. a back navigation
    let dataLossPopup;
    onDataLossConfirmedFollowUpFunction = fnOnDataLossOk;
    onDataLossCancelFollowUpFunction = fnOnDataLossCancel;
    const fragmentName = "sap.fe.core.controls.DataLossOrDraftDiscard.DataLossDraft";
    const view = controller.getView();
    const fragmentController = {
      onDataLossOk: function () {
        handleDataLossOk(dataLossPopup, controller, onDataLossConfirmedFollowUpFunction, skipBindingToView);
      },
      onDataLossCancel: function () {
        onDataLossCancelFollowUpFunction();
        dataLossPopup.close();
      },
      setDataLossPopup: function (inDataLossPopup) {
        controller.dataLossPopup = inDataLossPopup;
      }
    };
    const localThisModel = new JSONModel({}),
      preprocessorSettings = {
        bindingContexts: {
          this: localThisModel.createBindingContext("/")
        },
        models: {
          this: localThisModel
        }
      };
    if (controller.dataLossPopup) {
      dataLossPopup = controller.dataLossPopup;
      dataLossPopup.open();
      selectAndFocusFirstEntry(dataLossPopup);
    } else {
      const dialogFragment = XMLTemplateProcessor.loadTemplate(fragmentName, "fragment");
      Promise.resolve(XMLPreprocessor.process(dialogFragment, {
        name: fragmentName
      }, preprocessorSettings)).then(fragment => {
        return Fragment.load({
          definition: fragment,
          controller: fragmentController
        });
      }).then(popup => {
        dataLossPopup = popup;
        selectAndFocusFirstEntry(dataLossPopup);
        const dataLossOptionsList = dataLossPopup.getContent().find(element => element.data("listIdentifier") === "draftDataLossOptionsList");
        dataLossOptionsList.addEventDelegate({
          onsapenter: function () {
            handleDataLossOk(dataLossPopup, controller, onDataLossConfirmedFollowUpFunction, skipBindingToView);
          }
        });
        view.addDependent(dataLossPopup);
        dataLossPopup.open();
        fragmentController.setDataLossPopup(dataLossPopup);
      }).catch(function (error) {
        Log.error("Error while opening the Discard Dialog fragment", error);
      });
    }
  }
  function performAfterDiscardorKeepDraft(processFunctionOnDatalossOk, processFunctionOnDatalossCancel, controller, skipBindingToView) {
    // Depending on if the user closed the data loss popup with Ok or Cancel,
    // execute the provided follow-up function and resolve or reject the promise
    return new Promise(function (resolve, reject) {
      const dataLossPopupOk = function (context) {
        const returnValue = processFunctionOnDatalossOk(context);
        resolve(returnValue);
      };
      const dataLossPopupCancel = function () {
        processFunctionOnDatalossCancel();
        reject();
      };
      fnDataLossConfirmation(dataLossPopupOk, dataLossPopupCancel, controller, skipBindingToView);
    });
  }
  _exports.performAfterDiscardorKeepDraft = performAfterDiscardorKeepDraft;
  function discardDraft(controller, skipBindingToView) {
    const context = controller.getView().getBindingContext();
    const params = {
      skipBackNavigation: true,
      skipDiscardPopover: true,
      skipBindingToView: skipBindingToView !== undefined ? skipBindingToView : true
    };
    return controller.editFlow.cancelDocument(context, params);
  }
  _exports.discardDraft = discardDraft;
  function saveDocument(controller) {
    const context = controller.getView().getBindingContext();
    // We check if we are on the OP and then call the internal _saveDocument from the OP controller
    // since here some special handling is done for creationRow before editFlow.saveDocument is called.
    // In case of a custom controller we directly call saveDocument from the editFlow
    if (controller.isA("sap.fe.templates.ObjectPage.ObjectPageController")) {
      return controller._saveDocument(context);
    } else {
      return controller.editFlow.saveDocument(context);
    }
  }
  _exports.saveDocument = saveDocument;
  function getSelectedKey(dataLossPopup) {
    // For not using control IDs we introduced customData in the fragment and
    // use it here for finding the correct list in the dialog and for
    // determining the selected option from the list
    const dataLossOptionsList = dataLossPopup.getContent().find(element => element.data("listIdentifier") === "draftDataLossOptionsList");
    return dataLossOptionsList.getSelectedItem().data("itemKey");
  }
  _exports.getSelectedKey = getSelectedKey;
  function selectAndFocusFirstEntry(dataLossPopup) {
    // For not using control IDs we introduced customData in the fragment and
    // use it here for finding the correct list in the dialog.
    const dataLossOptionsList = dataLossPopup.getContent().find(element => element.data("listIdentifier") === "draftDataLossOptionsList");
    // Preselect the first entry in the list
    const firstListItemOption = dataLossOptionsList.getItems()[0];
    dataLossOptionsList.setSelectedItem(firstListItemOption);
    // By default set the focus on the first list item of the dialog
    // We do not set the focus on the button, but catch the ENTER key in the dialog
    // and process it as Ok, since focusing the button was reported as an ACC issue
    firstListItemOption === null || firstListItemOption === void 0 ? void 0 : firstListItemOption.focus();
  }

  /**
   * Executes the logic when the data loss dialog is confirmed.
   *
   * @param dataLossPopup Reference to the data loss dialog
   * @param controller Reference to the controller
   * @param dataLossConfirmationFollowUpFunction The action to be performed after the selected option has been executed
   * @param skipBindingToView Forwarded to discardDraft
   */
  _exports.selectAndFocusFirstEntry = selectAndFocusFirstEntry;
  function handleDataLossOk(dataLossPopup, controller, dataLossConfirmationFollowUpFunction, skipBindingToView) {
    const selectedKey = getSelectedKey(dataLossPopup);
    if (selectedKey === DraftDataLossOptions.Save) {
      saveDocument(controller).then(dataLossConfirmationFollowUpFunction).catch(function (error) {
        Log.error("Error while saving document", error);
      });
      dataLossPopup.close();
    } else if (selectedKey === DraftDataLossOptions.Keep) {
      dataLossConfirmationFollowUpFunction();
      dataLossPopup.close();
    } else if (selectedKey === DraftDataLossOptions.Discard) {
      discardDraft(controller, skipBindingToView).then(dataLossConfirmationFollowUpFunction).catch(function (error) {
        Log.error("Error while discarding draft", error);
      });
      dataLossPopup.close();
    }
  }
  _exports.handleDataLossOk = handleDataLossOk;
  return {
    performAfterDiscardorKeepDraft,
    discardDraft,
    saveDocument,
    getSelectedKey,
    selectAndFocusFirstEntry
  };
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEcmFmdERhdGFMb3NzT3B0aW9ucyIsIm9uRGF0YUxvc3NDb25maXJtZWRGb2xsb3dVcEZ1bmN0aW9uIiwib25EYXRhTG9zc0NhbmNlbEZvbGxvd1VwRnVuY3Rpb24iLCJmbkRhdGFMb3NzQ29uZmlybWF0aW9uIiwiZm5PbkRhdGFMb3NzT2siLCJmbk9uRGF0YUxvc3NDYW5jZWwiLCJjb250cm9sbGVyIiwic2tpcEJpbmRpbmdUb1ZpZXciLCJkYXRhTG9zc1BvcHVwIiwiZnJhZ21lbnROYW1lIiwidmlldyIsImdldFZpZXciLCJmcmFnbWVudENvbnRyb2xsZXIiLCJvbkRhdGFMb3NzT2siLCJoYW5kbGVEYXRhTG9zc09rIiwib25EYXRhTG9zc0NhbmNlbCIsImNsb3NlIiwic2V0RGF0YUxvc3NQb3B1cCIsImluRGF0YUxvc3NQb3B1cCIsImxvY2FsVGhpc01vZGVsIiwiSlNPTk1vZGVsIiwicHJlcHJvY2Vzc29yU2V0dGluZ3MiLCJiaW5kaW5nQ29udGV4dHMiLCJ0aGlzIiwiY3JlYXRlQmluZGluZ0NvbnRleHQiLCJtb2RlbHMiLCJvcGVuIiwic2VsZWN0QW5kRm9jdXNGaXJzdEVudHJ5IiwiZGlhbG9nRnJhZ21lbnQiLCJYTUxUZW1wbGF0ZVByb2Nlc3NvciIsImxvYWRUZW1wbGF0ZSIsIlByb21pc2UiLCJyZXNvbHZlIiwiWE1MUHJlcHJvY2Vzc29yIiwicHJvY2VzcyIsIm5hbWUiLCJ0aGVuIiwiZnJhZ21lbnQiLCJGcmFnbWVudCIsImxvYWQiLCJkZWZpbml0aW9uIiwicG9wdXAiLCJkYXRhTG9zc09wdGlvbnNMaXN0IiwiZ2V0Q29udGVudCIsImZpbmQiLCJlbGVtZW50IiwiZGF0YSIsImFkZEV2ZW50RGVsZWdhdGUiLCJvbnNhcGVudGVyIiwiYWRkRGVwZW5kZW50IiwiY2F0Y2giLCJlcnJvciIsIkxvZyIsInBlcmZvcm1BZnRlckRpc2NhcmRvcktlZXBEcmFmdCIsInByb2Nlc3NGdW5jdGlvbk9uRGF0YWxvc3NPayIsInByb2Nlc3NGdW5jdGlvbk9uRGF0YWxvc3NDYW5jZWwiLCJyZWplY3QiLCJkYXRhTG9zc1BvcHVwT2siLCJjb250ZXh0IiwicmV0dXJuVmFsdWUiLCJkYXRhTG9zc1BvcHVwQ2FuY2VsIiwiZGlzY2FyZERyYWZ0IiwiZ2V0QmluZGluZ0NvbnRleHQiLCJwYXJhbXMiLCJza2lwQmFja05hdmlnYXRpb24iLCJza2lwRGlzY2FyZFBvcG92ZXIiLCJ1bmRlZmluZWQiLCJlZGl0RmxvdyIsImNhbmNlbERvY3VtZW50Iiwic2F2ZURvY3VtZW50IiwiaXNBIiwiX3NhdmVEb2N1bWVudCIsImdldFNlbGVjdGVkS2V5IiwiZ2V0U2VsZWN0ZWRJdGVtIiwiZmlyc3RMaXN0SXRlbU9wdGlvbiIsImdldEl0ZW1zIiwic2V0U2VsZWN0ZWRJdGVtIiwiZm9jdXMiLCJkYXRhTG9zc0NvbmZpcm1hdGlvbkZvbGxvd1VwRnVuY3Rpb24iLCJzZWxlY3RlZEtleSIsIlNhdmUiLCJLZWVwIiwiRGlzY2FyZCJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiRGF0YUxvc3NPckRyYWZ0RGlzY2FyZEhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExvZyBmcm9tIFwic2FwL2Jhc2UvTG9nXCI7XG5pbXBvcnQgdHlwZSBDdXN0b21MaXN0SXRlbSBmcm9tIFwic2FwL20vQ3VzdG9tTGlzdEl0ZW1cIjtcbmltcG9ydCB0eXBlIERpYWxvZyBmcm9tIFwic2FwL20vRGlhbG9nXCI7XG5pbXBvcnQgdHlwZSBMaXN0IGZyb20gXCJzYXAvbS9MaXN0XCI7XG5pbXBvcnQgRnJhZ21lbnQgZnJvbSBcInNhcC91aS9jb3JlL0ZyYWdtZW50XCI7XG5pbXBvcnQgWE1MUHJlcHJvY2Vzc29yIGZyb20gXCJzYXAvdWkvY29yZS91dGlsL1hNTFByZXByb2Nlc3NvclwiO1xuaW1wb3J0IFhNTFRlbXBsYXRlUHJvY2Vzc29yIGZyb20gXCJzYXAvdWkvY29yZS9YTUxUZW1wbGF0ZVByb2Nlc3NvclwiO1xuaW1wb3J0IEpTT05Nb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsXCI7XG5cbmVudW0gRHJhZnREYXRhTG9zc09wdGlvbnMge1xuXHRTYXZlID0gXCJkcmFmdERhdGFMb3NzT3B0aW9uU2F2ZVwiLFxuXHRLZWVwID0gXCJkcmFmdERhdGFMb3NzT3B0aW9uS2VlcFwiLFxuXHREaXNjYXJkID0gXCJkcmFmdERhdGFMb3NzT3B0aW9uRGlzY2FyZFwiXG59XG5cbmxldCBvbkRhdGFMb3NzQ29uZmlybWVkRm9sbG93VXBGdW5jdGlvbjogRnVuY3Rpb247XG5sZXQgb25EYXRhTG9zc0NhbmNlbEZvbGxvd1VwRnVuY3Rpb246IEZ1bmN0aW9uO1xuZnVuY3Rpb24gZm5EYXRhTG9zc0NvbmZpcm1hdGlvbihmbk9uRGF0YUxvc3NPazogYW55LCBmbk9uRGF0YUxvc3NDYW5jZWw6IGFueSwgY29udHJvbGxlcjogYW55LCBza2lwQmluZGluZ1RvVmlldzogYW55KSB7XG5cdC8vIE9wZW4gdGhlIGRhdGEgbG9zcyBwb3B1cCBhbmQgYWZ0ZXIgcHJvY2Vzc2luZyB0aGUgc2VsZWN0ZWQgZnVuY3Rpb24gZmluYWxseSBjYWxsXG5cdC8vIG9uRGF0YUxvc3NDb25maXJtZWQgd2hpY2ggcmVzb2x2ZXMgdGhlIHByb21pc2UgYW5kIGxlYWRzIHRvIHByb2Nlc3Npbmcgb2YgdGhlIG9yaWdpbmFsbHlcblx0Ly8gdHJpZ2dlcmVkIGFjdGlvbiBsaWtlIGUuZy4gYSBiYWNrIG5hdmlnYXRpb25cblx0bGV0IGRhdGFMb3NzUG9wdXA6IERpYWxvZztcblx0b25EYXRhTG9zc0NvbmZpcm1lZEZvbGxvd1VwRnVuY3Rpb24gPSBmbk9uRGF0YUxvc3NPaztcblx0b25EYXRhTG9zc0NhbmNlbEZvbGxvd1VwRnVuY3Rpb24gPSBmbk9uRGF0YUxvc3NDYW5jZWw7XG5cdGNvbnN0IGZyYWdtZW50TmFtZSA9IFwic2FwLmZlLmNvcmUuY29udHJvbHMuRGF0YUxvc3NPckRyYWZ0RGlzY2FyZC5EYXRhTG9zc0RyYWZ0XCI7XG5cdGNvbnN0IHZpZXcgPSBjb250cm9sbGVyLmdldFZpZXcoKTtcblx0Y29uc3QgZnJhZ21lbnRDb250cm9sbGVyOiBhbnkgPSB7XG5cdFx0b25EYXRhTG9zc09rOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRoYW5kbGVEYXRhTG9zc09rKGRhdGFMb3NzUG9wdXAsIGNvbnRyb2xsZXIsIG9uRGF0YUxvc3NDb25maXJtZWRGb2xsb3dVcEZ1bmN0aW9uLCBza2lwQmluZGluZ1RvVmlldyk7XG5cdFx0fSxcblx0XHRvbkRhdGFMb3NzQ2FuY2VsOiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRvbkRhdGFMb3NzQ2FuY2VsRm9sbG93VXBGdW5jdGlvbigpO1xuXHRcdFx0ZGF0YUxvc3NQb3B1cC5jbG9zZSgpO1xuXHRcdH0sXG5cdFx0c2V0RGF0YUxvc3NQb3B1cDogZnVuY3Rpb24gKGluRGF0YUxvc3NQb3B1cDogRGlhbG9nKSB7XG5cdFx0XHRjb250cm9sbGVyLmRhdGFMb3NzUG9wdXAgPSBpbkRhdGFMb3NzUG9wdXA7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IGxvY2FsVGhpc01vZGVsID0gbmV3IEpTT05Nb2RlbCh7fSksXG5cdFx0cHJlcHJvY2Vzc29yU2V0dGluZ3MgPSB7XG5cdFx0XHRiaW5kaW5nQ29udGV4dHM6IHtcblx0XHRcdFx0dGhpczogbG9jYWxUaGlzTW9kZWwuY3JlYXRlQmluZGluZ0NvbnRleHQoXCIvXCIpXG5cdFx0XHR9LFxuXHRcdFx0bW9kZWxzOiB7XG5cdFx0XHRcdHRoaXM6IGxvY2FsVGhpc01vZGVsXG5cdFx0XHR9XG5cdFx0fTtcblxuXHRpZiAoY29udHJvbGxlci5kYXRhTG9zc1BvcHVwKSB7XG5cdFx0ZGF0YUxvc3NQb3B1cCA9IGNvbnRyb2xsZXIuZGF0YUxvc3NQb3B1cDtcblx0XHRkYXRhTG9zc1BvcHVwLm9wZW4oKTtcblx0XHRzZWxlY3RBbmRGb2N1c0ZpcnN0RW50cnkoZGF0YUxvc3NQb3B1cCk7XG5cdH0gZWxzZSB7XG5cdFx0Y29uc3QgZGlhbG9nRnJhZ21lbnQgPSBYTUxUZW1wbGF0ZVByb2Nlc3Nvci5sb2FkVGVtcGxhdGUoZnJhZ21lbnROYW1lLCBcImZyYWdtZW50XCIpO1xuXHRcdFByb21pc2UucmVzb2x2ZShYTUxQcmVwcm9jZXNzb3IucHJvY2VzcyhkaWFsb2dGcmFnbWVudCwgeyBuYW1lOiBmcmFnbWVudE5hbWUgfSwgcHJlcHJvY2Vzc29yU2V0dGluZ3MpKVxuXHRcdFx0LnRoZW4oKGZyYWdtZW50KSA9PiB7XG5cdFx0XHRcdHJldHVybiBGcmFnbWVudC5sb2FkKHsgZGVmaW5pdGlvbjogZnJhZ21lbnQsIGNvbnRyb2xsZXI6IGZyYWdtZW50Q29udHJvbGxlciB9KTtcblx0XHRcdH0pXG5cdFx0XHQudGhlbigocG9wdXA6IGFueSkgPT4ge1xuXHRcdFx0XHRkYXRhTG9zc1BvcHVwID0gcG9wdXA7XG5cdFx0XHRcdHNlbGVjdEFuZEZvY3VzRmlyc3RFbnRyeShkYXRhTG9zc1BvcHVwKTtcblx0XHRcdFx0Y29uc3QgZGF0YUxvc3NPcHRpb25zTGlzdDogTGlzdCA9IGRhdGFMb3NzUG9wdXBcblx0XHRcdFx0XHQuZ2V0Q29udGVudCgpXG5cdFx0XHRcdFx0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQuZGF0YShcImxpc3RJZGVudGlmaWVyXCIpID09PSBcImRyYWZ0RGF0YUxvc3NPcHRpb25zTGlzdFwiKSBhcyBMaXN0O1xuXHRcdFx0XHRkYXRhTG9zc09wdGlvbnNMaXN0LmFkZEV2ZW50RGVsZWdhdGUoe1xuXHRcdFx0XHRcdG9uc2FwZW50ZXI6IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGhhbmRsZURhdGFMb3NzT2soZGF0YUxvc3NQb3B1cCwgY29udHJvbGxlciwgb25EYXRhTG9zc0NvbmZpcm1lZEZvbGxvd1VwRnVuY3Rpb24sIHNraXBCaW5kaW5nVG9WaWV3KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR2aWV3LmFkZERlcGVuZGVudChkYXRhTG9zc1BvcHVwKTtcblx0XHRcdFx0ZGF0YUxvc3NQb3B1cC5vcGVuKCk7XG5cdFx0XHRcdGZyYWdtZW50Q29udHJvbGxlci5zZXREYXRhTG9zc1BvcHVwKGRhdGFMb3NzUG9wdXApO1xuXHRcdFx0fSlcblx0XHRcdC5jYXRjaChmdW5jdGlvbiAoZXJyb3I6IGFueSkge1xuXHRcdFx0XHRMb2cuZXJyb3IoXCJFcnJvciB3aGlsZSBvcGVuaW5nIHRoZSBEaXNjYXJkIERpYWxvZyBmcmFnbWVudFwiLCBlcnJvcik7XG5cdFx0XHR9KTtcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGVyZm9ybUFmdGVyRGlzY2FyZG9yS2VlcERyYWZ0KFxuXHRwcm9jZXNzRnVuY3Rpb25PbkRhdGFsb3NzT2s6IGFueSxcblx0cHJvY2Vzc0Z1bmN0aW9uT25EYXRhbG9zc0NhbmNlbDogYW55LFxuXHRjb250cm9sbGVyOiBhbnksXG5cdHNraXBCaW5kaW5nVG9WaWV3OiBhbnlcbikge1xuXHQvLyBEZXBlbmRpbmcgb24gaWYgdGhlIHVzZXIgY2xvc2VkIHRoZSBkYXRhIGxvc3MgcG9wdXAgd2l0aCBPayBvciBDYW5jZWwsXG5cdC8vIGV4ZWN1dGUgdGhlIHByb3ZpZGVkIGZvbGxvdy11cCBmdW5jdGlvbiBhbmQgcmVzb2x2ZSBvciByZWplY3QgdGhlIHByb21pc2Vcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlOiAodmFsdWU6IGFueSkgPT4gdm9pZCwgcmVqZWN0OiAocmVhc29uPzogYW55KSA9PiB2b2lkKSB7XG5cdFx0Y29uc3QgZGF0YUxvc3NQb3B1cE9rID0gZnVuY3Rpb24gKGNvbnRleHQ6IGFueSkge1xuXHRcdFx0Y29uc3QgcmV0dXJuVmFsdWUgPSBwcm9jZXNzRnVuY3Rpb25PbkRhdGFsb3NzT2soY29udGV4dCk7XG5cdFx0XHRyZXNvbHZlKHJldHVyblZhbHVlKTtcblx0XHR9O1xuXHRcdGNvbnN0IGRhdGFMb3NzUG9wdXBDYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRwcm9jZXNzRnVuY3Rpb25PbkRhdGFsb3NzQ2FuY2VsKCk7XG5cdFx0XHRyZWplY3QoKTtcblx0XHR9O1xuXHRcdGZuRGF0YUxvc3NDb25maXJtYXRpb24oZGF0YUxvc3NQb3B1cE9rLCBkYXRhTG9zc1BvcHVwQ2FuY2VsLCBjb250cm9sbGVyLCBza2lwQmluZGluZ1RvVmlldyk7XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzY2FyZERyYWZ0KGNvbnRyb2xsZXI6IGFueSwgc2tpcEJpbmRpbmdUb1ZpZXc6IGFueSkge1xuXHRjb25zdCBjb250ZXh0ID0gY29udHJvbGxlci5nZXRWaWV3KCkuZ2V0QmluZGluZ0NvbnRleHQoKTtcblx0Y29uc3QgcGFyYW1zID0ge1xuXHRcdHNraXBCYWNrTmF2aWdhdGlvbjogdHJ1ZSxcblx0XHRza2lwRGlzY2FyZFBvcG92ZXI6IHRydWUsXG5cdFx0c2tpcEJpbmRpbmdUb1ZpZXc6IHNraXBCaW5kaW5nVG9WaWV3ICE9PSB1bmRlZmluZWQgPyBza2lwQmluZGluZ1RvVmlldyA6IHRydWVcblx0fTtcblx0cmV0dXJuIGNvbnRyb2xsZXIuZWRpdEZsb3cuY2FuY2VsRG9jdW1lbnQoY29udGV4dCwgcGFyYW1zKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVEb2N1bWVudChjb250cm9sbGVyOiBhbnkpIHtcblx0Y29uc3QgY29udGV4dCA9IGNvbnRyb2xsZXIuZ2V0VmlldygpLmdldEJpbmRpbmdDb250ZXh0KCk7XG5cdC8vIFdlIGNoZWNrIGlmIHdlIGFyZSBvbiB0aGUgT1AgYW5kIHRoZW4gY2FsbCB0aGUgaW50ZXJuYWwgX3NhdmVEb2N1bWVudCBmcm9tIHRoZSBPUCBjb250cm9sbGVyXG5cdC8vIHNpbmNlIGhlcmUgc29tZSBzcGVjaWFsIGhhbmRsaW5nIGlzIGRvbmUgZm9yIGNyZWF0aW9uUm93IGJlZm9yZSBlZGl0Rmxvdy5zYXZlRG9jdW1lbnQgaXMgY2FsbGVkLlxuXHQvLyBJbiBjYXNlIG9mIGEgY3VzdG9tIGNvbnRyb2xsZXIgd2UgZGlyZWN0bHkgY2FsbCBzYXZlRG9jdW1lbnQgZnJvbSB0aGUgZWRpdEZsb3dcblx0aWYgKGNvbnRyb2xsZXIuaXNBKFwic2FwLmZlLnRlbXBsYXRlcy5PYmplY3RQYWdlLk9iamVjdFBhZ2VDb250cm9sbGVyXCIpKSB7XG5cdFx0cmV0dXJuIGNvbnRyb2xsZXIuX3NhdmVEb2N1bWVudChjb250ZXh0KTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gY29udHJvbGxlci5lZGl0Rmxvdy5zYXZlRG9jdW1lbnQoY29udGV4dCk7XG5cdH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFNlbGVjdGVkS2V5KGRhdGFMb3NzUG9wdXA6IERpYWxvZykge1xuXHQvLyBGb3Igbm90IHVzaW5nIGNvbnRyb2wgSURzIHdlIGludHJvZHVjZWQgY3VzdG9tRGF0YSBpbiB0aGUgZnJhZ21lbnQgYW5kXG5cdC8vIHVzZSBpdCBoZXJlIGZvciBmaW5kaW5nIHRoZSBjb3JyZWN0IGxpc3QgaW4gdGhlIGRpYWxvZyBhbmQgZm9yXG5cdC8vIGRldGVybWluaW5nIHRoZSBzZWxlY3RlZCBvcHRpb24gZnJvbSB0aGUgbGlzdFxuXHRjb25zdCBkYXRhTG9zc09wdGlvbnNMaXN0OiBMaXN0ID0gZGF0YUxvc3NQb3B1cFxuXHRcdC5nZXRDb250ZW50KClcblx0XHQuZmluZCgoZWxlbWVudCkgPT4gZWxlbWVudC5kYXRhKFwibGlzdElkZW50aWZpZXJcIikgPT09IFwiZHJhZnREYXRhTG9zc09wdGlvbnNMaXN0XCIpIGFzIExpc3Q7XG5cdHJldHVybiBkYXRhTG9zc09wdGlvbnNMaXN0LmdldFNlbGVjdGVkSXRlbSgpLmRhdGEoXCJpdGVtS2V5XCIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0QW5kRm9jdXNGaXJzdEVudHJ5KGRhdGFMb3NzUG9wdXA6IERpYWxvZykge1xuXHQvLyBGb3Igbm90IHVzaW5nIGNvbnRyb2wgSURzIHdlIGludHJvZHVjZWQgY3VzdG9tRGF0YSBpbiB0aGUgZnJhZ21lbnQgYW5kXG5cdC8vIHVzZSBpdCBoZXJlIGZvciBmaW5kaW5nIHRoZSBjb3JyZWN0IGxpc3QgaW4gdGhlIGRpYWxvZy5cblx0Y29uc3QgZGF0YUxvc3NPcHRpb25zTGlzdDogTGlzdCA9IGRhdGFMb3NzUG9wdXBcblx0XHQuZ2V0Q29udGVudCgpXG5cdFx0LmZpbmQoKGVsZW1lbnQpID0+IGVsZW1lbnQuZGF0YShcImxpc3RJZGVudGlmaWVyXCIpID09PSBcImRyYWZ0RGF0YUxvc3NPcHRpb25zTGlzdFwiKSBhcyBMaXN0O1xuXHQvLyBQcmVzZWxlY3QgdGhlIGZpcnN0IGVudHJ5IGluIHRoZSBsaXN0XG5cdGNvbnN0IGZpcnN0TGlzdEl0ZW1PcHRpb246IEN1c3RvbUxpc3RJdGVtID0gZGF0YUxvc3NPcHRpb25zTGlzdC5nZXRJdGVtcygpWzBdIGFzIEN1c3RvbUxpc3RJdGVtO1xuXHRkYXRhTG9zc09wdGlvbnNMaXN0LnNldFNlbGVjdGVkSXRlbShmaXJzdExpc3RJdGVtT3B0aW9uKTtcblx0Ly8gQnkgZGVmYXVsdCBzZXQgdGhlIGZvY3VzIG9uIHRoZSBmaXJzdCBsaXN0IGl0ZW0gb2YgdGhlIGRpYWxvZ1xuXHQvLyBXZSBkbyBub3Qgc2V0IHRoZSBmb2N1cyBvbiB0aGUgYnV0dG9uLCBidXQgY2F0Y2ggdGhlIEVOVEVSIGtleSBpbiB0aGUgZGlhbG9nXG5cdC8vIGFuZCBwcm9jZXNzIGl0IGFzIE9rLCBzaW5jZSBmb2N1c2luZyB0aGUgYnV0dG9uIHdhcyByZXBvcnRlZCBhcyBhbiBBQ0MgaXNzdWVcblx0Zmlyc3RMaXN0SXRlbU9wdGlvbj8uZm9jdXMoKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgbG9naWMgd2hlbiB0aGUgZGF0YSBsb3NzIGRpYWxvZyBpcyBjb25maXJtZWQuXG4gKlxuICogQHBhcmFtIGRhdGFMb3NzUG9wdXAgUmVmZXJlbmNlIHRvIHRoZSBkYXRhIGxvc3MgZGlhbG9nXG4gKiBAcGFyYW0gY29udHJvbGxlciBSZWZlcmVuY2UgdG8gdGhlIGNvbnRyb2xsZXJcbiAqIEBwYXJhbSBkYXRhTG9zc0NvbmZpcm1hdGlvbkZvbGxvd1VwRnVuY3Rpb24gVGhlIGFjdGlvbiB0byBiZSBwZXJmb3JtZWQgYWZ0ZXIgdGhlIHNlbGVjdGVkIG9wdGlvbiBoYXMgYmVlbiBleGVjdXRlZFxuICogQHBhcmFtIHNraXBCaW5kaW5nVG9WaWV3IEZvcndhcmRlZCB0byBkaXNjYXJkRHJhZnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZURhdGFMb3NzT2soXG5cdGRhdGFMb3NzUG9wdXA6IERpYWxvZyxcblx0Y29udHJvbGxlcjogYW55LFxuXHRkYXRhTG9zc0NvbmZpcm1hdGlvbkZvbGxvd1VwRnVuY3Rpb246IEZ1bmN0aW9uLFxuXHRza2lwQmluZGluZ1RvVmlldzogYm9vbGVhblxuKSB7XG5cdGNvbnN0IHNlbGVjdGVkS2V5ID0gZ2V0U2VsZWN0ZWRLZXkoZGF0YUxvc3NQb3B1cCk7XG5cdGlmIChzZWxlY3RlZEtleSA9PT0gRHJhZnREYXRhTG9zc09wdGlvbnMuU2F2ZSkge1xuXHRcdHNhdmVEb2N1bWVudChjb250cm9sbGVyKVxuXHRcdFx0LnRoZW4oZGF0YUxvc3NDb25maXJtYXRpb25Gb2xsb3dVcEZ1bmN0aW9uKVxuXHRcdFx0LmNhdGNoKGZ1bmN0aW9uIChlcnJvcjogYW55KSB7XG5cdFx0XHRcdExvZy5lcnJvcihcIkVycm9yIHdoaWxlIHNhdmluZyBkb2N1bWVudFwiLCBlcnJvcik7XG5cdFx0XHR9KTtcblx0XHRkYXRhTG9zc1BvcHVwLmNsb3NlKCk7XG5cdH0gZWxzZSBpZiAoc2VsZWN0ZWRLZXkgPT09IERyYWZ0RGF0YUxvc3NPcHRpb25zLktlZXApIHtcblx0XHRkYXRhTG9zc0NvbmZpcm1hdGlvbkZvbGxvd1VwRnVuY3Rpb24oKTtcblx0XHRkYXRhTG9zc1BvcHVwLmNsb3NlKCk7XG5cdH0gZWxzZSBpZiAoc2VsZWN0ZWRLZXkgPT09IERyYWZ0RGF0YUxvc3NPcHRpb25zLkRpc2NhcmQpIHtcblx0XHRkaXNjYXJkRHJhZnQoY29udHJvbGxlciwgc2tpcEJpbmRpbmdUb1ZpZXcpXG5cdFx0XHQudGhlbihkYXRhTG9zc0NvbmZpcm1hdGlvbkZvbGxvd1VwRnVuY3Rpb24pXG5cdFx0XHQuY2F0Y2goZnVuY3Rpb24gKGVycm9yOiBhbnkpIHtcblx0XHRcdFx0TG9nLmVycm9yKFwiRXJyb3Igd2hpbGUgZGlzY2FyZGluZyBkcmFmdFwiLCBlcnJvcik7XG5cdFx0XHR9KTtcblx0XHRkYXRhTG9zc1BvcHVwLmNsb3NlKCk7XG5cdH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBwZXJmb3JtQWZ0ZXJEaXNjYXJkb3JLZWVwRHJhZnQsIGRpc2NhcmREcmFmdCwgc2F2ZURvY3VtZW50LCBnZXRTZWxlY3RlZEtleSwgc2VsZWN0QW5kRm9jdXNGaXJzdEVudHJ5IH07XG4iXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBO0FBQUE7Ozs7O01BU0tBLG9CQUFvQjtFQUFBLFdBQXBCQSxvQkFBb0I7SUFBcEJBLG9CQUFvQjtJQUFwQkEsb0JBQW9CO0lBQXBCQSxvQkFBb0I7RUFBQSxHQUFwQkEsb0JBQW9CLEtBQXBCQSxvQkFBb0I7RUFNekIsSUFBSUMsbUNBQTZDO0VBQ2pELElBQUlDLGdDQUEwQztFQUM5QyxTQUFTQyxzQkFBc0IsQ0FBQ0MsY0FBbUIsRUFBRUMsa0JBQXVCLEVBQUVDLFVBQWUsRUFBRUMsaUJBQXNCLEVBQUU7SUFDdEg7SUFDQTtJQUNBO0lBQ0EsSUFBSUMsYUFBcUI7SUFDekJQLG1DQUFtQyxHQUFHRyxjQUFjO0lBQ3BERixnQ0FBZ0MsR0FBR0csa0JBQWtCO0lBQ3JELE1BQU1JLFlBQVksR0FBRywyREFBMkQ7SUFDaEYsTUFBTUMsSUFBSSxHQUFHSixVQUFVLENBQUNLLE9BQU8sRUFBRTtJQUNqQyxNQUFNQyxrQkFBdUIsR0FBRztNQUMvQkMsWUFBWSxFQUFFLFlBQVk7UUFDekJDLGdCQUFnQixDQUFDTixhQUFhLEVBQUVGLFVBQVUsRUFBRUwsbUNBQW1DLEVBQUVNLGlCQUFpQixDQUFDO01BQ3BHLENBQUM7TUFDRFEsZ0JBQWdCLEVBQUUsWUFBWTtRQUM3QmIsZ0NBQWdDLEVBQUU7UUFDbENNLGFBQWEsQ0FBQ1EsS0FBSyxFQUFFO01BQ3RCLENBQUM7TUFDREMsZ0JBQWdCLEVBQUUsVUFBVUMsZUFBdUIsRUFBRTtRQUNwRFosVUFBVSxDQUFDRSxh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