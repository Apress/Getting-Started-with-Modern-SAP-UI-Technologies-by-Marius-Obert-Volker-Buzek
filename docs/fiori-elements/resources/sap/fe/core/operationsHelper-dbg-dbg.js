/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/m/MessageBox", "sap/ui/core/message/Message", "sap/ui/model/json/JSONModel", "./controllerextensions/dialog/OperationsDialog.block", "./controllerextensions/messageHandler/messageHandling", "./formatters/TableFormatterTypes"], function (MessageBox, Message, JSONModel, OperationsDialogBlock, messageHandling, TableFormatterTypes) {
  "use strict";

  var MessageType = TableFormatterTypes.MessageType;
  function renderMessageView(mParameters, resourceModel, messageHandler, aMessages, strictHandlingUtilities, isMultiContext412, resolve, sGroupId, isUnboundAction) {
    const sActionName = mParameters.label;
    const oModel = mParameters.model;
    const strictHandlingPromises = strictHandlingUtilities === null || strictHandlingUtilities === void 0 ? void 0 : strictHandlingUtilities.strictHandlingPromises;
    let sMessage;
    let sCancelButtonTxt = resourceModel.getText("C_COMMON_DIALOG_CANCEL");
    let warningMessageText = "";
    let genericChangesetMessage = "";
    warningMessageText = mParameters.bGrouped ? resourceModel.getText("C_COMMON_DIALOG_CANCEL_MESSAGE_TEXT", [sActionName]) : resourceModel.getText("C_COMMON_DIALOG_SKIP_SINGLE_MESSAGE_TEXT");
    if (aMessages.length === 1) {
      const messageText = aMessages[0].getMessage();
      const identifierText = aMessages[0].getAdditionalText();
      genericChangesetMessage = resourceModel.getText("C_COMMON_DIALOG_CANCEL_SINGLE_MESSAGE_TEXT");
      if (!isMultiContext412) {
        sMessage = `${messageText}\n${resourceModel.getText("PROCEED")}`;
      } else if (identifierText !== undefined && identifierText !== "") {
        sCancelButtonTxt = mParameters.bGrouped ? sCancelButtonTxt : resourceModel.getText("C_COMMON_DIALOG_SKIP");
        const sHeaderInfoTypeName = mParameters.control.getParent().getTableDefinition().headerInfoTypeName;
        if (sHeaderInfoTypeName) {
          sMessage = `${sHeaderInfoTypeName.toString()} ${identifierText}: ${messageText}\n\n${warningMessageText}`;
        } else {
          sMessage = `${identifierText}: ${messageText}\n\n${warningMessageText}`;
        }
      } else {
        sCancelButtonTxt = mParameters.bGrouped ? sCancelButtonTxt : resourceModel.getText("C_COMMON_DIALOG_SKIP");
        sMessage = `${messageText}\n\n${warningMessageText}`;
      }
      if (isMultiContext412) {
        sMessage = `${genericChangesetMessage}\n\n${sMessage}`;
      }
      MessageBox.warning(sMessage, {
        title: resourceModel.getText("WARNING"),
        actions: [sActionName, sCancelButtonTxt],
        emphasizedAction: sActionName,
        onClose: function (sAction) {
          if (sAction === sActionName) {
            if (isUnboundAction) {
              // condition is true for unbound as well as static actions
              resolve(true);
              oModel.submitBatch(sGroupId);
              if (mParameters.requestSideEffects) {
                mParameters.requestSideEffects();
              }
            } else if (!isMultiContext412) {
              // condition true when mulitple contexts are selected but only one strict handling warning is recieved
              strictHandlingPromises[0].resolve(true);
              oModel.submitBatch(strictHandlingPromises[0].groupId);
              if (strictHandlingPromises[0].requestSideEffects) {
                strictHandlingPromises[0].requestSideEffects();
              }
            } else {
              strictHandlingPromises.forEach(function (sHPromise) {
                sHPromise.resolve(true);
                oModel.submitBatch(sHPromise.groupId);
                if (sHPromise.requestSideEffects) {
                  sHPromise.requestSideEffects();
                }
              });
              const strictHandlingFails = strictHandlingUtilities === null || strictHandlingUtilities === void 0 ? void 0 : strictHandlingUtilities.strictHandlingTransitionFails;
              if (strictHandlingFails.length > 0) {
                messageHandler === null || messageHandler === void 0 ? void 0 : messageHandler.removeTransitionMessages();
              }
            }
            if (strictHandlingUtilities) {
              strictHandlingUtilities.is412Executed = true;
            }
          } else {
            if (strictHandlingUtilities) {
              strictHandlingUtilities.is412Executed = false;
            }
            if (isUnboundAction) {
              resolve(false);
            } else if (!isMultiContext412) {
              strictHandlingPromises[0].resolve(false);
            } else {
              strictHandlingPromises.forEach(function (sHPromise) {
                sHPromise.resolve(false);
              });
            }
            if (mParameters.bGrouped) {
              MessageBox.information(resourceModel.getText("M_CHANGESET_CANCEL_MESSAGES"), {
                contentWidth: "150px"
              });
            }
          }
          if (strictHandlingUtilities) {
            strictHandlingUtilities.strictHandlingWarningMessages = [];
          }
        }
      });
    } else if (aMessages.length > 1) {
      if (isMultiContext412) {
        sCancelButtonTxt = mParameters.bGrouped ? sCancelButtonTxt : resourceModel.getText("C_COMMON_DIALOG_SKIP");
        const sWarningMessage = mParameters.bGrouped ? resourceModel.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_WARNING") : resourceModel.getText("C_COMMON_DIALOG_SKIP_MESSAGES_WARNING");
        const sWarningDesc = mParameters.bGrouped ? resourceModel.getText("C_COMMON_DIALOG_CANCEL_MESSAGES_TEXT", [sActionName]) : resourceModel.getText("C_COMMON_DIALOG_SKIP_MESSAGES_TEXT", [sActionName]);
        const genericMessage = new Message({
          message: sWarningMessage,
          type: MessageType.Warning,
          target: undefined,
          persistent: true,
          description: sWarningDesc
        });
        aMessages = [genericMessage].concat(aMessages);
      }
      const oMessageDialogModel = new JSONModel();
      oMessageDialogModel.setData(aMessages);
      const bStrictHandlingFlow = true;
      const oMessageObject = messageHandling.prepareMessageViewForDialog(oMessageDialogModel, bStrictHandlingFlow, isMultiContext412);
      const operationsDialog = new OperationsDialogBlock({
        messageObject: oMessageObject,
        isMultiContext412: isMultiContext412,
        isGrouped: mParameters === null || mParameters === void 0 ? void 0 : mParameters.bGrouped,
        resolve: resolve,
        model: oModel,
        groupId: sGroupId,
        actionName: sActionName,
        strictHandlingUtilities: strictHandlingUtilities,
        strictHandlingPromises: strictHandlingPromises,
        messageHandler: messageHandler,
        messageDialogModel: oMessageDialogModel,
        cancelButtonTxt: sCancelButtonTxt,
        showMessageInfo: function showMessageInfo() {
          MessageBox.information(resourceModel.getText("M_CHANGESET_CANCEL_MESSAGES"), {
            contentWidth: "150px"
          });
        }
      });
      operationsDialog.open();
    }
  }
  async function fnOnStrictHandlingFailed(sGroupId, mParameters, resourceModel, currentContextIndex, oContext, iContextLength, messageHandler, strictHandlingUtilities, a412Messages) {
    let shPromiseParams;
    if (currentContextIndex === null && iContextLength === null || currentContextIndex === 1 && iContextLength === 1) {
      return new Promise(function (resolve) {
        operationsHelper.renderMessageView(mParameters, resourceModel, messageHandler, a412Messages, strictHandlingUtilities, false, resolve, sGroupId, true);
      });
    }
    if (a412Messages.length) {
      var _mParameters$control, _mParameters$control$;
      const strictHandlingPromise = new Promise(function (resolve) {
        shPromiseParams = {
          requestSideEffects: mParameters.requestSideEffects,
          resolve: resolve,
          groupId: sGroupId
        };
      });
      strictHandlingUtilities.strictHandlingPromises.push(shPromiseParams);
      // copy existing 412 warning messages
      const aStrictHandlingWarningMessages = strictHandlingUtilities.strictHandlingWarningMessages;
      const sColumn = (_mParameters$control = mParameters.control) === null || _mParameters$control === void 0 ? void 0 : (_mParameters$control$ = _mParameters$control.getParent()) === null || _mParameters$control$ === void 0 ? void 0 : _mParameters$control$.getIdentifierColumn();
      let sValue = "";
      if (sColumn && iContextLength && iContextLength > 1) {
        sValue = oContext && oContext.getObject(sColumn);
      }

      // set type and subtitle for all warning messages
      a412Messages.forEach(function (msg) {
        msg.setType("Warning");
        msg.setAdditionalText(sValue);
        aStrictHandlingWarningMessages.push(msg);
      });
      strictHandlingUtilities.strictHandlingWarningMessages = aStrictHandlingWarningMessages;
      mParameters.internalOperationsPromiseResolve();
      return strictHandlingPromise;
    }
  }
  const operationsHelper = {
    renderMessageView: renderMessageView,
    fnOnStrictHandlingFailed: fnOnStrictHandlingFailed
  };
  return operationsHelper;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW5kZXJNZXNzYWdlVmlldyIsIm1QYXJhbWV0ZXJzIiwicmVzb3VyY2VNb2RlbCIsIm1lc3NhZ2VIYW5kbGVyIiwiYU1lc3NhZ2VzIiwic3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMiLCJpc011bHRpQ29udGV4dDQxMiIsInJlc29sdmUiLCJzR3JvdXBJZCIsImlzVW5ib3VuZEFjdGlvbiIsInNBY3Rpb25OYW1lIiwibGFiZWwiLCJvTW9kZWwiLCJtb2RlbCIsInN0cmljdEhhbmRsaW5nUHJvbWlzZXMiLCJzTWVzc2FnZSIsInNDYW5jZWxCdXR0b25UeHQiLCJnZXRUZXh0Iiwid2FybmluZ01lc3NhZ2VUZXh0IiwiZ2VuZXJpY0NoYW5nZXNldE1lc3NhZ2UiLCJiR3JvdXBlZCIsImxlbmd0aCIsIm1lc3NhZ2VUZXh0IiwiZ2V0TWVzc2FnZSIsImlkZW50aWZpZXJUZXh0IiwiZ2V0QWRkaXRpb25hbFRleHQiLCJ1bmRlZmluZWQiLCJzSGVhZGVySW5mb1R5cGVOYW1lIiwiY29udHJvbCIsImdldFBhcmVudCIsImdldFRhYmxlRGVmaW5pdGlvbiIsImhlYWRlckluZm9UeXBlTmFtZSIsInRvU3RyaW5nIiwiTWVzc2FnZUJveCIsIndhcm5pbmciLCJ0aXRsZSIsImFjdGlvbnMiLCJlbXBoYXNpemVkQWN0aW9uIiwib25DbG9zZSIsInNBY3Rpb24iLCJzdWJtaXRCYXRjaCIsInJlcXVlc3RTaWRlRWZmZWN0cyIsImdyb3VwSWQiLCJmb3JFYWNoIiwic0hQcm9taXNlIiwic3RyaWN0SGFuZGxpbmdGYWlscyIsInN0cmljdEhhbmRsaW5nVHJhbnNpdGlvbkZhaWxzIiwicmVtb3ZlVHJhbnNpdGlvbk1lc3NhZ2VzIiwiaXM0MTJFeGVjdXRlZCIsImluZm9ybWF0aW9uIiwiY29udGVudFdpZHRoIiwic3RyaWN0SGFuZGxpbmdXYXJuaW5nTWVzc2FnZXMiLCJzV2FybmluZ01lc3NhZ2UiLCJzV2FybmluZ0Rlc2MiLCJnZW5lcmljTWVzc2FnZSIsIk1lc3NhZ2UiLCJtZXNzYWdlIiwidHlwZSIsIk1lc3NhZ2VUeXBlIiwiV2FybmluZyIsInRhcmdldCIsInBlcnNpc3RlbnQiLCJkZXNjcmlwdGlvbiIsImNvbmNhdCIsIm9NZXNzYWdlRGlhbG9nTW9kZWwiLCJKU09OTW9kZWwiLCJzZXREYXRhIiwiYlN0cmljdEhhbmRsaW5nRmxvdyIsIm9NZXNzYWdlT2JqZWN0IiwibWVzc2FnZUhhbmRsaW5nIiwicHJlcGFyZU1lc3NhZ2VWaWV3Rm9yRGlhbG9nIiwib3BlcmF0aW9uc0RpYWxvZyIsIk9wZXJhdGlvbnNEaWFsb2dCbG9jayIsIm1lc3NhZ2VPYmplY3QiLCJpc0dyb3VwZWQiLCJhY3Rpb25OYW1lIiwibWVzc2FnZURpYWxvZ01vZGVsIiwiY2FuY2VsQnV0dG9uVHh0Iiwic2hvd01lc3NhZ2VJbmZvIiwib3BlbiIsImZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZCIsImN1cnJlbnRDb250ZXh0SW5kZXgiLCJvQ29udGV4dCIsImlDb250ZXh0TGVuZ3RoIiwiYTQxMk1lc3NhZ2VzIiwic2hQcm9taXNlUGFyYW1zIiwiUHJvbWlzZSIsIm9wZXJhdGlvbnNIZWxwZXIiLCJzdHJpY3RIYW5kbGluZ1Byb21pc2UiLCJwdXNoIiwiYVN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzIiwic0NvbHVtbiIsImdldElkZW50aWZpZXJDb2x1bW4iLCJzVmFsdWUiLCJnZXRPYmplY3QiLCJtc2ciLCJzZXRUeXBlIiwic2V0QWRkaXRpb25hbFRleHQiLCJpbnRlcm5hbE9wZXJhdGlvbnNQcm9taXNlUmVzb2x2ZSJdLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsib3BlcmF0aW9uc0hlbHBlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEludGVybmFsTW9kZWxDb250ZXh0IH0gZnJvbSBcInNhcC9mZS9jb3JlL2hlbHBlcnMvTW9kZWxIZWxwZXJcIjtcbmltcG9ydCB0eXBlIFJlc291cmNlTW9kZWwgZnJvbSBcInNhcC9mZS9jb3JlL1Jlc291cmNlTW9kZWxcIjtcbmltcG9ydCB0eXBlIFRhYmxlQVBJIGZyb20gXCJzYXAvZmUvbWFjcm9zL3RhYmxlL1RhYmxlQVBJXCI7XG5pbXBvcnQgdHlwZSBEaWFsb2cgZnJvbSBcInNhcC9tL0RpYWxvZ1wiO1xuaW1wb3J0IE1lc3NhZ2VCb3ggZnJvbSBcInNhcC9tL01lc3NhZ2VCb3hcIjtcbmltcG9ydCBNZXNzYWdlIGZyb20gXCJzYXAvdWkvY29yZS9tZXNzYWdlL01lc3NhZ2VcIjtcbmltcG9ydCB0eXBlIENvbnRyb2wgZnJvbSBcInNhcC91aS9tZGMvQ29udHJvbFwiO1xuaW1wb3J0IEpTT05Nb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL2pzb24vSlNPTk1vZGVsXCI7XG5pbXBvcnQgdHlwZSBDb250ZXh0IGZyb20gXCJzYXAvdWkvbW9kZWwvb2RhdGEvdjQvQ29udGV4dFwiO1xuaW1wb3J0IHR5cGUgT0RhdGFNb2RlbCBmcm9tIFwic2FwL3VpL21vZGVsL29kYXRhL3Y0L09EYXRhTW9kZWxcIjtcbmltcG9ydCBPcGVyYXRpb25zRGlhbG9nQmxvY2sgZnJvbSBcIi4vY29udHJvbGxlcmV4dGVuc2lvbnMvZGlhbG9nL09wZXJhdGlvbnNEaWFsb2cuYmxvY2tcIjtcbmltcG9ydCB0eXBlIE1lc3NhZ2VIYW5kbGVyIGZyb20gXCIuL2NvbnRyb2xsZXJleHRlbnNpb25zL01lc3NhZ2VIYW5kbGVyXCI7XG5pbXBvcnQgbWVzc2FnZUhhbmRsaW5nIGZyb20gXCIuL2NvbnRyb2xsZXJleHRlbnNpb25zL21lc3NhZ2VIYW5kbGVyL21lc3NhZ2VIYW5kbGluZ1wiO1xuaW1wb3J0IHsgTWVzc2FnZVR5cGUgfSBmcm9tIFwiLi9mb3JtYXR0ZXJzL1RhYmxlRm9ybWF0dGVyVHlwZXNcIjtcbnR5cGUgU3RyaWN0SGFuZGxpbmdQcm9taXNlID0ge1xuXHRyZXNvbHZlOiBGdW5jdGlvbjtcblx0Z3JvdXBJZDogc3RyaW5nO1xuXHRyZXF1ZXN0U2lkZUVmZmVjdHM/OiBGdW5jdGlvbjtcbn07XG50eXBlIFN0cmljdEhhbmRsaW5nUGFyYW1ldGVycyA9IHtcblx0aW50ZXJuYWxPcGVyYXRpb25zUHJvbWlzZVJlc29sdmU6IEZ1bmN0aW9uO1xuXHRsYWJlbDogc3RyaW5nO1xuXHRtb2RlbDogT0RhdGFNb2RlbDtcblx0aW50ZXJuYWxNb2RlbENvbnRleHQ/OiBJbnRlcm5hbE1vZGVsQ29udGV4dDtcblx0Y29udHJvbDogQ29udHJvbDtcblx0cmVxdWVzdFNpZGVFZmZlY3RzPzogRnVuY3Rpb247XG5cdGRpYWxvZz86IERpYWxvZztcblx0Ykdyb3VwZWQ6IGJvb2xlYW47XG59O1xudHlwZSBPcGVyYXRpb25zSGVscGVyID0ge1xuXHRyZW5kZXJNZXNzYWdlVmlldzogRnVuY3Rpb247XG5cdGZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZDogRnVuY3Rpb247XG59O1xuXG5leHBvcnQgdHlwZSBTdHJpY3RIYW5kbGluZ1V0aWxpdGllcyA9IHtcblx0aXM0MTJFeGVjdXRlZDogYm9vbGVhbjtcblx0c3RyaWN0SGFuZGxpbmdUcmFuc2l0aW9uRmFpbHM6IE9iamVjdFtdO1xuXHRzdHJpY3RIYW5kbGluZ1Byb21pc2VzOiBTdHJpY3RIYW5kbGluZ1Byb21pc2VbXTtcblx0c3RyaWN0SGFuZGxpbmdXYXJuaW5nTWVzc2FnZXM6IE1lc3NhZ2VbXTtcblx0ZGVsYXlTdWNjZXNzTWVzc2FnZXM6IE1lc3NhZ2VbXTtcblx0cHJvY2Vzc2VkTWVzc2FnZUlkczogc3RyaW5nW107XG59O1xuXG5mdW5jdGlvbiByZW5kZXJNZXNzYWdlVmlldyhcblx0bVBhcmFtZXRlcnM6IFN0cmljdEhhbmRsaW5nUGFyYW1ldGVycyxcblx0cmVzb3VyY2VNb2RlbDogUmVzb3VyY2VNb2RlbCxcblx0bWVzc2FnZUhhbmRsZXI6IE1lc3NhZ2VIYW5kbGVyIHwgdW5kZWZpbmVkLFxuXHRhTWVzc2FnZXM6IE1lc3NhZ2VbXSxcblx0c3RyaWN0SGFuZGxpbmdVdGlsaXRpZXM6IFN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLFxuXHRpc011bHRpQ29udGV4dDQxMjogYm9vbGVhbixcblx0cmVzb2x2ZT86IEZ1bmN0aW9uLFxuXHRzR3JvdXBJZD86IHN0cmluZyxcblx0aXNVbmJvdW5kQWN0aW9uPzogYm9vbGVhblxuKTogdW5rbm93bjtcbmZ1bmN0aW9uIHJlbmRlck1lc3NhZ2VWaWV3KFxuXHRtUGFyYW1ldGVyczogU3RyaWN0SGFuZGxpbmdQYXJhbWV0ZXJzLFxuXHRyZXNvdXJjZU1vZGVsOiBSZXNvdXJjZU1vZGVsLFxuXHRtZXNzYWdlSGFuZGxlcjogTWVzc2FnZUhhbmRsZXIgfCB1bmRlZmluZWQsXG5cdGFNZXNzYWdlczogTWVzc2FnZVtdLFxuXHRzdHJpY3RIYW5kbGluZ1V0aWxpdGllczogU3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMsXG5cdGlzTXVsdGlDb250ZXh0NDEyPzogYm9vbGVhbixcblx0cmVzb2x2ZT86IEZ1bmN0aW9uLFxuXHRzR3JvdXBJZD86IHN0cmluZyxcblx0aXNVbmJvdW5kQWN0aW9uPzogYm9vbGVhblxuKSB7XG5cdGNvbnN0IHNBY3Rpb25OYW1lID0gbVBhcmFtZXRlcnMubGFiZWw7XG5cdGNvbnN0IG9Nb2RlbCA9IG1QYXJhbWV0ZXJzLm1vZGVsO1xuXHRjb25zdCBzdHJpY3RIYW5kbGluZ1Byb21pc2VzID0gc3RyaWN0SGFuZGxpbmdVdGlsaXRpZXM/LnN0cmljdEhhbmRsaW5nUHJvbWlzZXM7XG5cdGxldCBzTWVzc2FnZTogc3RyaW5nO1xuXHRsZXQgc0NhbmNlbEJ1dHRvblR4dDogc3RyaW5nID0gcmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiQ19DT01NT05fRElBTE9HX0NBTkNFTFwiKTtcblx0bGV0IHdhcm5pbmdNZXNzYWdlVGV4dCA9IFwiXCI7XG5cdGxldCBnZW5lcmljQ2hhbmdlc2V0TWVzc2FnZSA9IFwiXCI7XG5cdHdhcm5pbmdNZXNzYWdlVGV4dCA9IG1QYXJhbWV0ZXJzLmJHcm91cGVkXG5cdFx0PyByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfQ0FOQ0VMX01FU1NBR0VfVEVYVFwiLCBbc0FjdGlvbk5hbWVdKVxuXHRcdDogcmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiQ19DT01NT05fRElBTE9HX1NLSVBfU0lOR0xFX01FU1NBR0VfVEVYVFwiKTtcblx0aWYgKGFNZXNzYWdlcy5sZW5ndGggPT09IDEpIHtcblx0XHRjb25zdCBtZXNzYWdlVGV4dCA9IGFNZXNzYWdlc1swXS5nZXRNZXNzYWdlKCk7XG5cdFx0Y29uc3QgaWRlbnRpZmllclRleHQgPSBhTWVzc2FnZXNbMF0uZ2V0QWRkaXRpb25hbFRleHQoKTtcblx0XHRnZW5lcmljQ2hhbmdlc2V0TWVzc2FnZSA9IHJlc291cmNlTW9kZWwuZ2V0VGV4dChcIkNfQ09NTU9OX0RJQUxPR19DQU5DRUxfU0lOR0xFX01FU1NBR0VfVEVYVFwiKTtcblx0XHRpZiAoIWlzTXVsdGlDb250ZXh0NDEyKSB7XG5cdFx0XHRzTWVzc2FnZSA9IGAke21lc3NhZ2VUZXh0fVxcbiR7cmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiUFJPQ0VFRFwiKX1gO1xuXHRcdH0gZWxzZSBpZiAoaWRlbnRpZmllclRleHQgIT09IHVuZGVmaW5lZCAmJiBpZGVudGlmaWVyVGV4dCAhPT0gXCJcIikge1xuXHRcdFx0c0NhbmNlbEJ1dHRvblR4dCA9IG1QYXJhbWV0ZXJzLmJHcm91cGVkID8gc0NhbmNlbEJ1dHRvblR4dCA6IHJlc291cmNlTW9kZWwuZ2V0VGV4dChcIkNfQ09NTU9OX0RJQUxPR19TS0lQXCIpO1xuXHRcdFx0Y29uc3Qgc0hlYWRlckluZm9UeXBlTmFtZSA9IChtUGFyYW1ldGVycy5jb250cm9sLmdldFBhcmVudCgpIGFzIFRhYmxlQVBJKS5nZXRUYWJsZURlZmluaXRpb24oKS5oZWFkZXJJbmZvVHlwZU5hbWU7XG5cdFx0XHRpZiAoc0hlYWRlckluZm9UeXBlTmFtZSkge1xuXHRcdFx0XHRzTWVzc2FnZSA9IGAke3NIZWFkZXJJbmZvVHlwZU5hbWUudG9TdHJpbmcoKX0gJHtpZGVudGlmaWVyVGV4dH06ICR7bWVzc2FnZVRleHR9XFxuXFxuJHt3YXJuaW5nTWVzc2FnZVRleHR9YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNNZXNzYWdlID0gYCR7aWRlbnRpZmllclRleHR9OiAke21lc3NhZ2VUZXh0fVxcblxcbiR7d2FybmluZ01lc3NhZ2VUZXh0fWA7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNDYW5jZWxCdXR0b25UeHQgPSBtUGFyYW1ldGVycy5iR3JvdXBlZCA/IHNDYW5jZWxCdXR0b25UeHQgOiByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfU0tJUFwiKTtcblx0XHRcdHNNZXNzYWdlID0gYCR7bWVzc2FnZVRleHR9XFxuXFxuJHt3YXJuaW5nTWVzc2FnZVRleHR9YDtcblx0XHR9XG5cdFx0aWYgKGlzTXVsdGlDb250ZXh0NDEyKSB7XG5cdFx0XHRzTWVzc2FnZSA9IGAke2dlbmVyaWNDaGFuZ2VzZXRNZXNzYWdlfVxcblxcbiR7c01lc3NhZ2V9YDtcblx0XHR9XG5cdFx0TWVzc2FnZUJveC53YXJuaW5nKHNNZXNzYWdlLCB7XG5cdFx0XHR0aXRsZTogcmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiV0FSTklOR1wiKSxcblx0XHRcdGFjdGlvbnM6IFtzQWN0aW9uTmFtZSwgc0NhbmNlbEJ1dHRvblR4dF0sXG5cdFx0XHRlbXBoYXNpemVkQWN0aW9uOiBzQWN0aW9uTmFtZSxcblx0XHRcdG9uQ2xvc2U6IGZ1bmN0aW9uIChzQWN0aW9uOiBzdHJpbmcpIHtcblx0XHRcdFx0aWYgKHNBY3Rpb24gPT09IHNBY3Rpb25OYW1lKSB7XG5cdFx0XHRcdFx0aWYgKGlzVW5ib3VuZEFjdGlvbikge1xuXHRcdFx0XHRcdFx0Ly8gY29uZGl0aW9uIGlzIHRydWUgZm9yIHVuYm91bmQgYXMgd2VsbCBhcyBzdGF0aWMgYWN0aW9uc1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSEodHJ1ZSk7XG5cdFx0XHRcdFx0XHRvTW9kZWwuc3VibWl0QmF0Y2goc0dyb3VwSWQhKTtcblx0XHRcdFx0XHRcdGlmIChtUGFyYW1ldGVycy5yZXF1ZXN0U2lkZUVmZmVjdHMpIHtcblx0XHRcdFx0XHRcdFx0bVBhcmFtZXRlcnMucmVxdWVzdFNpZGVFZmZlY3RzKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmICghaXNNdWx0aUNvbnRleHQ0MTIpIHtcblx0XHRcdFx0XHRcdC8vIGNvbmRpdGlvbiB0cnVlIHdoZW4gbXVsaXRwbGUgY29udGV4dHMgYXJlIHNlbGVjdGVkIGJ1dCBvbmx5IG9uZSBzdHJpY3QgaGFuZGxpbmcgd2FybmluZyBpcyByZWNpZXZlZFxuXHRcdFx0XHRcdFx0c3RyaWN0SGFuZGxpbmdQcm9taXNlc1swXS5yZXNvbHZlKHRydWUpO1xuXHRcdFx0XHRcdFx0b01vZGVsLnN1Ym1pdEJhdGNoKHN0cmljdEhhbmRsaW5nUHJvbWlzZXNbMF0uZ3JvdXBJZCk7XG5cdFx0XHRcdFx0XHRpZiAoc3RyaWN0SGFuZGxpbmdQcm9taXNlc1swXS5yZXF1ZXN0U2lkZUVmZmVjdHMpIHtcblx0XHRcdFx0XHRcdFx0c3RyaWN0SGFuZGxpbmdQcm9taXNlc1swXS5yZXF1ZXN0U2lkZUVmZmVjdHMoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c3RyaWN0SGFuZGxpbmdQcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzSFByb21pc2U6IFN0cmljdEhhbmRsaW5nUHJvbWlzZSkge1xuXHRcdFx0XHRcdFx0XHRzSFByb21pc2UucmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0XHRcdFx0b01vZGVsLnN1Ym1pdEJhdGNoKHNIUHJvbWlzZS5ncm91cElkKTtcblx0XHRcdFx0XHRcdFx0aWYgKHNIUHJvbWlzZS5yZXF1ZXN0U2lkZUVmZmVjdHMpIHtcblx0XHRcdFx0XHRcdFx0XHRzSFByb21pc2UucmVxdWVzdFNpZGVFZmZlY3RzKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RyaWN0SGFuZGxpbmdGYWlscyA9IHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzPy5zdHJpY3RIYW5kbGluZ1RyYW5zaXRpb25GYWlscztcblx0XHRcdFx0XHRcdGlmIChzdHJpY3RIYW5kbGluZ0ZhaWxzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0bWVzc2FnZUhhbmRsZXI/LnJlbW92ZVRyYW5zaXRpb25NZXNzYWdlcygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoc3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMpIHtcblx0XHRcdFx0XHRcdHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLmlzNDEyRXhlY3V0ZWQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoc3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMpIHtcblx0XHRcdFx0XHRcdHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLmlzNDEyRXhlY3V0ZWQgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzVW5ib3VuZEFjdGlvbikge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSEoZmFsc2UpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIWlzTXVsdGlDb250ZXh0NDEyKSB7XG5cdFx0XHRcdFx0XHRzdHJpY3RIYW5kbGluZ1Byb21pc2VzWzBdLnJlc29sdmUoZmFsc2UpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzdHJpY3RIYW5kbGluZ1Byb21pc2VzLmZvckVhY2goZnVuY3Rpb24gKHNIUHJvbWlzZTogU3RyaWN0SGFuZGxpbmdQcm9taXNlKSB7XG5cdFx0XHRcdFx0XHRcdHNIUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAobVBhcmFtZXRlcnMuYkdyb3VwZWQpIHtcblx0XHRcdFx0XHRcdE1lc3NhZ2VCb3guaW5mb3JtYXRpb24ocmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiTV9DSEFOR0VTRVRfQ0FOQ0VMX01FU1NBR0VTXCIpLCB7XG5cdFx0XHRcdFx0XHRcdGNvbnRlbnRXaWR0aDogXCIxNTBweFwiXG5cdFx0XHRcdFx0XHR9IGFzIG9iamVjdCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChzdHJpY3RIYW5kbGluZ1V0aWxpdGllcykge1xuXHRcdFx0XHRcdHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLnN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzID0gW107XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSBlbHNlIGlmIChhTWVzc2FnZXMubGVuZ3RoID4gMSkge1xuXHRcdGlmIChpc011bHRpQ29udGV4dDQxMikge1xuXHRcdFx0c0NhbmNlbEJ1dHRvblR4dCA9IG1QYXJhbWV0ZXJzLmJHcm91cGVkID8gc0NhbmNlbEJ1dHRvblR4dCA6IHJlc291cmNlTW9kZWwuZ2V0VGV4dChcIkNfQ09NTU9OX0RJQUxPR19TS0lQXCIpO1xuXHRcdFx0Y29uc3Qgc1dhcm5pbmdNZXNzYWdlID0gbVBhcmFtZXRlcnMuYkdyb3VwZWRcblx0XHRcdFx0PyByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfQ0FOQ0VMX01FU1NBR0VTX1dBUk5JTkdcIilcblx0XHRcdFx0OiByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfU0tJUF9NRVNTQUdFU19XQVJOSU5HXCIpO1xuXHRcdFx0Y29uc3Qgc1dhcm5pbmdEZXNjID0gbVBhcmFtZXRlcnMuYkdyb3VwZWRcblx0XHRcdFx0PyByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfQ0FOQ0VMX01FU1NBR0VTX1RFWFRcIiwgW3NBY3Rpb25OYW1lXSlcblx0XHRcdFx0OiByZXNvdXJjZU1vZGVsLmdldFRleHQoXCJDX0NPTU1PTl9ESUFMT0dfU0tJUF9NRVNTQUdFU19URVhUXCIsIFtzQWN0aW9uTmFtZV0pO1xuXHRcdFx0Y29uc3QgZ2VuZXJpY01lc3NhZ2UgPSBuZXcgTWVzc2FnZSh7XG5cdFx0XHRcdG1lc3NhZ2U6IHNXYXJuaW5nTWVzc2FnZSxcblx0XHRcdFx0dHlwZTogTWVzc2FnZVR5cGUuV2FybmluZyxcblx0XHRcdFx0dGFyZ2V0OiB1bmRlZmluZWQsXG5cdFx0XHRcdHBlcnNpc3RlbnQ6IHRydWUsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBzV2FybmluZ0Rlc2Ncblx0XHRcdH0pO1xuXHRcdFx0YU1lc3NhZ2VzID0gW2dlbmVyaWNNZXNzYWdlXS5jb25jYXQoYU1lc3NhZ2VzKTtcblx0XHR9XG5cdFx0Y29uc3Qgb01lc3NhZ2VEaWFsb2dNb2RlbCA9IG5ldyBKU09OTW9kZWwoKTtcblx0XHRvTWVzc2FnZURpYWxvZ01vZGVsLnNldERhdGEoYU1lc3NhZ2VzKTtcblx0XHRjb25zdCBiU3RyaWN0SGFuZGxpbmdGbG93ID0gdHJ1ZTtcblx0XHRjb25zdCBvTWVzc2FnZU9iamVjdCA9IG1lc3NhZ2VIYW5kbGluZy5wcmVwYXJlTWVzc2FnZVZpZXdGb3JEaWFsb2cob01lc3NhZ2VEaWFsb2dNb2RlbCwgYlN0cmljdEhhbmRsaW5nRmxvdywgaXNNdWx0aUNvbnRleHQ0MTIpO1xuXHRcdGNvbnN0IG9wZXJhdGlvbnNEaWFsb2cgPSBuZXcgT3BlcmF0aW9uc0RpYWxvZ0Jsb2NrKHtcblx0XHRcdG1lc3NhZ2VPYmplY3Q6IG9NZXNzYWdlT2JqZWN0LFxuXHRcdFx0aXNNdWx0aUNvbnRleHQ0MTI6IGlzTXVsdGlDb250ZXh0NDEyLFxuXHRcdFx0aXNHcm91cGVkOiBtUGFyYW1ldGVycz8uYkdyb3VwZWQsXG5cdFx0XHRyZXNvbHZlOiByZXNvbHZlLFxuXHRcdFx0bW9kZWw6IG9Nb2RlbCxcblx0XHRcdGdyb3VwSWQ6IHNHcm91cElkLFxuXHRcdFx0YWN0aW9uTmFtZTogc0FjdGlvbk5hbWUsXG5cdFx0XHRzdHJpY3RIYW5kbGluZ1V0aWxpdGllczogc3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMsXG5cdFx0XHRzdHJpY3RIYW5kbGluZ1Byb21pc2VzOiBzdHJpY3RIYW5kbGluZ1Byb21pc2VzLFxuXHRcdFx0bWVzc2FnZUhhbmRsZXI6IG1lc3NhZ2VIYW5kbGVyLFxuXHRcdFx0bWVzc2FnZURpYWxvZ01vZGVsOiBvTWVzc2FnZURpYWxvZ01vZGVsLFxuXHRcdFx0Y2FuY2VsQnV0dG9uVHh0OiBzQ2FuY2VsQnV0dG9uVHh0LFxuXHRcdFx0c2hvd01lc3NhZ2VJbmZvOiBmdW5jdGlvbiBzaG93TWVzc2FnZUluZm8oKSB7XG5cdFx0XHRcdE1lc3NhZ2VCb3guaW5mb3JtYXRpb24ocmVzb3VyY2VNb2RlbC5nZXRUZXh0KFwiTV9DSEFOR0VTRVRfQ0FOQ0VMX01FU1NBR0VTXCIpLCB7XG5cdFx0XHRcdFx0Y29udGVudFdpZHRoOiBcIjE1MHB4XCJcblx0XHRcdFx0fSBhcyBvYmplY3QpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdG9wZXJhdGlvbnNEaWFsb2cub3BlbigpO1xuXHR9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZChcblx0c0dyb3VwSWQ6IHN0cmluZyxcblx0bVBhcmFtZXRlcnM6IFN0cmljdEhhbmRsaW5nUGFyYW1ldGVycyxcblx0cmVzb3VyY2VNb2RlbDogUmVzb3VyY2VNb2RlbCxcblx0Y3VycmVudENvbnRleHRJbmRleDogbnVtYmVyIHwgbnVsbCxcblx0b0NvbnRleHQ6IENvbnRleHQgfCBudWxsLFxuXHRpQ29udGV4dExlbmd0aDogbnVtYmVyIHwgbnVsbCxcblx0bWVzc2FnZUhhbmRsZXI6IE1lc3NhZ2VIYW5kbGVyIHwgdW5kZWZpbmVkLFxuXHRzdHJpY3RIYW5kbGluZ1V0aWxpdGllczogU3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMsXG5cdGE0MTJNZXNzYWdlczogTWVzc2FnZVtdXG4pIHtcblx0bGV0IHNoUHJvbWlzZVBhcmFtczogU3RyaWN0SGFuZGxpbmdQcm9taXNlIHwgdW5kZWZpbmVkO1xuXG5cdGlmICgoY3VycmVudENvbnRleHRJbmRleCA9PT0gbnVsbCAmJiBpQ29udGV4dExlbmd0aCA9PT0gbnVsbCkgfHwgKGN1cnJlbnRDb250ZXh0SW5kZXggPT09IDEgJiYgaUNvbnRleHRMZW5ndGggPT09IDEpKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdFx0XHRvcGVyYXRpb25zSGVscGVyLnJlbmRlck1lc3NhZ2VWaWV3KFxuXHRcdFx0XHRtUGFyYW1ldGVycyxcblx0XHRcdFx0cmVzb3VyY2VNb2RlbCxcblx0XHRcdFx0bWVzc2FnZUhhbmRsZXIsXG5cdFx0XHRcdGE0MTJNZXNzYWdlcyxcblx0XHRcdFx0c3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMsXG5cdFx0XHRcdGZhbHNlLFxuXHRcdFx0XHRyZXNvbHZlLFxuXHRcdFx0XHRzR3JvdXBJZCxcblx0XHRcdFx0dHJ1ZVxuXHRcdFx0KTtcblx0XHR9KTtcblx0fVxuXG5cdGlmIChhNDEyTWVzc2FnZXMubGVuZ3RoKSB7XG5cdFx0Y29uc3Qgc3RyaWN0SGFuZGxpbmdQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0XHRcdHNoUHJvbWlzZVBhcmFtcyA9IHtcblx0XHRcdFx0cmVxdWVzdFNpZGVFZmZlY3RzOiBtUGFyYW1ldGVycy5yZXF1ZXN0U2lkZUVmZmVjdHMsXG5cdFx0XHRcdHJlc29sdmU6IHJlc29sdmUsXG5cdFx0XHRcdGdyb3VwSWQ6IHNHcm91cElkXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0c3RyaWN0SGFuZGxpbmdVdGlsaXRpZXMuc3RyaWN0SGFuZGxpbmdQcm9taXNlcy5wdXNoKHNoUHJvbWlzZVBhcmFtcyBhcyBTdHJpY3RIYW5kbGluZ1Byb21pc2UpO1xuXHRcdC8vIGNvcHkgZXhpc3RpbmcgNDEyIHdhcm5pbmcgbWVzc2FnZXNcblx0XHRjb25zdCBhU3RyaWN0SGFuZGxpbmdXYXJuaW5nTWVzc2FnZXM6IE1lc3NhZ2VbXSA9IHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLnN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzO1xuXHRcdGNvbnN0IHNDb2x1bW4gPSAobVBhcmFtZXRlcnMuY29udHJvbD8uZ2V0UGFyZW50KCkgYXMgVGFibGVBUEkpPy5nZXRJZGVudGlmaWVyQ29sdW1uKCk7XG5cdFx0bGV0IHNWYWx1ZSA9IFwiXCI7XG5cdFx0aWYgKHNDb2x1bW4gJiYgaUNvbnRleHRMZW5ndGggJiYgaUNvbnRleHRMZW5ndGggPiAxKSB7XG5cdFx0XHRzVmFsdWUgPSBvQ29udGV4dCAmJiBvQ29udGV4dC5nZXRPYmplY3Qoc0NvbHVtbik7XG5cdFx0fVxuXG5cdFx0Ly8gc2V0IHR5cGUgYW5kIHN1YnRpdGxlIGZvciBhbGwgd2FybmluZyBtZXNzYWdlc1xuXHRcdGE0MTJNZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uIChtc2c6IE1lc3NhZ2UpIHtcblx0XHRcdG1zZy5zZXRUeXBlKFwiV2FybmluZ1wiKTtcblx0XHRcdG1zZy5zZXRBZGRpdGlvbmFsVGV4dChzVmFsdWUpO1xuXHRcdFx0YVN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzLnB1c2gobXNnKTtcblx0XHR9KTtcblxuXHRcdHN0cmljdEhhbmRsaW5nVXRpbGl0aWVzLnN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzID0gYVN0cmljdEhhbmRsaW5nV2FybmluZ01lc3NhZ2VzO1xuXHRcdG1QYXJhbWV0ZXJzLmludGVybmFsT3BlcmF0aW9uc1Byb21pc2VSZXNvbHZlKCk7XG5cdFx0cmV0dXJuIHN0cmljdEhhbmRsaW5nUHJvbWlzZTtcblx0fVxufVxuXG5jb25zdCBvcGVyYXRpb25zSGVscGVyOiBPcGVyYXRpb25zSGVscGVyID0ge1xuXHRyZW5kZXJNZXNzYWdlVmlldzogcmVuZGVyTWVzc2FnZVZpZXcsXG5cdGZuT25TdHJpY3RIYW5kbGluZ0ZhaWxlZDogZm5PblN0cmljdEhhbmRsaW5nRmFpbGVkXG59O1xuXG5leHBvcnQgZGVmYXVsdCBvcGVyYXRpb25zSGVscGVyO1xuIl0sIm1hcHBpbmdzIjoiO0FBQUE7QUFBQTtBQUFBOzs7OztFQXNEQSxTQUFTQSxpQkFBaUIsQ0FDekJDLFdBQXFDLEVBQ3JDQyxhQUE0QixFQUM1QkMsY0FBMEMsRUFDMUNDLFNBQW9C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