/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2023 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/fe/core/buildingBlocks/BuildingBlockBase","sap/fe/core/buildingBlocks/BuildingBlockSupport","sap/fe/core/buildingBlocks/BuildingBlockTemplateProcessor","sap/fe/core/converters/helpers/BindingHelper","sap/fe/core/converters/MetaModelConverter","sap/fe/core/formatters/CollaborationFormatter","sap/fe/core/formatters/ValueFormatter","sap/fe/core/helpers/BindingToolkit","sap/fe/core/helpers/MetaModelFunction","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/TypeGuards","sap/fe/core/templating/DataModelPathHelper","sap/fe/core/templating/PropertyHelper","sap/fe/core/templating/UIFormatters","sap/fe/macros/CommonHelper","sap/fe/macros/field/FieldTemplating","sap/fe/macros/situations/SituationsIndicator.block","sap/ui/mdc/enum/EditMode","../field/FieldHelper","./field/FieldStructure"],function(e,t,i,a,n,o,r,l,s,d,u,p,c,f,v,b,y,m,g,h,x,I){"use strict";var F,O,P,E,T,A,D,M,C,S,U,w,B,k,j,$,N,V,W,L,_,z,R,H,q,K,Q,G,X,J,Y,Z,ee,te,ie,ae,ne,oe,re,le,se,de,ue,pe,ce,fe,ve,be,ye,me,ge,he,xe,Ie,Fe,Oe,Pe,Ee,Te;var Ae={};var De=v.isSemanticKey;var Me=f.getTargetObjectPath;var Ce=f.getRelativePaths;var Se=f.getContextRelativeTargetObjectPath;var Ue=f.enhanceDataModelPath;var we=c.isProperty;var Be=p.generate;var ke=d.getRequiredPropertiesFromUpdateRestrictions;var je=d.getRequiredPropertiesFromInsertRestrictions;var $e=s.wrapBindingExpression;var Ne=s.pathInModel;var Ve=s.not;var We=s.ifElse;var Le=s.getExpressionFromAnnotation;var _e=s.formatWithTypeInformation;var ze=s.formatResult;var Re=s.fn;var He=s.equal;var qe=s.constant;var Ke=s.compileExpression;var Qe=s.and;var Ge=n.Entity;var Xe=a.xml;var Je=i.defineBuildingBlock;var Ye=i.blockEvent;var Ze=i.blockAttribute;function et(e,t,i,a){if(!i)return;Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(a):void 0})}function tt(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function it(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;at(e,t)}function at(e,t){at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function e(t,i){t.__proto__=i;return t};return at(e,t)}function nt(e,t,i,a,n){var o={};Object.keys(a).forEach(function(e){o[e]=a[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}o=i.slice().reverse().reduce(function(i,a){return a(e,t,i)||i},o);if(n&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(n):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(e,t,o);o=null}return o}function ot(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and runs after the decorators transform.")}let rt=(F=Je({name:"Field",namespace:"sap.fe.macros.internal",designtime:"sap/fe/macros/internal/Field.designtime"}),O=Ze({type:"string"}),P=Ze({type:"string"}),E=Ze({type:"string"}),T=Ze({type:"string"}),A=Ze({type:"string"}),D=Ze({type:"string"}),M=Ze({type:"string"}),C=Ze({type:"sap.ui.model.Context",required:true,expectedTypes:["EntitySet","NavigationProperty","EntityType","Singleton"]}),S=Ze({type:"boolean"}),U=Ze({type:"sap.ui.model.Context",required:true,expectedTypes:["Property"],expectedAnnotationTypes:["com.sap.vocabularies.UI.v1.DataField","com.sap.vocabularies.UI.v1.DataFieldWithUrl","com.sap.vocabularies.UI.v1.DataFieldForAnnotation","com.sap.vocabularies.UI.v1.DataFieldForAction","com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldWithAction","com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation","com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath","com.sap.vocabularies.UI.v1.DataPointType"]}),w=Ze({type:"sap.ui.mdc.enum.EditMode"}),B=Ze({type:"boolean"}),k=Ze({type:"string"}),j=Ze({type:"string"}),$=Ze({type:"sap.ui.core.TextAlign"}),N=Ze({type:"string",required:false}),V=Ze({type:"string"}),W=Ze({type:"boolean"}),L=Ze({type:"boolean"}),_=Ze({type:"object",validate:function(e){if(e.textAlignMode&&!["Table","Form"].includes(e.textAlignMode)){throw new Error(`Allowed value ${e.textAlignMode} for textAlignMode does not match`)}if(e.displayMode&&!["Value","Description","ValueDescription","DescriptionValue"].includes(e.displayMode)){throw new Error(`Allowed value ${e.displayMode} for displayMode does not match`)}if(e.fieldMode&&!["nowrapper",""].includes(e.fieldMode)){throw new Error(`Allowed value ${e.fieldMode} for fieldMode does not match`)}if(e.measureDisplayMode&&!["Hidden","ReadOnly"].includes(e.measureDisplayMode)){throw new Error(`Allowed value ${e.measureDisplayMode} for measureDisplayMode does not match`)}if(e.textExpandBehaviorDisplay&&!["InPlace","Popover"].includes(e.textExpandBehaviorDisplay)){throw new Error(`Allowed value ${e.textExpandBehaviorDisplay} for textExpandBehaviorDisplay does not match`)}if(e.semanticKeyStyle&&!["ObjectIdentifier","Label",""].includes(e.semanticKeyStyle)){throw new Error(`Allowed value ${e.semanticKeyStyle} for semanticKeyStyle does not match`)}if(typeof e.isAnalytics==="string"){e.isAnalytics=e.isAnalytics==="true"}return e}}),z=Ze({type:"sap.ui.model.Context"}),R=Ze({type:"sap.ui.model.Context"}),H=Ze({type:"sap.ui.model.Context"}),q=Ze({type:"sap.ui.model.Context"}),K=Ze({type:"sap.ui.model.Context"}),Q=Ze({type:"boolean"}),G=Ze({type:"string"}),X=Ye(),F(J=(Y=function(t){it(i,t);i.getOverrides=function e(t,i){const a={};if(t){const e=t[i];if(e){Object.keys(e).forEach(function(t){a[t]=e[t]})}}return a};i.getIdentifierTitle=function e(t,i,a){var n,o,r,s,d,u,p,c,f,v;let b=Ne(Se(i));let y=t===null||t===void 0?void 0:t.displayMode;const m=i.targetObject.type==="PropertyPath"?i.targetObject.$target:i.targetObject;b=_e(m,b);const g=(n=m.annotations)===null||n===void 0?void 0:(o=n.Common)===null||o===void 0?void 0:o.Text;if(g===undefined){y="Value"}const h=Ce(i);const x=[];x.push(Ne("T_NEW_OBJECT","sap.fe.i18n"));x.push(Ne("T_ANNOTATION_HELPER_DEFAULT_OBJECT_PAGE_HEADER_TITLE_NO_HEADER_INFO","sap.fe.i18n"));if(!!((r=i.targetEntitySet)!==null&&r!==void 0&&(s=r.annotations)!==null&&s!==void 0&&(d=s.Common)!==null&&d!==void 0&&d.DraftRoot)||!!((u=i.targetEntitySet)!==null&&u!==void 0&&(p=u.annotations)!==null&&p!==void 0&&(c=p.Common)!==null&&c!==void 0&&c.DraftNode)){x.push(Ge.HasDraft);x.push(Ge.IsActive)}else{x.push(qe(null));x.push(qe(null))}switch(y){case"Value":x.push(b);x.push(qe(null));break;case"Description":x.push(Le(g,h));x.push(qe(null));break;case"ValueDescription":x.push(b);x.push(Le(g,h));break;default:if(g!==null&&g!==void 0&&(f=g.annotations)!==null&&f!==void 0&&(v=f.UI)!==null&&v!==void 0&&v.TextArrangement){x.push(Le(g,h));x.push(b)}else{x.push(Le(g,h));if(a){x.push(b)}else{x.push(qe(null))}}break}return Ke(ze(x,l.formatIdentifierTitle))};i.getObjectIdentifierText=function e(t,i){var a,n,o,r;let s=Ne(Se(i));const d=t===null||t===void 0?void 0:t.displayMode;const u=i.targetObject.type==="PropertyPath"?i.targetObject.$target:i.targetObject;const p=(a=u.annotations)===null||a===void 0?void 0:(n=a.Common)===null||n===void 0?void 0:n.Text;if(p===undefined||p!==null&&p!==void 0&&(o=p.annotations)!==null&&o!==void 0&&(r=o.UI)!==null&&r!==void 0&&r.TextArrangement){return undefined}s=_e(u,s);switch(d){case"ValueDescription":const e=Ce(i);return Ke(Le(p,e));case"DescriptionValue":return Ke(ze([s],l.formatToKeepWhitespace));default:return undefined}};i.setUpDataPointType=function e(t){if((t===null||t===void 0?void 0:t.term)==="com.sap.vocabularies.UI.v1.DataPoint"){t.$Type=t.$Type||"com.sap.vocabularies.UI.v1.DataPointType"}};i.setUpVisibleProperties=function e(t,i){t.visible=m.getVisibleExpression(i,t.formatOptions);t.displayVisible=t.formatOptions.fieldMode==="nowrapper"?t.visible:undefined};i.getContentId=function e(t){return`${t}-content`};i.setUpEditableProperties=function e(t,i,a,n){var o,l,s;const d=a!==null&&a!==void 0&&(o=a.targetObject)!==null&&o!==void 0&&o.Value?a.targetObject.Value:a===null||a===void 0?void 0:a.targetObject;if(t.editMode!==undefined&&t.editMode!==null){t.editModeAsObject=t.editMode}else{const e=t.formatOptions.measureDisplayMode?t.formatOptions.measureDisplayMode==="ReadOnly":false;t.editModeAsObject=b.getEditMode(d,a,e,true,i);t.editMode=Ke(t.editModeAsObject)}const p=b.getEditableExpressionAsObject(d,i,a);const c=je((l=t.entitySet)===null||l===void 0?void 0:l.getPath().replaceAll("/$NavigationPropertyBinding/","/"),n);const f=ke((s=t.entitySet)===null||s===void 0?void 0:s.getPath().replaceAll("/$NavigationPropertyBinding/","/"),n);const v={requiredPropertiesFromInsertRestrictions:c,requiredPropertiesFromUpdateRestrictions:f};if(u.isCollaborationDraftSupported(n)&&t.editMode!==h.Display){t.collaborationEnabled=true;const e=b.getCollaborationExpression(a,r.hasCollaborationActivity);t.collaborationHasActivityExpression=Ke(e);t.collaborationInitialsExpression=Ke(b.getCollaborationExpression(a,r.getCollaborationActivityInitials));t.collaborationColorExpression=Ke(b.getCollaborationExpression(a,r.getCollaborationActivityColor));t.editableExpression=Ke(Qe(p,Ve(e)));t.editMode=Ke(We(e,qe("ReadOnly"),t.editModeAsObject))}else{t.editableExpression=Ke(p)}t.enabledExpression=b.getEnabledExpression(d,i,false,a);t.requiredExpression=b.getRequiredExpression(d,i,false,false,v,a);if(t.idPrefix){t.editStyleId=Be([t.idPrefix,"Field-edit"])}};i.setUpFormatOptions=function e(t,a,n,o){var r;const l=i.getOverrides(n,t.dataField.getPath());if(!t.formatOptions.displayMode){t.formatOptions.displayMode=b.getDisplayMode(a)}t.formatOptions.textLinesEdit=l.textLinesEdit||l.formatOptions&&l.formatOptions.textLinesEdit||t.formatOptions.textLinesEdit||4;t.formatOptions.textMaxLines=l.textMaxLines||l.formatOptions&&l.formatOptions.textMaxLines||t.formatOptions.textMaxLines;if((r=o.models.viewData)!==null&&r!==void 0&&r.getProperty("/retrieveTextFromValueList")){t.formatOptions.retrieveTextFromValueList=m.isRetrieveTextFromValueListEnabled(a.targetObject,t.formatOptions);if(t.formatOptions.retrieveTextFromValueList){var s,d,u;const e=!!(a!==null&&a!==void 0&&(s=a.targetEntityType)!==null&&s!==void 0&&(d=s.annotations)!==null&&d!==void 0&&(u=d.UI)!==null&&u!==void 0&&u.TextArrangement);t.formatOptions.displayMode=e?t.formatOptions.displayMode:"DescriptionValue"}}if(t.formatOptions.fieldMode==="nowrapper"&&t.editMode==="Display"){if(t._flexId){t.noWrapperId=t._flexId}else{t.noWrapperId=t.idPrefix?Be([t.idPrefix,"Field-content"]):undefined}}};i.setUpDisplayStyle=function t(a,n,o){var r,l,s,d,u,p,c,f,v,h,I,F,O,P,E,T,A,D,M,C;const S=o.targetObject;if(!o.targetObject){a.displayStyle="Text";return}a.hasUnitOrCurrency=((r=S.annotations)===null||r===void 0?void 0:(l=r.Measures)===null||l===void 0?void 0:l.Unit)!==undefined||((s=S.annotations)===null||s===void 0?void 0:(d=s.Measures)===null||d===void 0?void 0:d.ISOCurrency)!==undefined;a.hasValidAnalyticalCurrencyOrUnit=b.hasValidAnalyticalCurrencyOrUnit(o);a.textFromValueList=$e(Ke(Re("FieldRuntime.retrieveTextFromValueList",[Ne(Se(o)),`/${S.fullyQualifiedName}`,a.formatOptions.displayMode])),false);if(S.type==="Edm.Stream"){var U,w,B,k,j,$,N,V,W,L,_,z;a.displayStyle="File";a.fileRelativePropertyPath=Se(o);if((U=S.annotations.Core)!==null&&U!==void 0&&(w=U.ContentDisposition)!==null&&w!==void 0&&w.Filename){var R,H;const e=Ue(o,(R=S.annotations.Core)===null||R===void 0?void 0:(H=R.ContentDisposition)===null||H===void 0?void 0:H.Filename);a.fileFilenameExpression="{ path: '"+Se(e)+"' }"}a.fileStreamNotEmpty=Ke(Ve(He(Ne(`${a.fileRelativePropertyPath}@odata.mediaContentType`),null)));a.fileUploadUrl=m.getValueBinding(o,{});a.fileFilenamePath=(B=S.annotations.Core)===null||B===void 0?void 0:(k=B.ContentDisposition)===null||k===void 0?void 0:(j=k.Filename)===null||j===void 0?void 0:j.path;a.fileMediaType=(($=S.annotations.Core)===null||$===void 0?void 0:$.MediaType)&&Ke(Le((N=S.annotations.Core)===null||N===void 0?void 0:N.MediaType));a.fileIsImage=!!((V=S.annotations.UI)!==null&&V!==void 0&&V.IsImageURL)||!!((W=S.annotations.UI)!==null&&W!==void 0&&W.IsImage)||/image\//i.test(((L=S.annotations.Core)===null||L===void 0?void 0:(_=L.MediaType)===null||_===void 0?void 0:_.toString())??"");a.fileAvatarSrc=m.getValueBinding(o,{});a.fileIconSrc=x.getPathForIconSource(a.fileRelativePropertyPath);a.fileLinkText=x.getFilenameExpr(a.fileFilenameExpression,"{sap.fe.i18n>M_FIELD_FILEUPLOADER_NOFILENAME_TEXT}");a.fileLinkHref=x.getDownloadUrl(a.fileUploadUrl??"");a.fileTextVisible=Ke(He(Ne(`${a.fileRelativePropertyPath}@odata.mediaContentType`),null));if((z=S.annotations.Core)!==null&&z!==void 0&&z.AcceptableMediaTypes){const e=Array.from(S.annotations.Core.AcceptableMediaTypes).map(e=>`'${e}'`);a.fileAcceptableMediaTypes=`{=odata.collection([${e.join(",")}])}`}a.fileMaximumSize=x.calculateMBfromByte(S.maxLength);return}if((u=S.annotations)!==null&&u!==void 0&&(p=u.UI)!==null&&p!==void 0&&p.IsImageURL){a.avatarVisible=m.getVisibleExpression(o);a.avatarSrc=m.getValueBinding(o,{});a.displayStyle="Avatar";return}switch(n.$Type){case"com.sap.vocabularies.UI.v1.DataPointType":a.displayStyle="DataPoint";return;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":if(((c=n.Target)===null||c===void 0?void 0:(f=c.$target)===null||f===void 0?void 0:f.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){a.displayStyle="DataPoint";return}else if(((v=n.Target)===null||v===void 0?void 0:(h=v.$target)===null||h===void 0?void 0:h.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){a.contactVisible=m.getVisibleExpression(o);a.displayStyle="Contact";return}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":const t=a.dataField.getObject();a.buttonPress=x.getPressEventForDataFieldActionButton(a,t);a.displayStyle="Button";if(n.ActionTarget===undefined){a.buttonIsBound=true;a.buttonOperationAvailable="false";a.buttonOperationAvailableFormatted="false";e.warning(`Warning: The action '${n.Action}' does not exist. The corresponding action button will be disabled.`);return}a.buttonIsBound=n.ActionTarget.isBound;a.buttonOperationAvailable=(I=n.ActionTarget.annotations)===null||I===void 0?void 0:(F=I.Core)===null||F===void 0?void 0:F.OperationAvailable;a.buttonOperationAvailableFormatted=undefined;if(a.buttonOperationAvailable){const e=n.ActionTarget;const t=e.parameters[0].name;a.buttonOperationAvailableFormatted=Ke(Le(a.buttonOperationAvailable,[],undefined,e=>{if(e.startsWith(t)){return e.replace(t+"/","")}return e}))}return;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":a.buttonPress=y.getPressHandlerForDataFieldForIBN(a.dataField.getObject(),undefined,undefined);i.setUpNavigationAvailable(a,n);a.displayStyle="Button";return;case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":a.text=i.getTextWithWhiteSpace(a.formatOptions,o);a.linkIsDataFieldWithIntentBasedNavigation=true;a.linkPress=y.getPressHandlerForDataFieldForIBN(a.dataField.getObject());a.displayStyle="Link";return;case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":a.linkIsDataFieldWithNavigationPath=true;a.linkPress=`FieldRuntime.onDataFieldWithNavigationPath(\${$source>/}, $controller, '${n.Target.value}')`;a.displayStyle="Link";return;case"com.sap.vocabularies.UI.v1.DataFieldWithAction":a.linkIsDataFieldWithAction=true;a.linkPress=x.getPressEventForDataFieldActionButton(a,a.dataField.getObject());a.displayStyle="Link";return}const q=m.isUsedInNavigationWithQuickViewFacets(o,S);const K=!!m.getPropertyWithSemanticObject(o)||a.semanticObject!==undefined&&a.semanticObject!=="";if(De(S,o)&&a.formatOptions.semanticKeyStyle){var Q,G,X;a.hasQuickView=q||K;a.hasSituationsIndicator=g.getSituationsNavigationProperty(o.targetEntityType)!==undefined;i.setUpObjectIdentifierTitleAndText(a,o);if((Q=o.targetEntitySet)!==null&&Q!==void 0&&(G=Q.annotations)!==null&&G!==void 0&&(X=G.Common)!==null&&X!==void 0&&X.DraftRoot){a.displayStyle="SemanticKeyWithDraftIndicator";return}a.displayStyle=a.formatOptions.semanticKeyStyle==="ObjectIdentifier"?"ObjectIdentifier":"LabelSemanticKey";return}if(n.Criticality){a.hasQuickView=q||K;a.displayStyle="ObjectStatus";return}if((O=S.annotations)!==null&&O!==void 0&&(P=O.Measures)!==null&&P!==void 0&&P.ISOCurrency&&String(a.formatOptions.isCurrencyAligned)==="true"&&a.formatOptions.measureDisplayMode!=="Hidden"){a.valueAsStringBindingExpression=m.getValueBinding(o,a.formatOptions,true,true,undefined,true);a.unitBindingExpression=Ke(b.getBindingForUnitOrCurrency(o));a.displayStyle="AmountWithCurrency";return}if((E=S.annotations)!==null&&E!==void 0&&(T=E.Communication)!==null&&T!==void 0&&T.IsEmailAddress||(A=S.annotations)!==null&&A!==void 0&&(D=A.Communication)!==null&&D!==void 0&&D.IsPhoneNumber){var J,Y;a.text=i.getTextWithWhiteSpace(a.formatOptions,o);a.linkIsEmailAddress=((J=S.annotations.Communication)===null||J===void 0?void 0:J.IsEmailAddress)!==undefined;a.linkIsPhoneNumber=((Y=S.annotations.Communication)===null||Y===void 0?void 0:Y.IsPhoneNumber)!==undefined;const e=m.getValueBinding(o,{});if(a.linkIsEmailAddress){a.linkUrl=`mailto:${e}`}if(a.linkIsPhoneNumber){a.linkUrl=`tel:${e}`}a.displayStyle="Link";return}if((M=S.annotations)!==null&&M!==void 0&&(C=M.UI)!==null&&C!==void 0&&C.MultiLineText){a.displayStyle="ExpandableText";return}if(q||K){a.text=i.getTextWithWhiteSpace(a.formatOptions,o);a.hasQuickView=true;a.displayStyle="LinkWithQuickView";return}if(n.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){a.text=i.getTextWithWhiteSpace(a.formatOptions,o);a.displayStyle="Link";a.iconUrl=n.IconUrl?Ke(Le(n.IconUrl)):undefined;a.linkUrl=Ke(Le(n.Url));return}a.displayStyle="Text"};i.setUpEditStyle=function e(t,a,n,o){m.setEditStyleProperties(t,a,n);t.fieldGroupIds=i.computeFieldGroupIds(n,o)};i.computeFieldGroupIds=function e(t,i){var a,n;if(!i){return""}const o=i.getSideEffectsService();const r=o.computeFieldGroupIds(((a=t.targetEntityType)===null||a===void 0?void 0:a.fullyQualifiedName)??"",((n=t.targetObject)===null||n===void 0?void 0:n.fullyQualifiedName)??"");const l=r.join(",");return l===""?undefined:l};i.setUpObjectIdentifierTitleAndText=function e(t,a){var n;if(((n=t.formatOptions)===null||n===void 0?void 0:n.semanticKeyStyle)==="ObjectIdentifier"){const e=t.hasQuickView;t.identifierTitle=i.getIdentifierTitle(t.formatOptions,a,e);if(!e){t.identifierText=i.getObjectIdentifierText(t.formatOptions,a)}else{t.identifierText=undefined}}else{t.identifierTitle=i.getIdentifierTitle(t.formatOptions,a,true);t.identifierText=undefined}};i.getTextWithWhiteSpace=function e(t,i){const a=m.getTextBinding(i,t,true);return a._type==="PathInModel"||typeof a==="string"?Ke(ze([a],"WSR")):Ke(a)};i.setUpNavigationAvailable=function e(t,i){t.navigationAvailable=true;if((i===null||i===void 0?void 0:i.$Type)==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"&&i.NavigationAvailable!==undefined&&String(t.formatOptions.ignoreNavigationAvailable)!=="true"){t.navigationAvailable=Ke(Le(i.NavigationAvailable))}};function i(e,a,n){var r;r=t.call(this,e)||this;et(r,"dataSourcePath",Z,tt(r));et(r,"emptyIndicatorMode",ee,tt(r));et(r,"_flexId",te,tt(r));et(r,"idPrefix",ie,tt(r));et(r,"_apiId",ae,tt(r));et(r,"noWrapperId",ne,tt(r));et(r,"vhIdPrefix",oe,tt(r));et(r,"entitySet",re,tt(r));et(r,"navigateAfterAction",le,tt(r));et(r,"dataField",se,tt(r));et(r,"editMode",de,tt(r));et(r,"wrap",ue,tt(r));et(r,"class",pe,tt(r));et(r,"ariaLabelledBy",ce,tt(r));et(r,"textAlign",fe,tt(r));et(r,"semanticObject",ve,tt(r));et(r,"requiredExpression",be,tt(r));et(r,"visible",ye,tt(r));et(r,"showErrorObjectStatus",me,tt(r));et(r,"formatOptions",ge,tt(r));et(r,"entityType",he,tt(r));et(r,"annotationPath",xe,tt(r));et(r,"property",Ie,tt(r));et(r,"valueHelpProperty",Fe,tt(r));et(r,"dataPoint",Oe,tt(r));et(r,"collaborationEnabled",Pe,tt(r));et(r,"_vhFlexId",Ee,tt(r));et(r,"onChange",Te,tt(r));r.hasQuickView=false;r.linkUrl=undefined;r.linkIsDataFieldWithIntentBasedNavigation=false;r.linkIsDataFieldWithNavigationPath=false;r.linkIsDataFieldWithAction=false;r.linkIsEmailAddress=false;r.linkIsPhoneNumber=false;r.linkPress=undefined;r.fileFilenameExpression=undefined;r.fileAcceptableMediaTypes=undefined;r.hasUnitOrCurrency=undefined;r.hasValidAnalyticalCurrencyOrUnit=undefined;r.textFromValueList=undefined;const l=o.convertMetaModelContext(r.dataField);let s=o.getInvolvedDataModelObjects(r.dataField,r.entitySet);i.setUpDataPointType(l);i.setUpVisibleProperties(tt(r),s);if(r._flexId){r._apiId=r._flexId;r._flexId=i.getContentId(r._flexId);r._vhFlexId=`${r._flexId}_${r.vhIdPrefix}`}const d=m.getDataModelObjectPathForValue(s);s=d||s;r.dataSourcePath=Me(s);const u=n.models.metaModel||n.models.entitySet;r.entityType=u.createBindingContext(`/${s.targetEntityType.fullyQualifiedName}`);i.setUpEditableProperties(tt(r),l,s,u);i.setUpFormatOptions(tt(r),s,a,n);i.setUpDisplayStyle(tt(r),l,s);i.setUpEditStyle(tt(r),l,s,n.appComponent);const p=["Avatar","AmountWithCurrency"];if(r.displayStyle&&p.indexOf(r.displayStyle)===-1&&s.targetObject){r.text=r.text??m.getTextBinding(s,r.formatOptions)}else{r.text=""}r.emptyIndicatorMode=r.formatOptions.showEmptyIndicator?"On":undefined;r.computeFieldContentContexts(u,l);return r}Ae=i;var a=i.prototype;a.computeFieldContentContexts=function e(t,i){var a,n,r;if(we(i)&&((a=i.annotations)===null||a===void 0?void 0:(n=a.UI)===null||n===void 0?void 0:n.DataFieldDefault)!==undefined){this.dataField=t.createBindingContext(`@${"com.sap.vocabularies.UI.v1.DataFieldDefault"}`,this.dataField);i=o.convertMetaModelContext(this.dataField)}switch((r=i.$Type)===null||r===void 0?void 0:r.valueOf()){case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithAction":this.property=t.createBindingContext("Value",this.dataField);this.valueHelpProperty=t.createBindingContext(x.valueHelpProperty(this.property));break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":this.annotationPath=t.createBindingContext("Target/$AnnotationPath",this.dataField);this.dataPoint=this.annotationPath;this.property=t.createBindingContext("Value",this.annotationPath);this.valueHelpProperty=t.createBindingContext(x.valueHelpProperty(this.property));break;case"com.sap.vocabularies.UI.v1.DataPointType":this.annotationPath=this.dataField;this.dataPoint=this.dataField;this.property=t.createBindingContext("Value",this.dataField);this.valueHelpProperty=t.createBindingContext(x.valueHelpProperty(this.property));break}};a.getTemplate=function e(){const t=["Button","ExpandableText","Avatar","Contact","File","DataPoint"];const i=["CheckBox"];if(t.includes(this.displayStyle)||i.includes(this.editStyle)){return I(this)}if(this.formatOptions.fieldMode==="nowrapper"&&this.editMode===h.Display){return Xe`<core:Fragment fragmentName="sap.fe.macros.internal.field.FieldContent" type="XML" />`}else{let e;if(this._apiId){e=this._apiId}else if(this.idPrefix){e=Be([this.idPrefix,"Field"])}else{e=undefined}if(this.onChange!==null&&this.onChange!=="null"){return Xe`
					<macroField:FieldAPI
						xmlns:macroField="sap.fe.macros.field"
						change="${this.onChange}"
						id="${e}"
						required="${this.requiredExpression}"
						editable="${this.editableExpression}"
						collaborationEnabled="${this.collaborationEnabled}"
						visible="${this.visible}"
					>
						<core:Fragment fragmentName="sap.fe.macros.internal.field.FieldContent" type="XML" />
					</macroField:FieldAPI>
				`}else{return Xe`<macroField:FieldAPI
						xmlns:macroField="sap.fe.macros.field"
						id="${e}"
						required="${this.requiredExpression}"
						editable="${this.editableExpression}"
						collaborationEnabled="${this.collaborationEnabled}"
						visible="${this.visible}"
					>
						<core:Fragment fragmentName="sap.fe.macros.internal.field.FieldContent" type="XML" />
					</macroField:FieldAPI>
					`}}};return i}(t),Z=nt(Y.prototype,"dataSourcePath",[O],{configurable:true,enumerable:true,writable:true,initializer:null}),ee=nt(Y.prototype,"emptyIndicatorMode",[P],{configurable:true,enumerable:true,writable:true,initializer:null}),te=nt(Y.prototype,"_flexId",[E],{configurable:true,enumerable:true,writable:true,initializer:null}),ie=nt(Y.prototype,"idPrefix",[T],{configurable:true,enumerable:true,writable:true,initializer:null}),ae=nt(Y.prototype,"_apiId",[A],{configurable:true,enumerable:true,writable:true,initializer:null}),ne=nt(Y.prototype,"noWrapperId",[D],{configurable:true,enumerable:true,writable:true,initializer:null}),oe=nt(Y.prototype,"vhIdPrefix",[M],{configurable:true,enumerable:true,writable:true,initializer:function(){return"FieldValueHelp"}}),re=nt(Y.prototype,"entitySet",[C],{configurable:true,enumerable:true,writable:true,initializer:null}),le=nt(Y.prototype,"navigateAfterAction",[S],{configurable:true,enumerable:true,writable:true,initializer:function(){return true}}),se=nt(Y.prototype,"dataField",[U],{configurable:true,enumerable:true,writable:true,initializer:null}),de=nt(Y.prototype,"editMode",[w],{configurable:true,enumerable:true,writable:true,initializer:null}),ue=nt(Y.prototype,"wrap",[B],{configurable:true,enumerable:true,writable:true,initializer:null}),pe=nt(Y.prototype,"class",[k],{configurable:true,enumerable:true,writable:true,initializer:null}),ce=nt(Y.prototype,"ariaLabelledBy",[j],{configurable:true,enumerable:true,writable:true,initializer:null}),fe=nt(Y.prototype,"textAlign",[$],{configurable:true,enumerable:true,writable:true,initializer:null}),ve=nt(Y.prototype,"semanticObject",[N],{configurable:true,enumerable:true,writable:true,initializer:null}),be=nt(Y.prototype,"requiredExpression",[V],{configurable:true,enumerable:true,writable:true,initializer:null}),ye=nt(Y.prototype,"visible",[W],{configurable:true,enumerable:true,writable:true,initializer:null}),me=nt(Y.prototype,"showErrorObjectStatus",[L],{configurable:true,enumerable:true,writable:true,initializer:null}),ge=nt(Y.prototype,"formatOptions",[_],{configurable:true,enumerable:true,writable:true,initializer:function(){return{}}}),he=nt(Y.prototype,"entityType",[z],{configurable:true,enumerable:true,writable:true,initializer:null}),xe=nt(Y.prototype,"annotationPath",[R],{configurable:true,enumerable:true,writable:true,initializer:null}),Ie=nt(Y.prototype,"property",[H],{configurable:true,enumerable:true,writable:true,initializer:null}),Fe=nt(Y.prototype,"valueHelpProperty",[q],{configurable:true,enumerable:true,writable:true,initializer:null}),Oe=nt(Y.prototype,"dataPoint",[K],{configurable:true,enumerable:true,writable:true,initializer:null}),Pe=nt(Y.prototype,"collaborationEnabled",[Q],{configurable:true,enumerable:true,writable:true,initializer:null}),Ee=nt(Y.prototype,"_vhFlexId",[G],{configurable:true,enumerable:true,writable:true,initializer:null}),Te=nt(Y.prototype,"onChange",[X],{configurable:true,enumerable:true,writable:true,initializer:null}),Y))||J);Ae=rt;return Ae},false);